{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/tristan/Documents/Uni/2018/Semester 2/COS 301/Group Project/TicketSalad/ticketsalad/Admin_Application/ticketadmin/semantic/src/definitions/modules/search.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"semantic/src/definitions/modules/search.js","filename":"/Users/tristan/Documents/Uni/2018/Semester 2/COS 301/Group Project/TicketSalad/ticketsalad/Admin_Application/ticketadmin/semantic/src/definitions/modules/search.js","passPerPreset":false,"envName":"development","cwd":"/Users/tristan/Documents/Uni/2018/Semester 2/COS 301/Group Project/TicketSalad/ticketsalad/Admin_Application/ticketadmin","root":"/Users/tristan/Documents/Uni/2018/Semester 2/COS 301/Group Project/TicketSalad/ticketsalad/Admin_Application/ticketadmin","generatorOpts":{"filename":"/Users/tristan/Documents/Uni/2018/Semester 2/COS 301/Group Project/TicketSalad/ticketsalad/Admin_Application/ticketadmin/semantic/src/definitions/modules/search.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"semantic/src/definitions/modules/search.js"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\n/*!\n * # Semantic UI - Search\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n;\n\n(function ($, window, document, undefined) {\n  'use strict';\n\n  window = typeof window != 'undefined' && window.Math == Math ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\n\n  $.fn.search = function (parameters) {\n    var $allModules = $(this),\n        moduleSelector = $allModules.selector || '',\n        time = new Date().getTime(),\n        performance = [],\n        query = arguments[0],\n        methodInvoked = typeof query == 'string',\n        queryArguments = [].slice.call(arguments, 1),\n        returnedValue;\n    $(this).each(function () {\n      var settings = $.isPlainObject(parameters) ? $.extend(true, {}, $.fn.search.settings, parameters) : $.extend({}, $.fn.search.settings),\n          className = settings.className,\n          metadata = settings.metadata,\n          regExp = settings.regExp,\n          fields = settings.fields,\n          selector = settings.selector,\n          error = settings.error,\n          namespace = settings.namespace,\n          eventNamespace = '.' + namespace,\n          moduleNamespace = namespace + '-module',\n          $module = $(this),\n          $prompt = $module.find(selector.prompt),\n          $searchButton = $module.find(selector.searchButton),\n          $results = $module.find(selector.results),\n          $result = $module.find(selector.result),\n          $category = $module.find(selector.category),\n          element = this,\n          instance = $module.data(moduleNamespace),\n          disabledBubbled = false,\n          resultsDismissed = false,\n          module;\n      module = {\n        initialize: function () {\n          module.verbose('Initializing module');\n          module.get.settings();\n          module.determine.searchFields();\n          module.bind.events();\n          module.set.type();\n          module.create.results();\n          module.instantiate();\n        },\n        instantiate: function () {\n          module.verbose('Storing instance of module', module);\n          instance = module;\n          $module.data(moduleNamespace, module);\n        },\n        destroy: function () {\n          module.verbose('Destroying instance');\n          $module.off(eventNamespace).removeData(moduleNamespace);\n        },\n        refresh: function () {\n          module.debug('Refreshing selector cache');\n          $prompt = $module.find(selector.prompt);\n          $searchButton = $module.find(selector.searchButton);\n          $category = $module.find(selector.category);\n          $results = $module.find(selector.results);\n          $result = $module.find(selector.result);\n        },\n        refreshResults: function () {\n          $results = $module.find(selector.results);\n          $result = $module.find(selector.result);\n        },\n        bind: {\n          events: function () {\n            module.verbose('Binding events to search');\n\n            if (settings.automatic) {\n              $module.on(module.get.inputEvent() + eventNamespace, selector.prompt, module.event.input);\n              $prompt.attr('autocomplete', 'off');\n            }\n\n            $module // prompt\n            .on('focus' + eventNamespace, selector.prompt, module.event.focus).on('blur' + eventNamespace, selector.prompt, module.event.blur).on('keydown' + eventNamespace, selector.prompt, module.handleKeyboard) // search button\n            .on('click' + eventNamespace, selector.searchButton, module.query) // results\n            .on('mousedown' + eventNamespace, selector.results, module.event.result.mousedown).on('mouseup' + eventNamespace, selector.results, module.event.result.mouseup).on('click' + eventNamespace, selector.result, module.event.result.click);\n          }\n        },\n        determine: {\n          searchFields: function () {\n            // this makes sure $.extend does not add specified search fields to default fields\n            // this is the only setting which should not extend defaults\n            if (parameters && parameters.searchFields !== undefined) {\n              settings.searchFields = parameters.searchFields;\n            }\n          }\n        },\n        event: {\n          input: function () {\n            if (settings.searchDelay) {\n              clearTimeout(module.timer);\n              module.timer = setTimeout(function () {\n                if (module.is.focused()) {\n                  module.query();\n                }\n              }, settings.searchDelay);\n            } else {\n              module.query();\n            }\n          },\n          focus: function () {\n            module.set.focus();\n\n            if (settings.searchOnFocus && module.has.minimumCharacters()) {\n              module.query(function () {\n                if (module.can.show()) {\n                  module.showResults();\n                }\n              });\n            }\n          },\n          blur: function (event) {\n            var pageLostFocus = document.activeElement === this,\n                callback = function () {\n              module.cancel.query();\n              module.remove.focus();\n              module.timer = setTimeout(module.hideResults, settings.hideDelay);\n            };\n\n            if (pageLostFocus) {\n              return;\n            }\n\n            resultsDismissed = false;\n\n            if (module.resultsClicked) {\n              module.debug('Determining if user action caused search to close');\n              $module.one('click.close' + eventNamespace, selector.results, function (event) {\n                if (module.is.inMessage(event) || disabledBubbled) {\n                  $prompt.focus();\n                  return;\n                }\n\n                disabledBubbled = false;\n\n                if (!module.is.animating() && !module.is.hidden()) {\n                  callback();\n                }\n              });\n            } else {\n              module.debug('Input blurred without user action, closing results');\n              callback();\n            }\n          },\n          result: {\n            mousedown: function () {\n              module.resultsClicked = true;\n            },\n            mouseup: function () {\n              module.resultsClicked = false;\n            },\n            click: function (event) {\n              module.debug('Search result selected');\n              var $result = $(this),\n                  $title = $result.find(selector.title).eq(0),\n                  $link = $result.is('a[href]') ? $result : $result.find('a[href]').eq(0),\n                  href = $link.attr('href') || false,\n                  target = $link.attr('target') || false,\n                  title = $title.html(),\n                  // title is used for result lookup\n              value = $title.length > 0 ? $title.text() : false,\n                  results = module.get.results(),\n                  result = $result.data(metadata.result) || module.get.result(value, results),\n                  returnedValue;\n\n              if ($.isFunction(settings.onSelect)) {\n                if (settings.onSelect.call(element, result, results) === false) {\n                  module.debug('Custom onSelect callback cancelled default select action');\n                  disabledBubbled = true;\n                  return;\n                }\n              }\n\n              module.hideResults();\n\n              if (value) {\n                module.set.value(value);\n              }\n\n              if (href) {\n                module.verbose('Opening search link found in result', $link);\n\n                if (target == '_blank' || event.ctrlKey) {\n                  window.open(href);\n                } else {\n                  window.location.href = href;\n                }\n              }\n            }\n          }\n        },\n        handleKeyboard: function (event) {\n          var // force selector refresh\n          $result = $module.find(selector.result),\n              $category = $module.find(selector.category),\n              $activeResult = $result.filter('.' + className.active),\n              currentIndex = $result.index($activeResult),\n              resultSize = $result.length,\n              hasActiveResult = $activeResult.length > 0,\n              keyCode = event.which,\n              keys = {\n            backspace: 8,\n            enter: 13,\n            escape: 27,\n            upArrow: 38,\n            downArrow: 40\n          },\n              newIndex; // search shortcuts\n\n          if (keyCode == keys.escape) {\n            module.verbose('Escape key pressed, blurring search field');\n            module.hideResults();\n            resultsDismissed = true;\n          }\n\n          if (module.is.visible()) {\n            if (keyCode == keys.enter) {\n              module.verbose('Enter key pressed, selecting active result');\n\n              if ($result.filter('.' + className.active).length > 0) {\n                module.event.result.click.call($result.filter('.' + className.active), event);\n                event.preventDefault();\n                return false;\n              }\n            } else if (keyCode == keys.upArrow && hasActiveResult) {\n              module.verbose('Up key pressed, changing active result');\n              newIndex = currentIndex - 1 < 0 ? currentIndex : currentIndex - 1;\n              $category.removeClass(className.active);\n              $result.removeClass(className.active).eq(newIndex).addClass(className.active).closest($category).addClass(className.active);\n              event.preventDefault();\n            } else if (keyCode == keys.downArrow) {\n              module.verbose('Down key pressed, changing active result');\n              newIndex = currentIndex + 1 >= resultSize ? currentIndex : currentIndex + 1;\n              $category.removeClass(className.active);\n              $result.removeClass(className.active).eq(newIndex).addClass(className.active).closest($category).addClass(className.active);\n              event.preventDefault();\n            }\n          } else {\n            // query shortcuts\n            if (keyCode == keys.enter) {\n              module.verbose('Enter key pressed, executing query');\n              module.query();\n              module.set.buttonPressed();\n              $prompt.one('keyup', module.remove.buttonFocus);\n            }\n          }\n        },\n        setup: {\n          api: function (searchTerm, callback) {\n            var apiSettings = {\n              debug: settings.debug,\n              on: false,\n              cache: settings.cache,\n              action: 'search',\n              urlData: {\n                query: searchTerm\n              },\n              onSuccess: function (response) {\n                module.parse.response.call(element, response, searchTerm);\n                callback();\n              },\n              onFailure: function () {\n                module.displayMessage(error.serverError);\n                callback();\n              },\n              onAbort: function (response) {},\n              onError: module.error\n            },\n                searchHTML;\n            $.extend(true, apiSettings, settings.apiSettings);\n            module.verbose('Setting up API request', apiSettings);\n            $module.api(apiSettings);\n          }\n        },\n        can: {\n          useAPI: function () {\n            return $.fn.api !== undefined;\n          },\n          show: function () {\n            return module.is.focused() && !module.is.visible() && !module.is.empty();\n          },\n          transition: function () {\n            return settings.transition && $.fn.transition !== undefined && $module.transition('is supported');\n          }\n        },\n        is: {\n          animating: function () {\n            return $results.hasClass(className.animating);\n          },\n          hidden: function () {\n            return $results.hasClass(className.hidden);\n          },\n          inMessage: function (event) {\n            if (!event.target) {\n              return;\n            }\n\n            var $target = $(event.target),\n                isInDOM = $.contains(document.documentElement, event.target);\n            return isInDOM && $target.closest(selector.message).length > 0;\n          },\n          empty: function () {\n            return $results.html() === '';\n          },\n          visible: function () {\n            return $results.filter(':visible').length > 0;\n          },\n          focused: function () {\n            return $prompt.filter(':focus').length > 0;\n          }\n        },\n        get: {\n          settings: function () {\n            if ($.isPlainObject(parameters) && parameters.searchFullText) {\n              settings.fullTextSearch = parameters.searchFullText;\n              module.error(settings.error.oldSearchSyntax, element);\n            }\n          },\n          inputEvent: function () {\n            var prompt = $prompt[0],\n                inputEvent = prompt !== undefined && prompt.oninput !== undefined ? 'input' : prompt !== undefined && prompt.onpropertychange !== undefined ? 'propertychange' : 'keyup';\n            return inputEvent;\n          },\n          value: function () {\n            return $prompt.val();\n          },\n          results: function () {\n            var results = $module.data(metadata.results);\n            return results;\n          },\n          result: function (value, results) {\n            var lookupFields = ['title', 'id'],\n                result = false;\n            value = value !== undefined ? value : module.get.value();\n            results = results !== undefined ? results : module.get.results();\n\n            if (settings.type === 'category') {\n              module.debug('Finding result that matches', value);\n              $.each(results, function (index, category) {\n                if ($.isArray(category.results)) {\n                  result = module.search.object(value, category.results, lookupFields)[0]; // don't continue searching if a result is found\n\n                  if (result) {\n                    return false;\n                  }\n                }\n              });\n            } else {\n              module.debug('Finding result in results object', value);\n              result = module.search.object(value, results, lookupFields)[0];\n            }\n\n            return result || false;\n          }\n        },\n        select: {\n          firstResult: function () {\n            module.verbose('Selecting first result');\n            $result.first().addClass(className.active);\n          }\n        },\n        set: {\n          focus: function () {\n            $module.addClass(className.focus);\n          },\n          loading: function () {\n            $module.addClass(className.loading);\n          },\n          value: function (value) {\n            module.verbose('Setting search input value', value);\n            $prompt.val(value);\n          },\n          type: function (type) {\n            type = type || settings.type;\n\n            if (settings.type == 'category') {\n              $module.addClass(settings.type);\n            }\n          },\n          buttonPressed: function () {\n            $searchButton.addClass(className.pressed);\n          }\n        },\n        remove: {\n          loading: function () {\n            $module.removeClass(className.loading);\n          },\n          focus: function () {\n            $module.removeClass(className.focus);\n          },\n          buttonPressed: function () {\n            $searchButton.removeClass(className.pressed);\n          }\n        },\n        query: function (callback) {\n          callback = $.isFunction(callback) ? callback : function () {};\n          var searchTerm = module.get.value(),\n              cache = module.read.cache(searchTerm);\n\n          callback = callback || function () {};\n\n          if (module.has.minimumCharacters()) {\n            if (cache) {\n              module.debug('Reading result from cache', searchTerm);\n              module.save.results(cache.results);\n              module.addResults(cache.html);\n              module.inject.id(cache.results);\n              callback();\n            } else {\n              module.debug('Querying for', searchTerm);\n\n              if ($.isPlainObject(settings.source) || $.isArray(settings.source)) {\n                module.search.local(searchTerm);\n                callback();\n              } else if (module.can.useAPI()) {\n                module.search.remote(searchTerm, callback);\n              } else {\n                module.error(error.source);\n                callback();\n              }\n            }\n\n            settings.onSearchQuery.call(element, searchTerm);\n          } else {\n            module.hideResults();\n          }\n        },\n        search: {\n          local: function (searchTerm) {\n            var results = module.search.object(searchTerm, settings.content),\n                searchHTML;\n            module.set.loading();\n            module.save.results(results);\n            module.debug('Returned full local search results', results);\n\n            if (settings.maxResults > 0) {\n              module.debug('Using specified max results', results);\n              results = results.slice(0, settings.maxResults);\n            }\n\n            if (settings.type == 'category') {\n              results = module.create.categoryResults(results);\n            }\n\n            searchHTML = module.generateResults({\n              results: results\n            });\n            module.remove.loading();\n            module.addResults(searchHTML);\n            module.inject.id(results);\n            module.write.cache(searchTerm, {\n              html: searchHTML,\n              results: results\n            });\n          },\n          remote: function (searchTerm, callback) {\n            callback = $.isFunction(callback) ? callback : function () {};\n\n            if ($module.api('is loading')) {\n              $module.api('abort');\n            }\n\n            module.setup.api(searchTerm, callback);\n            $module.api('query');\n          },\n          object: function (searchTerm, source, searchFields) {\n            var results = [],\n                exactResults = [],\n                fuzzyResults = [],\n                searchExp = searchTerm.toString().replace(regExp.escape, '\\\\$&'),\n                matchRegExp = new RegExp(regExp.beginsWith + searchExp, 'i'),\n                // avoid duplicates when pushing results\n            addResult = function (array, result) {\n              var notResult = $.inArray(result, results) == -1,\n                  notFuzzyResult = $.inArray(result, fuzzyResults) == -1,\n                  notExactResults = $.inArray(result, exactResults) == -1;\n\n              if (notResult && notFuzzyResult && notExactResults) {\n                array.push(result);\n              }\n            };\n\n            source = source || settings.source;\n            searchFields = searchFields !== undefined ? searchFields : settings.searchFields; // search fields should be array to loop correctly\n\n            if (!$.isArray(searchFields)) {\n              searchFields = [searchFields];\n            } // exit conditions if no source\n\n\n            if (source === undefined || source === false) {\n              module.error(error.source);\n              return [];\n            } // iterate through search fields looking for matches\n\n\n            $.each(searchFields, function (index, field) {\n              $.each(source, function (label, content) {\n                var fieldExists = typeof content[field] == 'string';\n\n                if (fieldExists) {\n                  if (content[field].search(matchRegExp) !== -1) {\n                    // content starts with value (first in results)\n                    addResult(results, content);\n                  } else if (settings.fullTextSearch === 'exact' && module.exactSearch(searchTerm, content[field])) {\n                    // content fuzzy matches (last in results)\n                    addResult(exactResults, content);\n                  } else if (settings.fullTextSearch == true && module.fuzzySearch(searchTerm, content[field])) {\n                    // content fuzzy matches (last in results)\n                    addResult(fuzzyResults, content);\n                  }\n                }\n              });\n            });\n            $.merge(exactResults, fuzzyResults);\n            $.merge(results, exactResults);\n            return results;\n          }\n        },\n        exactSearch: function (query, term) {\n          query = query.toLowerCase();\n          term = term.toLowerCase();\n\n          if (term.indexOf(query) > -1) {\n            return true;\n          }\n\n          return false;\n        },\n        fuzzySearch: function (query, term) {\n          var termLength = term.length,\n              queryLength = query.length;\n\n          if (typeof query !== 'string') {\n            return false;\n          }\n\n          query = query.toLowerCase();\n          term = term.toLowerCase();\n\n          if (queryLength > termLength) {\n            return false;\n          }\n\n          if (queryLength === termLength) {\n            return query === term;\n          }\n\n          search: for (var characterIndex = 0, nextCharacterIndex = 0; characterIndex < queryLength; characterIndex++) {\n            var queryCharacter = query.charCodeAt(characterIndex);\n\n            while (nextCharacterIndex < termLength) {\n              if (term.charCodeAt(nextCharacterIndex++) === queryCharacter) {\n                continue search;\n              }\n            }\n\n            return false;\n          }\n\n          return true;\n        },\n        parse: {\n          response: function (response, searchTerm) {\n            var searchHTML = module.generateResults(response);\n            module.verbose('Parsing server response', response);\n\n            if (response !== undefined) {\n              if (searchTerm !== undefined && response[fields.results] !== undefined) {\n                module.addResults(searchHTML);\n                module.inject.id(response[fields.results]);\n                module.write.cache(searchTerm, {\n                  html: searchHTML,\n                  results: response[fields.results]\n                });\n                module.save.results(response[fields.results]);\n              }\n            }\n          }\n        },\n        cancel: {\n          query: function () {\n            if (module.can.useAPI()) {\n              $module.api('abort');\n            }\n          }\n        },\n        has: {\n          minimumCharacters: function () {\n            var searchTerm = module.get.value(),\n                numCharacters = searchTerm.length;\n            return numCharacters >= settings.minCharacters;\n          },\n          results: function () {\n            if ($results.length === 0) {\n              return false;\n            }\n\n            var html = $results.html();\n            return html != '';\n          }\n        },\n        clear: {\n          cache: function (value) {\n            var cache = $module.data(metadata.cache);\n\n            if (!value) {\n              module.debug('Clearing cache', value);\n              $module.removeData(metadata.cache);\n            } else if (value && cache && cache[value]) {\n              module.debug('Removing value from cache', value);\n              delete cache[value];\n              $module.data(metadata.cache, cache);\n            }\n          }\n        },\n        read: {\n          cache: function (name) {\n            var cache = $module.data(metadata.cache);\n\n            if (settings.cache) {\n              module.verbose('Checking cache for generated html for query', name);\n              return (0, _typeof2.default)(cache) == 'object' && cache[name] !== undefined ? cache[name] : false;\n            }\n\n            return false;\n          }\n        },\n        create: {\n          categoryResults: function (results) {\n            var categoryResults = {};\n            $.each(results, function (index, result) {\n              if (!result.category) {\n                return;\n              }\n\n              if (categoryResults[result.category] === undefined) {\n                module.verbose('Creating new category of results', result.category);\n                categoryResults[result.category] = {\n                  name: result.category,\n                  results: [result]\n                };\n              } else {\n                categoryResults[result.category].results.push(result);\n              }\n            });\n            return categoryResults;\n          },\n          id: function (resultIndex, categoryIndex) {\n            var resultID = resultIndex + 1,\n                // not zero indexed\n            categoryID = categoryIndex + 1,\n                firstCharCode,\n                letterID,\n                id;\n\n            if (categoryIndex !== undefined) {\n              // start char code for \"A\"\n              letterID = String.fromCharCode(97 + categoryIndex);\n              id = letterID + resultID;\n              module.verbose('Creating category result id', id);\n            } else {\n              id = resultID;\n              module.verbose('Creating result id', id);\n            }\n\n            return id;\n          },\n          results: function () {\n            if ($results.length === 0) {\n              $results = $('<div />').addClass(className.results).appendTo($module);\n            }\n          }\n        },\n        inject: {\n          result: function (result, resultIndex, categoryIndex) {\n            module.verbose('Injecting result into results');\n            var $selectedResult = categoryIndex !== undefined ? $results.children().eq(categoryIndex).children(selector.results).first().children(selector.result).eq(resultIndex) : $results.children(selector.result).eq(resultIndex);\n            module.verbose('Injecting results metadata', $selectedResult);\n            $selectedResult.data(metadata.result, result);\n          },\n          id: function (results) {\n            module.debug('Injecting unique ids into results');\n            var // since results may be object, we must use counters\n            categoryIndex = 0,\n                resultIndex = 0;\n\n            if (settings.type === 'category') {\n              // iterate through each category result\n              $.each(results, function (index, category) {\n                resultIndex = 0;\n                $.each(category.results, function (index, value) {\n                  var result = category.results[index];\n\n                  if (result.id === undefined) {\n                    result.id = module.create.id(resultIndex, categoryIndex);\n                  }\n\n                  module.inject.result(result, resultIndex, categoryIndex);\n                  resultIndex++;\n                });\n                categoryIndex++;\n              });\n            } else {\n              // top level\n              $.each(results, function (index, value) {\n                var result = results[index];\n\n                if (result.id === undefined) {\n                  result.id = module.create.id(resultIndex);\n                }\n\n                module.inject.result(result, resultIndex);\n                resultIndex++;\n              });\n            }\n\n            return results;\n          }\n        },\n        save: {\n          results: function (results) {\n            module.verbose('Saving current search results to metadata', results);\n            $module.data(metadata.results, results);\n          }\n        },\n        write: {\n          cache: function (name, value) {\n            var cache = $module.data(metadata.cache) !== undefined ? $module.data(metadata.cache) : {};\n\n            if (settings.cache) {\n              module.verbose('Writing generated html to cache', name, value);\n              cache[name] = value;\n              $module.data(metadata.cache, cache);\n            }\n          }\n        },\n        addResults: function (html) {\n          if ($.isFunction(settings.onResultsAdd)) {\n            if (settings.onResultsAdd.call($results, html) === false) {\n              module.debug('onResultsAdd callback cancelled default action');\n              return false;\n            }\n          }\n\n          if (html) {\n            $results.html(html);\n            module.refreshResults();\n\n            if (settings.selectFirstResult) {\n              module.select.firstResult();\n            }\n\n            module.showResults();\n          } else {\n            module.hideResults(function () {\n              $results.empty();\n            });\n          }\n        },\n        showResults: function (callback) {\n          callback = $.isFunction(callback) ? callback : function () {};\n\n          if (resultsDismissed) {\n            return;\n          }\n\n          if (!module.is.visible() && module.has.results()) {\n            if (module.can.transition()) {\n              module.debug('Showing results with css animations');\n              $results.transition({\n                animation: settings.transition + ' in',\n                debug: settings.debug,\n                verbose: settings.verbose,\n                duration: settings.duration,\n                onComplete: function () {\n                  callback();\n                },\n                queue: true\n              });\n            } else {\n              module.debug('Showing results with javascript');\n              $results.stop().fadeIn(settings.duration, settings.easing);\n            }\n\n            settings.onResultsOpen.call($results);\n          }\n        },\n        hideResults: function (callback) {\n          callback = $.isFunction(callback) ? callback : function () {};\n\n          if (module.is.visible()) {\n            if (module.can.transition()) {\n              module.debug('Hiding results with css animations');\n              $results.transition({\n                animation: settings.transition + ' out',\n                debug: settings.debug,\n                verbose: settings.verbose,\n                duration: settings.duration,\n                onComplete: function () {\n                  callback();\n                },\n                queue: true\n              });\n            } else {\n              module.debug('Hiding results with javascript');\n              $results.stop().fadeOut(settings.duration, settings.easing);\n            }\n\n            settings.onResultsClose.call($results);\n          }\n        },\n        generateResults: function (response) {\n          module.debug('Generating html from response', response);\n          var template = settings.templates[settings.type],\n              isProperObject = $.isPlainObject(response[fields.results]) && !$.isEmptyObject(response[fields.results]),\n              isProperArray = $.isArray(response[fields.results]) && response[fields.results].length > 0,\n              html = '';\n\n          if (isProperObject || isProperArray) {\n            if (settings.maxResults > 0) {\n              if (isProperObject) {\n                if (settings.type == 'standard') {\n                  module.error(error.maxResults);\n                }\n              } else {\n                response[fields.results] = response[fields.results].slice(0, settings.maxResults);\n              }\n            }\n\n            if ($.isFunction(template)) {\n              html = template(response, fields);\n            } else {\n              module.error(error.noTemplate, false);\n            }\n          } else if (settings.showNoResults) {\n            html = module.displayMessage(error.noResults, 'empty');\n          }\n\n          settings.onResults.call(element, response);\n          return html;\n        },\n        displayMessage: function (text, type) {\n          type = type || 'standard';\n          module.debug('Displaying message', text, type);\n          module.addResults(settings.templates.message(text, type));\n          return settings.templates.message(text, type);\n        },\n        setting: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, settings, name);\n          } else if (value !== undefined) {\n            settings[name] = value;\n          } else {\n            return settings[name];\n          }\n        },\n        internal: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, module, name);\n          } else if (value !== undefined) {\n            module[name] = value;\n          } else {\n            return module[name];\n          }\n        },\n        debug: function () {\n          if (!settings.silent && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function () {\n          if (!settings.silent && settings.verbose && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function () {\n          if (!settings.silent) {\n            module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n            module.error.apply(console, arguments);\n          }\n        },\n        performance: {\n          log: function (message) {\n            var currentTime, executionTime, previousTime;\n\n            if (settings.performance) {\n              currentTime = new Date().getTime();\n              previousTime = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time = currentTime;\n              performance.push({\n                'Name': message[0],\n                'Arguments': [].slice.call(message, 1) || '',\n                'Element': element,\n                'Execution Time': executionTime\n              });\n            }\n\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function () {\n            var title = settings.name + ':',\n                totalTime = 0;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function (index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n\n            if (moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n\n            if ($allModules.length > 1) {\n              title += ' ' + '(' + $allModules.length + ')';\n            }\n\n            if ((console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n\n              if (console.table) {\n                console.table(performance);\n              } else {\n                $.each(performance, function (index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time'] + 'ms');\n                });\n              }\n\n              console.groupEnd();\n            }\n\n            performance = [];\n          }\n        },\n        invoke: function (query, passedArguments, context) {\n          var object = instance,\n              maxDepth,\n              found,\n              response;\n          passedArguments = passedArguments || queryArguments;\n          context = element || context;\n\n          if (typeof query == 'string' && object !== undefined) {\n            query = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function (depth, value) {\n              var camelCaseValue = depth != maxDepth ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1) : query;\n\n              if ($.isPlainObject(object[camelCaseValue]) && depth != maxDepth) {\n                object = object[camelCaseValue];\n              } else if (object[camelCaseValue] !== undefined) {\n                found = object[camelCaseValue];\n                return false;\n              } else if ($.isPlainObject(object[value]) && depth != maxDepth) {\n                object = object[value];\n              } else if (object[value] !== undefined) {\n                found = object[value];\n                return false;\n              } else {\n                return false;\n              }\n            });\n          }\n\n          if ($.isFunction(found)) {\n            response = found.apply(context, passedArguments);\n          } else if (found !== undefined) {\n            response = found;\n          }\n\n          if ($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          } else if (returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          } else if (response !== undefined) {\n            returnedValue = response;\n          }\n\n          return found;\n        }\n      };\n\n      if (methodInvoked) {\n        if (instance === undefined) {\n          module.initialize();\n        }\n\n        module.invoke(query);\n      } else {\n        if (instance !== undefined) {\n          instance.invoke('destroy');\n        }\n\n        module.initialize();\n      }\n    });\n    return returnedValue !== undefined ? returnedValue : this;\n  };\n\n  $.fn.search.settings = {\n    name: 'Search',\n    namespace: 'search',\n    silent: false,\n    debug: false,\n    verbose: false,\n    performance: true,\n    // template to use (specified in settings.templates)\n    type: 'standard',\n    // minimum characters required to search\n    minCharacters: 1,\n    // whether to select first result after searching automatically\n    selectFirstResult: false,\n    // API config\n    apiSettings: false,\n    // object to search\n    source: false,\n    // Whether search should query current term on focus\n    searchOnFocus: true,\n    // fields to search\n    searchFields: ['title', 'description'],\n    // field to display in standard results template\n    displayField: '',\n    // search anywhere in value (set to 'exact' to require exact matches\n    fullTextSearch: 'exact',\n    // whether to add events to prompt automatically\n    automatic: true,\n    // delay before hiding menu after blur\n    hideDelay: 0,\n    // delay before searching\n    searchDelay: 200,\n    // maximum results returned from search\n    maxResults: 7,\n    // whether to store lookups in local cache\n    cache: true,\n    // whether no results errors should be shown\n    showNoResults: true,\n    // transition settings\n    transition: 'scale',\n    duration: 200,\n    easing: 'easeOutExpo',\n    // callbacks\n    onSelect: false,\n    onResultsAdd: false,\n    onSearchQuery: function (query) {},\n    onResults: function (response) {},\n    onResultsOpen: function () {},\n    onResultsClose: function () {},\n    className: {\n      animating: 'animating',\n      active: 'active',\n      empty: 'empty',\n      focus: 'focus',\n      hidden: 'hidden',\n      loading: 'loading',\n      results: 'results',\n      pressed: 'down'\n    },\n    error: {\n      source: 'Cannot search. No source used, and Semantic API module was not included',\n      noResults: 'Your search returned no results',\n      logging: 'Error in debug logging, exiting.',\n      noEndpoint: 'No search endpoint was specified',\n      noTemplate: 'A valid template name was not specified.',\n      oldSearchSyntax: 'searchFullText setting has been renamed fullTextSearch for consistency, please adjust your settings.',\n      serverError: 'There was an issue querying the server.',\n      maxResults: 'Results must be an array to use maxResults setting',\n      method: 'The method you called is not defined.'\n    },\n    metadata: {\n      cache: 'cache',\n      results: 'results',\n      result: 'result'\n    },\n    regExp: {\n      escape: /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\n      beginsWith: '(?:\\s|^)'\n    },\n    // maps api response attributes to internal representation\n    fields: {\n      categories: 'results',\n      // array of categories (category view)\n      categoryName: 'name',\n      // name of category (category view)\n      categoryResults: 'results',\n      // array of results (category view)\n      description: 'description',\n      // result description\n      image: 'image',\n      // result image\n      price: 'price',\n      // result price\n      results: 'results',\n      // array of results (standard)\n      title: 'title',\n      // result title\n      url: 'url',\n      // result url\n      action: 'action',\n      // \"view more\" object name\n      actionText: 'text',\n      // \"view more\" text\n      actionURL: 'url' // \"view more\" url\n\n    },\n    selector: {\n      prompt: '.prompt',\n      searchButton: '.search.button',\n      results: '.results',\n      message: '.results > .message',\n      category: '.category',\n      result: '.result',\n      title: '.title, .name'\n    },\n    templates: {\n      escape: function (string) {\n        var badChars = /[&<>\"'`]/g,\n            shouldEscape = /[&<>\"'`]/,\n            escape = {\n          \"&\": \"&amp;\",\n          \"<\": \"&lt;\",\n          \">\": \"&gt;\",\n          '\"': \"&quot;\",\n          \"'\": \"&#x27;\",\n          \"`\": \"&#x60;\"\n        },\n            escapedChar = function (chr) {\n          return escape[chr];\n        };\n\n        if (shouldEscape.test(string)) {\n          return string.replace(badChars, escapedChar);\n        }\n\n        return string;\n      },\n      message: function (message, type) {\n        var html = '';\n\n        if (message !== undefined && type !== undefined) {\n          html += '' + '<div class=\"message ' + type + '\">'; // message type\n\n          if (type == 'empty') {\n            html += '' + '<div class=\"header\">No Results</div class=\"header\">' + '<div class=\"description\">' + message + '</div class=\"description\">';\n          } else {\n            html += ' <div class=\"description\">' + message + '</div>';\n          }\n\n          html += '</div>';\n        }\n\n        return html;\n      },\n      category: function (response, fields) {\n        var html = '',\n            escape = $.fn.search.settings.templates.escape;\n\n        if (response[fields.categoryResults] !== undefined) {\n          // each category\n          $.each(response[fields.categoryResults], function (index, category) {\n            if (category[fields.results] !== undefined && category.results.length > 0) {\n              html += '<div class=\"category\">';\n\n              if (category[fields.categoryName] !== undefined) {\n                html += '<div class=\"name\">' + category[fields.categoryName] + '</div>';\n              } // each item inside category\n\n\n              html += '<div class=\"results\">';\n              $.each(category.results, function (index, result) {\n                if (result[fields.url]) {\n                  html += '<a class=\"result\" href=\"' + result[fields.url] + '\">';\n                } else {\n                  html += '<a class=\"result\">';\n                }\n\n                if (result[fields.image] !== undefined) {\n                  html += '' + '<div class=\"image\">' + ' <img src=\"' + result[fields.image] + '\">' + '</div>';\n                }\n\n                html += '<div class=\"content\">';\n\n                if (result[fields.price] !== undefined) {\n                  html += '<div class=\"price\">' + result[fields.price] + '</div>';\n                }\n\n                if (result[fields.title] !== undefined) {\n                  html += '<div class=\"title\">' + result[fields.title] + '</div>';\n                }\n\n                if (result[fields.description] !== undefined) {\n                  html += '<div class=\"description\">' + result[fields.description] + '</div>';\n                }\n\n                html += '' + '</div>';\n                html += '</a>';\n              });\n              html += '</div>';\n              html += '' + '</div>';\n            }\n          });\n\n          if (response[fields.action]) {\n            html += '' + '<a href=\"' + response[fields.action][fields.actionURL] + '\" class=\"action\">' + response[fields.action][fields.actionText] + '</a>';\n          }\n\n          return html;\n        }\n\n        return false;\n      },\n      standard: function (response, fields) {\n        var html = '';\n\n        if (response[fields.results] !== undefined) {\n          // each result\n          $.each(response[fields.results], function (index, result) {\n            if (result[fields.url]) {\n              html += '<a class=\"result\" href=\"' + result[fields.url] + '\">';\n            } else {\n              html += '<a class=\"result\">';\n            }\n\n            if (result[fields.image] !== undefined) {\n              html += '' + '<div class=\"image\">' + ' <img src=\"' + result[fields.image] + '\">' + '</div>';\n            }\n\n            html += '<div class=\"content\">';\n\n            if (result[fields.price] !== undefined) {\n              html += '<div class=\"price\">' + result[fields.price] + '</div>';\n            }\n\n            if (result[fields.title] !== undefined) {\n              html += '<div class=\"title\">' + result[fields.title] + '</div>';\n            }\n\n            if (result[fields.description] !== undefined) {\n              html += '<div class=\"description\">' + result[fields.description] + '</div>';\n            }\n\n            html += '' + '</div>';\n            html += '</a>';\n          });\n\n          if (response[fields.action]) {\n            html += '' + '<a href=\"' + response[fields.action][fields.actionURL] + '\" class=\"action\">' + response[fields.action][fields.actionText] + '</a>';\n          }\n\n          return html;\n        }\n\n        return false;\n      }\n    }\n  };\n})(jQuery, window, document);","map":{"version":3,"sources":["semantic/src/definitions/modules/search.js"],"names":["$","window","document","undefined","Math","self","Function","fn","search","parameters","$allModules","moduleSelector","selector","time","Date","getTime","performance","query","arguments","methodInvoked","queryArguments","slice","call","returnedValue","each","settings","isPlainObject","extend","className","metadata","regExp","fields","error","namespace","eventNamespace","moduleNamespace","$module","$prompt","find","prompt","$searchButton","searchButton","$results","results","$result","result","$category","category","element","instance","data","disabledBubbled","resultsDismissed","module","initialize","verbose","get","determine","searchFields","bind","events","set","type","create","instantiate","destroy","off","removeData","refresh","debug","refreshResults","automatic","on","inputEvent","event","input","attr","focus","blur","handleKeyboard","mousedown","mouseup","click","searchDelay","clearTimeout","timer","setTimeout","is","focused","searchOnFocus","has","minimumCharacters","can","show","showResults","pageLostFocus","activeElement","callback","cancel","remove","hideResults","hideDelay","resultsClicked","one","inMessage","animating","hidden","$title","title","eq","$link","href","target","html","value","length","text","isFunction","onSelect","ctrlKey","open","location","$activeResult","filter","active","currentIndex","index","resultSize","hasActiveResult","keyCode","which","keys","backspace","enter","escape","upArrow","downArrow","newIndex","visible","preventDefault","removeClass","addClass","closest","buttonPressed","buttonFocus","setup","api","searchTerm","apiSettings","cache","action","urlData","onSuccess","response","parse","onFailure","displayMessage","serverError","onAbort","onError","searchHTML","useAPI","empty","transition","hasClass","$target","isInDOM","contains","documentElement","message","searchFullText","fullTextSearch","oldSearchSyntax","oninput","onpropertychange","val","lookupFields","isArray","object","select","firstResult","first","loading","pressed","read","save","addResults","inject","id","source","local","remote","onSearchQuery","content","maxResults","categoryResults","generateResults","write","exactResults","fuzzyResults","searchExp","toString","replace","matchRegExp","RegExp","beginsWith","addResult","array","notResult","inArray","notFuzzyResult","notExactResults","push","field","label","fieldExists","exactSearch","fuzzySearch","merge","term","toLowerCase","indexOf","termLength","queryLength","characterIndex","nextCharacterIndex","queryCharacter","charCodeAt","numCharacters","minCharacters","clear","name","resultIndex","categoryIndex","resultID","categoryID","firstCharCode","letterID","String","fromCharCode","appendTo","$selectedResult","children","onResultsAdd","selectFirstResult","animation","duration","onComplete","queue","stop","fadeIn","easing","onResultsOpen","fadeOut","onResultsClose","template","templates","isProperObject","isEmptyObject","isProperArray","noTemplate","showNoResults","noResults","onResults","setting","internal","silent","log","prototype","console","info","apply","currentTime","executionTime","previousTime","display","totalTime","group","table","groupCollapsed","groupEnd","invoke","passedArguments","context","maxDepth","found","split","depth","camelCaseValue","charAt","toUpperCase","displayField","logging","noEndpoint","method","categories","categoryName","description","image","price","url","actionText","actionURL","string","badChars","shouldEscape","escapedChar","chr","test","standard","jQuery"],"mappings":"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","sourcesContent":["/*!\n * # Semantic UI - Search\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n\n;(function ($, window, document, undefined) {\n\n'use strict';\n\nwindow = (typeof window != 'undefined' && window.Math == Math)\n  ? window\n  : (typeof self != 'undefined' && self.Math == Math)\n    ? self\n    : Function('return this')()\n;\n\n$.fn.search = function(parameters) {\n  var\n    $allModules     = $(this),\n    moduleSelector  = $allModules.selector || '',\n\n    time            = new Date().getTime(),\n    performance     = [],\n\n    query           = arguments[0],\n    methodInvoked   = (typeof query == 'string'),\n    queryArguments  = [].slice.call(arguments, 1),\n    returnedValue\n  ;\n  $(this)\n    .each(function() {\n      var\n        settings          = ( $.isPlainObject(parameters) )\n          ? $.extend(true, {}, $.fn.search.settings, parameters)\n          : $.extend({}, $.fn.search.settings),\n\n        className        = settings.className,\n        metadata         = settings.metadata,\n        regExp           = settings.regExp,\n        fields           = settings.fields,\n        selector         = settings.selector,\n        error            = settings.error,\n        namespace        = settings.namespace,\n\n        eventNamespace   = '.' + namespace,\n        moduleNamespace  = namespace + '-module',\n\n        $module          = $(this),\n        $prompt          = $module.find(selector.prompt),\n        $searchButton    = $module.find(selector.searchButton),\n        $results         = $module.find(selector.results),\n        $result          = $module.find(selector.result),\n        $category        = $module.find(selector.category),\n\n        element          = this,\n        instance         = $module.data(moduleNamespace),\n\n        disabledBubbled  = false,\n        resultsDismissed = false,\n\n        module\n      ;\n\n      module = {\n\n        initialize: function() {\n          module.verbose('Initializing module');\n          module.get.settings();\n          module.determine.searchFields();\n          module.bind.events();\n          module.set.type();\n          module.create.results();\n          module.instantiate();\n        },\n        instantiate: function() {\n          module.verbose('Storing instance of module', module);\n          instance = module;\n          $module\n            .data(moduleNamespace, module)\n          ;\n        },\n        destroy: function() {\n          module.verbose('Destroying instance');\n          $module\n            .off(eventNamespace)\n            .removeData(moduleNamespace)\n          ;\n        },\n\n        refresh: function() {\n          module.debug('Refreshing selector cache');\n          $prompt         = $module.find(selector.prompt);\n          $searchButton   = $module.find(selector.searchButton);\n          $category       = $module.find(selector.category);\n          $results        = $module.find(selector.results);\n          $result         = $module.find(selector.result);\n        },\n\n        refreshResults: function() {\n          $results = $module.find(selector.results);\n          $result  = $module.find(selector.result);\n        },\n\n        bind: {\n          events: function() {\n            module.verbose('Binding events to search');\n            if(settings.automatic) {\n              $module\n                .on(module.get.inputEvent() + eventNamespace, selector.prompt, module.event.input)\n              ;\n              $prompt\n                .attr('autocomplete', 'off')\n              ;\n            }\n            $module\n              // prompt\n              .on('focus'     + eventNamespace, selector.prompt, module.event.focus)\n              .on('blur'      + eventNamespace, selector.prompt, module.event.blur)\n              .on('keydown'   + eventNamespace, selector.prompt, module.handleKeyboard)\n              // search button\n              .on('click'     + eventNamespace, selector.searchButton, module.query)\n              // results\n              .on('mousedown' + eventNamespace, selector.results, module.event.result.mousedown)\n              .on('mouseup'   + eventNamespace, selector.results, module.event.result.mouseup)\n              .on('click'     + eventNamespace, selector.result,  module.event.result.click)\n            ;\n          }\n        },\n\n        determine: {\n          searchFields: function() {\n            // this makes sure $.extend does not add specified search fields to default fields\n            // this is the only setting which should not extend defaults\n            if(parameters && parameters.searchFields !== undefined) {\n              settings.searchFields = parameters.searchFields;\n            }\n          }\n        },\n\n        event: {\n          input: function() {\n            if(settings.searchDelay) {\n              clearTimeout(module.timer);\n              module.timer = setTimeout(function() {\n                if(module.is.focused()) {\n                  module.query();\n                }\n              }, settings.searchDelay);\n            }\n            else {\n              module.query();\n            }\n          },\n          focus: function() {\n            module.set.focus();\n            if(settings.searchOnFocus && module.has.minimumCharacters() ) {\n              module.query(function() {\n                if(module.can.show() ) {\n                  module.showResults();\n                }\n              });\n            }\n          },\n          blur: function(event) {\n            var\n              pageLostFocus = (document.activeElement === this),\n              callback      = function() {\n                module.cancel.query();\n                module.remove.focus();\n                module.timer = setTimeout(module.hideResults, settings.hideDelay);\n              }\n            ;\n            if(pageLostFocus) {\n              return;\n            }\n            resultsDismissed = false;\n            if(module.resultsClicked) {\n              module.debug('Determining if user action caused search to close');\n              $module\n                .one('click.close' + eventNamespace, selector.results, function(event) {\n                  if(module.is.inMessage(event) || disabledBubbled) {\n                    $prompt.focus();\n                    return;\n                  }\n                  disabledBubbled = false;\n                  if( !module.is.animating() && !module.is.hidden()) {\n                    callback();\n                  }\n                })\n              ;\n            }\n            else {\n              module.debug('Input blurred without user action, closing results');\n              callback();\n            }\n          },\n          result: {\n            mousedown: function() {\n              module.resultsClicked = true;\n            },\n            mouseup: function() {\n              module.resultsClicked = false;\n            },\n            click: function(event) {\n              module.debug('Search result selected');\n              var\n                $result = $(this),\n                $title  = $result.find(selector.title).eq(0),\n                $link   = $result.is('a[href]')\n                  ? $result\n                  : $result.find('a[href]').eq(0),\n                href    = $link.attr('href')   || false,\n                target  = $link.attr('target') || false,\n                title   = $title.html(),\n                // title is used for result lookup\n                value   = ($title.length > 0)\n                  ? $title.text()\n                  : false,\n                results = module.get.results(),\n                result  = $result.data(metadata.result) || module.get.result(value, results),\n                returnedValue\n              ;\n              if( $.isFunction(settings.onSelect) ) {\n                if(settings.onSelect.call(element, result, results) === false) {\n                  module.debug('Custom onSelect callback cancelled default select action');\n                  disabledBubbled = true;\n                  return;\n                }\n              }\n              module.hideResults();\n              if(value) {\n                module.set.value(value);\n              }\n              if(href) {\n                module.verbose('Opening search link found in result', $link);\n                if(target == '_blank' || event.ctrlKey) {\n                  window.open(href);\n                }\n                else {\n                  window.location.href = (href);\n                }\n              }\n            }\n          }\n        },\n        handleKeyboard: function(event) {\n          var\n            // force selector refresh\n            $result         = $module.find(selector.result),\n            $category       = $module.find(selector.category),\n            $activeResult   = $result.filter('.' + className.active),\n            currentIndex    = $result.index( $activeResult ),\n            resultSize      = $result.length,\n            hasActiveResult = $activeResult.length > 0,\n\n            keyCode         = event.which,\n            keys            = {\n              backspace : 8,\n              enter     : 13,\n              escape    : 27,\n              upArrow   : 38,\n              downArrow : 40\n            },\n            newIndex\n          ;\n          // search shortcuts\n          if(keyCode == keys.escape) {\n            module.verbose('Escape key pressed, blurring search field');\n            module.hideResults();\n            resultsDismissed = true;\n          }\n          if( module.is.visible() ) {\n            if(keyCode == keys.enter) {\n              module.verbose('Enter key pressed, selecting active result');\n              if( $result.filter('.' + className.active).length > 0 ) {\n                module.event.result.click.call($result.filter('.' + className.active), event);\n                event.preventDefault();\n                return false;\n              }\n            }\n            else if(keyCode == keys.upArrow && hasActiveResult) {\n              module.verbose('Up key pressed, changing active result');\n              newIndex = (currentIndex - 1 < 0)\n                ? currentIndex\n                : currentIndex - 1\n              ;\n              $category\n                .removeClass(className.active)\n              ;\n              $result\n                .removeClass(className.active)\n                .eq(newIndex)\n                  .addClass(className.active)\n                  .closest($category)\n                    .addClass(className.active)\n              ;\n              event.preventDefault();\n            }\n            else if(keyCode == keys.downArrow) {\n              module.verbose('Down key pressed, changing active result');\n              newIndex = (currentIndex + 1 >= resultSize)\n                ? currentIndex\n                : currentIndex + 1\n              ;\n              $category\n                .removeClass(className.active)\n              ;\n              $result\n                .removeClass(className.active)\n                .eq(newIndex)\n                  .addClass(className.active)\n                  .closest($category)\n                    .addClass(className.active)\n              ;\n              event.preventDefault();\n            }\n          }\n          else {\n            // query shortcuts\n            if(keyCode == keys.enter) {\n              module.verbose('Enter key pressed, executing query');\n              module.query();\n              module.set.buttonPressed();\n              $prompt.one('keyup', module.remove.buttonFocus);\n            }\n          }\n        },\n\n        setup: {\n          api: function(searchTerm, callback) {\n            var\n              apiSettings = {\n                debug             : settings.debug,\n                on                : false,\n                cache             : settings.cache,\n                action            : 'search',\n                urlData           : {\n                  query : searchTerm\n                },\n                onSuccess         : function(response) {\n                  module.parse.response.call(element, response, searchTerm);\n                  callback();\n                },\n                onFailure         : function() {\n                  module.displayMessage(error.serverError);\n                  callback();\n                },\n                onAbort : function(response) {\n                },\n                onError           : module.error\n              },\n              searchHTML\n            ;\n            $.extend(true, apiSettings, settings.apiSettings);\n            module.verbose('Setting up API request', apiSettings);\n            $module.api(apiSettings);\n          }\n        },\n\n        can: {\n          useAPI: function() {\n            return $.fn.api !== undefined;\n          },\n          show: function() {\n            return module.is.focused() && !module.is.visible() && !module.is.empty();\n          },\n          transition: function() {\n            return settings.transition && $.fn.transition !== undefined && $module.transition('is supported');\n          }\n        },\n\n        is: {\n          animating: function() {\n            return $results.hasClass(className.animating);\n          },\n          hidden: function() {\n            return $results.hasClass(className.hidden);\n          },\n          inMessage: function(event) {\n            if(!event.target) {\n              return;\n            }\n            var\n              $target = $(event.target),\n              isInDOM = $.contains(document.documentElement, event.target)\n            ;\n            return (isInDOM && $target.closest(selector.message).length > 0);\n          },\n          empty: function() {\n            return ($results.html() === '');\n          },\n          visible: function() {\n            return ($results.filter(':visible').length > 0);\n          },\n          focused: function() {\n            return ($prompt.filter(':focus').length > 0);\n          }\n        },\n\n        get: {\n          settings: function() {\n            if($.isPlainObject(parameters) && parameters.searchFullText) {\n              settings.fullTextSearch = parameters.searchFullText;\n              module.error(settings.error.oldSearchSyntax, element);\n            }\n          },\n          inputEvent: function() {\n            var\n              prompt = $prompt[0],\n              inputEvent   = (prompt !== undefined && prompt.oninput !== undefined)\n                ? 'input'\n                : (prompt !== undefined && prompt.onpropertychange !== undefined)\n                  ? 'propertychange'\n                  : 'keyup'\n            ;\n            return inputEvent;\n          },\n          value: function() {\n            return $prompt.val();\n          },\n          results: function() {\n            var\n              results = $module.data(metadata.results)\n            ;\n            return results;\n          },\n          result: function(value, results) {\n            var\n              lookupFields = ['title', 'id'],\n              result       = false\n            ;\n            value = (value !== undefined)\n              ? value\n              : module.get.value()\n            ;\n            results = (results !== undefined)\n              ? results\n              : module.get.results()\n            ;\n            if(settings.type === 'category') {\n              module.debug('Finding result that matches', value);\n              $.each(results, function(index, category) {\n                if($.isArray(category.results)) {\n                  result = module.search.object(value, category.results, lookupFields)[0];\n                  // don't continue searching if a result is found\n                  if(result) {\n                    return false;\n                  }\n                }\n              });\n            }\n            else {\n              module.debug('Finding result in results object', value);\n              result = module.search.object(value, results, lookupFields)[0];\n            }\n            return result || false;\n          },\n        },\n\n        select: {\n          firstResult: function() {\n            module.verbose('Selecting first result');\n            $result.first().addClass(className.active);\n          }\n        },\n\n        set: {\n          focus: function() {\n            $module.addClass(className.focus);\n          },\n          loading: function() {\n            $module.addClass(className.loading);\n          },\n          value: function(value) {\n            module.verbose('Setting search input value', value);\n            $prompt\n              .val(value)\n            ;\n          },\n          type: function(type) {\n            type = type || settings.type;\n            if(settings.type == 'category') {\n              $module.addClass(settings.type);\n            }\n          },\n          buttonPressed: function() {\n            $searchButton.addClass(className.pressed);\n          }\n        },\n\n        remove: {\n          loading: function() {\n            $module.removeClass(className.loading);\n          },\n          focus: function() {\n            $module.removeClass(className.focus);\n          },\n          buttonPressed: function() {\n            $searchButton.removeClass(className.pressed);\n          }\n        },\n\n        query: function(callback) {\n          callback = $.isFunction(callback)\n            ? callback\n            : function(){}\n          ;\n          var\n            searchTerm = module.get.value(),\n            cache = module.read.cache(searchTerm)\n          ;\n          callback = callback || function() {};\n          if( module.has.minimumCharacters() )  {\n            if(cache) {\n              module.debug('Reading result from cache', searchTerm);\n              module.save.results(cache.results);\n              module.addResults(cache.html);\n              module.inject.id(cache.results);\n              callback();\n            }\n            else {\n              module.debug('Querying for', searchTerm);\n              if($.isPlainObject(settings.source) || $.isArray(settings.source)) {\n                module.search.local(searchTerm);\n                callback();\n              }\n              else if( module.can.useAPI() ) {\n                module.search.remote(searchTerm, callback);\n              }\n              else {\n                module.error(error.source);\n                callback();\n              }\n            }\n            settings.onSearchQuery.call(element, searchTerm);\n          }\n          else {\n            module.hideResults();\n          }\n        },\n\n        search: {\n          local: function(searchTerm) {\n            var\n              results = module.search.object(searchTerm, settings.content),\n              searchHTML\n            ;\n            module.set.loading();\n            module.save.results(results);\n            module.debug('Returned full local search results', results);\n            if(settings.maxResults > 0) {\n              module.debug('Using specified max results', results);\n              results = results.slice(0, settings.maxResults);\n            }\n            if(settings.type == 'category') {\n              results = module.create.categoryResults(results);\n            }\n            searchHTML = module.generateResults({\n              results: results\n            });\n            module.remove.loading();\n            module.addResults(searchHTML);\n            module.inject.id(results);\n            module.write.cache(searchTerm, {\n              html    : searchHTML,\n              results : results\n            });\n          },\n          remote: function(searchTerm, callback) {\n            callback = $.isFunction(callback)\n              ? callback\n              : function(){}\n            ;\n            if($module.api('is loading')) {\n              $module.api('abort');\n            }\n            module.setup.api(searchTerm, callback);\n            $module\n              .api('query')\n            ;\n          },\n          object: function(searchTerm, source, searchFields) {\n            var\n              results      = [],\n              exactResults = [],\n              fuzzyResults = [],\n              searchExp    = searchTerm.toString().replace(regExp.escape, '\\\\$&'),\n              matchRegExp  = new RegExp(regExp.beginsWith + searchExp, 'i'),\n\n              // avoid duplicates when pushing results\n              addResult = function(array, result) {\n                var\n                  notResult      = ($.inArray(result, results) == -1),\n                  notFuzzyResult = ($.inArray(result, fuzzyResults) == -1),\n                  notExactResults = ($.inArray(result, exactResults) == -1)\n                ;\n                if(notResult && notFuzzyResult && notExactResults) {\n                  array.push(result);\n                }\n              }\n            ;\n            source = source || settings.source;\n            searchFields = (searchFields !== undefined)\n              ? searchFields\n              : settings.searchFields\n            ;\n\n            // search fields should be array to loop correctly\n            if(!$.isArray(searchFields)) {\n              searchFields = [searchFields];\n            }\n\n            // exit conditions if no source\n            if(source === undefined || source === false) {\n              module.error(error.source);\n              return [];\n            }\n            // iterate through search fields looking for matches\n            $.each(searchFields, function(index, field) {\n              $.each(source, function(label, content) {\n                var\n                  fieldExists = (typeof content[field] == 'string')\n                ;\n                if(fieldExists) {\n                  if( content[field].search(matchRegExp) !== -1) {\n                    // content starts with value (first in results)\n                    addResult(results, content);\n                  }\n                  else if(settings.fullTextSearch === 'exact' && module.exactSearch(searchTerm, content[field]) ) {\n                    // content fuzzy matches (last in results)\n                    addResult(exactResults, content);\n                  }\n                  else if(settings.fullTextSearch == true && module.fuzzySearch(searchTerm, content[field]) ) {\n                    // content fuzzy matches (last in results)\n                    addResult(fuzzyResults, content);\n                  }\n                }\n              });\n            });\n            $.merge(exactResults, fuzzyResults)\n            $.merge(results, exactResults);\n            return results;\n          }\n        },\n        exactSearch: function (query, term) {\n          query = query.toLowerCase();\n          term  = term.toLowerCase();\n          if(term.indexOf(query) > -1) {\n             return true;\n          }\n          return false;\n        },\n        fuzzySearch: function(query, term) {\n          var\n            termLength  = term.length,\n            queryLength = query.length\n          ;\n          if(typeof query !== 'string') {\n            return false;\n          }\n          query = query.toLowerCase();\n          term  = term.toLowerCase();\n          if(queryLength > termLength) {\n            return false;\n          }\n          if(queryLength === termLength) {\n            return (query === term);\n          }\n          search: for (var characterIndex = 0, nextCharacterIndex = 0; characterIndex < queryLength; characterIndex++) {\n            var\n              queryCharacter = query.charCodeAt(characterIndex)\n            ;\n            while(nextCharacterIndex < termLength) {\n              if(term.charCodeAt(nextCharacterIndex++) === queryCharacter) {\n                continue search;\n              }\n            }\n            return false;\n          }\n          return true;\n        },\n\n        parse: {\n          response: function(response, searchTerm) {\n            var\n              searchHTML = module.generateResults(response)\n            ;\n            module.verbose('Parsing server response', response);\n            if(response !== undefined) {\n              if(searchTerm !== undefined && response[fields.results] !== undefined) {\n                module.addResults(searchHTML);\n                module.inject.id(response[fields.results]);\n                module.write.cache(searchTerm, {\n                  html    : searchHTML,\n                  results : response[fields.results]\n                });\n                module.save.results(response[fields.results]);\n              }\n            }\n          }\n        },\n\n        cancel: {\n          query: function() {\n            if( module.can.useAPI() ) {\n              $module.api('abort');\n            }\n          }\n        },\n\n        has: {\n          minimumCharacters: function() {\n            var\n              searchTerm    = module.get.value(),\n              numCharacters = searchTerm.length\n            ;\n            return (numCharacters >= settings.minCharacters);\n          },\n          results: function() {\n            if($results.length === 0) {\n              return false;\n            }\n            var\n              html = $results.html()\n            ;\n            return html != '';\n          }\n        },\n\n        clear: {\n          cache: function(value) {\n            var\n              cache = $module.data(metadata.cache)\n            ;\n            if(!value) {\n              module.debug('Clearing cache', value);\n              $module.removeData(metadata.cache);\n            }\n            else if(value && cache && cache[value]) {\n              module.debug('Removing value from cache', value);\n              delete cache[value];\n              $module.data(metadata.cache, cache);\n            }\n          }\n        },\n\n        read: {\n          cache: function(name) {\n            var\n              cache = $module.data(metadata.cache)\n            ;\n            if(settings.cache) {\n              module.verbose('Checking cache for generated html for query', name);\n              return (typeof cache == 'object') && (cache[name] !== undefined)\n                ? cache[name]\n                : false\n              ;\n            }\n            return false;\n          }\n        },\n\n        create: {\n          categoryResults: function(results) {\n            var\n              categoryResults = {}\n            ;\n            $.each(results, function(index, result) {\n              if(!result.category) {\n                return;\n              }\n              if(categoryResults[result.category] === undefined) {\n                module.verbose('Creating new category of results', result.category);\n                categoryResults[result.category] = {\n                  name    : result.category,\n                  results : [result]\n                }\n              }\n              else {\n                categoryResults[result.category].results.push(result);\n              }\n            });\n            return categoryResults;\n          },\n          id: function(resultIndex, categoryIndex) {\n            var\n              resultID      = (resultIndex + 1), // not zero indexed\n              categoryID    = (categoryIndex + 1),\n              firstCharCode,\n              letterID,\n              id\n            ;\n            if(categoryIndex !== undefined) {\n              // start char code for \"A\"\n              letterID = String.fromCharCode(97 + categoryIndex);\n              id          = letterID + resultID;\n              module.verbose('Creating category result id', id);\n            }\n            else {\n              id = resultID;\n              module.verbose('Creating result id', id);\n            }\n            return id;\n          },\n          results: function() {\n            if($results.length === 0) {\n              $results = $('<div />')\n                .addClass(className.results)\n                .appendTo($module)\n              ;\n            }\n          }\n        },\n\n        inject: {\n          result: function(result, resultIndex, categoryIndex) {\n            module.verbose('Injecting result into results');\n            var\n              $selectedResult = (categoryIndex !== undefined)\n                ? $results\n                    .children().eq(categoryIndex)\n                      .children(selector.results)\n                        .first()\n                        .children(selector.result)\n                          .eq(resultIndex)\n                : $results\n                    .children(selector.result).eq(resultIndex)\n            ;\n            module.verbose('Injecting results metadata', $selectedResult);\n            $selectedResult\n              .data(metadata.result, result)\n            ;\n          },\n          id: function(results) {\n            module.debug('Injecting unique ids into results');\n            var\n              // since results may be object, we must use counters\n              categoryIndex = 0,\n              resultIndex   = 0\n            ;\n            if(settings.type === 'category') {\n              // iterate through each category result\n              $.each(results, function(index, category) {\n                resultIndex = 0;\n                $.each(category.results, function(index, value) {\n                  var\n                    result = category.results[index]\n                  ;\n                  if(result.id === undefined) {\n                    result.id = module.create.id(resultIndex, categoryIndex);\n                  }\n                  module.inject.result(result, resultIndex, categoryIndex);\n                  resultIndex++;\n                });\n                categoryIndex++;\n              });\n            }\n            else {\n              // top level\n              $.each(results, function(index, value) {\n                var\n                  result = results[index]\n                ;\n                if(result.id === undefined) {\n                  result.id = module.create.id(resultIndex);\n                }\n                module.inject.result(result, resultIndex);\n                resultIndex++;\n              });\n            }\n            return results;\n          }\n        },\n\n        save: {\n          results: function(results) {\n            module.verbose('Saving current search results to metadata', results);\n            $module.data(metadata.results, results);\n          }\n        },\n\n        write: {\n          cache: function(name, value) {\n            var\n              cache = ($module.data(metadata.cache) !== undefined)\n                ? $module.data(metadata.cache)\n                : {}\n            ;\n            if(settings.cache) {\n              module.verbose('Writing generated html to cache', name, value);\n              cache[name] = value;\n              $module\n                .data(metadata.cache, cache)\n              ;\n            }\n          }\n        },\n\n        addResults: function(html) {\n          if( $.isFunction(settings.onResultsAdd) ) {\n            if( settings.onResultsAdd.call($results, html) === false ) {\n              module.debug('onResultsAdd callback cancelled default action');\n              return false;\n            }\n          }\n          if(html) {\n            $results\n              .html(html)\n            ;\n            module.refreshResults();\n            if(settings.selectFirstResult) {\n              module.select.firstResult();\n            }\n            module.showResults();\n          }\n          else {\n            module.hideResults(function() {\n              $results.empty();\n            });\n          }\n        },\n\n        showResults: function(callback) {\n          callback = $.isFunction(callback)\n            ? callback\n            : function(){}\n          ;\n          if(resultsDismissed) {\n            return;\n          }\n          if(!module.is.visible() && module.has.results()) {\n            if( module.can.transition() ) {\n              module.debug('Showing results with css animations');\n              $results\n                .transition({\n                  animation  : settings.transition + ' in',\n                  debug      : settings.debug,\n                  verbose    : settings.verbose,\n                  duration   : settings.duration,\n                  onComplete : function() {\n                    callback();\n                  },\n                  queue      : true\n                })\n              ;\n            }\n            else {\n              module.debug('Showing results with javascript');\n              $results\n                .stop()\n                .fadeIn(settings.duration, settings.easing)\n              ;\n            }\n            settings.onResultsOpen.call($results);\n          }\n        },\n        hideResults: function(callback) {\n          callback = $.isFunction(callback)\n            ? callback\n            : function(){}\n          ;\n          if( module.is.visible() ) {\n            if( module.can.transition() ) {\n              module.debug('Hiding results with css animations');\n              $results\n                .transition({\n                  animation  : settings.transition + ' out',\n                  debug      : settings.debug,\n                  verbose    : settings.verbose,\n                  duration   : settings.duration,\n                  onComplete : function() {\n                    callback();\n                  },\n                  queue      : true\n                })\n              ;\n            }\n            else {\n              module.debug('Hiding results with javascript');\n              $results\n                .stop()\n                .fadeOut(settings.duration, settings.easing)\n              ;\n            }\n            settings.onResultsClose.call($results);\n          }\n        },\n\n        generateResults: function(response) {\n          module.debug('Generating html from response', response);\n          var\n            template       = settings.templates[settings.type],\n            isProperObject = ($.isPlainObject(response[fields.results]) && !$.isEmptyObject(response[fields.results])),\n            isProperArray  = ($.isArray(response[fields.results]) && response[fields.results].length > 0),\n            html           = ''\n          ;\n          if(isProperObject || isProperArray ) {\n            if(settings.maxResults > 0) {\n              if(isProperObject) {\n                if(settings.type == 'standard') {\n                  module.error(error.maxResults);\n                }\n              }\n              else {\n                response[fields.results] = response[fields.results].slice(0, settings.maxResults);\n              }\n            }\n            if($.isFunction(template)) {\n              html = template(response, fields);\n            }\n            else {\n              module.error(error.noTemplate, false);\n            }\n          }\n          else if(settings.showNoResults) {\n            html = module.displayMessage(error.noResults, 'empty');\n          }\n          settings.onResults.call(element, response);\n          return html;\n        },\n\n        displayMessage: function(text, type) {\n          type = type || 'standard';\n          module.debug('Displaying message', text, type);\n          module.addResults( settings.templates.message(text, type) );\n          return settings.templates.message(text, type);\n        },\n\n        setting: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, settings, name);\n          }\n          else if(value !== undefined) {\n            settings[name] = value;\n          }\n          else {\n            return settings[name];\n          }\n        },\n        internal: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, module, name);\n          }\n          else if(value !== undefined) {\n            module[name] = value;\n          }\n          else {\n            return module[name];\n          }\n        },\n        debug: function() {\n          if(!settings.silent && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function() {\n          if(!settings.silent && settings.verbose && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function() {\n          if(!settings.silent) {\n            module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n            module.error.apply(console, arguments);\n          }\n        },\n        performance: {\n          log: function(message) {\n            var\n              currentTime,\n              executionTime,\n              previousTime\n            ;\n            if(settings.performance) {\n              currentTime   = new Date().getTime();\n              previousTime  = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time          = currentTime;\n              performance.push({\n                'Name'           : message[0],\n                'Arguments'      : [].slice.call(message, 1) || '',\n                'Element'        : element,\n                'Execution Time' : executionTime\n              });\n            }\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function() {\n            var\n              title = settings.name + ':',\n              totalTime = 0\n            ;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function(index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n            if(moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n            if($allModules.length > 1) {\n              title += ' ' + '(' + $allModules.length + ')';\n            }\n            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n              if(console.table) {\n                console.table(performance);\n              }\n              else {\n                $.each(performance, function(index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');\n                });\n              }\n              console.groupEnd();\n            }\n            performance = [];\n          }\n        },\n        invoke: function(query, passedArguments, context) {\n          var\n            object = instance,\n            maxDepth,\n            found,\n            response\n          ;\n          passedArguments = passedArguments || queryArguments;\n          context         = element         || context;\n          if(typeof query == 'string' && object !== undefined) {\n            query    = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function(depth, value) {\n              var camelCaseValue = (depth != maxDepth)\n                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)\n                : query\n              ;\n              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {\n                object = object[camelCaseValue];\n              }\n              else if( object[camelCaseValue] !== undefined ) {\n                found = object[camelCaseValue];\n                return false;\n              }\n              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {\n                object = object[value];\n              }\n              else if( object[value] !== undefined ) {\n                found = object[value];\n                return false;\n              }\n              else {\n                return false;\n              }\n            });\n          }\n          if( $.isFunction( found ) ) {\n            response = found.apply(context, passedArguments);\n          }\n          else if(found !== undefined) {\n            response = found;\n          }\n          if($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          }\n          else if(returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          }\n          else if(response !== undefined) {\n            returnedValue = response;\n          }\n          return found;\n        }\n      };\n      if(methodInvoked) {\n        if(instance === undefined) {\n          module.initialize();\n        }\n        module.invoke(query);\n      }\n      else {\n        if(instance !== undefined) {\n          instance.invoke('destroy');\n        }\n        module.initialize();\n      }\n\n    })\n  ;\n\n  return (returnedValue !== undefined)\n    ? returnedValue\n    : this\n  ;\n};\n\n$.fn.search.settings = {\n\n  name              : 'Search',\n  namespace         : 'search',\n\n  silent            : false,\n  debug             : false,\n  verbose           : false,\n  performance       : true,\n\n  // template to use (specified in settings.templates)\n  type              : 'standard',\n\n  // minimum characters required to search\n  minCharacters     : 1,\n\n  // whether to select first result after searching automatically\n  selectFirstResult : false,\n\n  // API config\n  apiSettings       : false,\n\n  // object to search\n  source            : false,\n\n  // Whether search should query current term on focus\n  searchOnFocus     : true,\n\n  // fields to search\n  searchFields   : [\n    'title',\n    'description'\n  ],\n\n  // field to display in standard results template\n  displayField   : '',\n\n  // search anywhere in value (set to 'exact' to require exact matches\n  fullTextSearch : 'exact',\n\n  // whether to add events to prompt automatically\n  automatic      : true,\n\n  // delay before hiding menu after blur\n  hideDelay      : 0,\n\n  // delay before searching\n  searchDelay    : 200,\n\n  // maximum results returned from search\n  maxResults     : 7,\n\n  // whether to store lookups in local cache\n  cache          : true,\n\n  // whether no results errors should be shown\n  showNoResults  : true,\n\n  // transition settings\n  transition     : 'scale',\n  duration       : 200,\n  easing         : 'easeOutExpo',\n\n  // callbacks\n  onSelect       : false,\n  onResultsAdd   : false,\n\n  onSearchQuery  : function(query){},\n  onResults      : function(response){},\n\n  onResultsOpen  : function(){},\n  onResultsClose : function(){},\n\n  className: {\n    animating : 'animating',\n    active    : 'active',\n    empty     : 'empty',\n    focus     : 'focus',\n    hidden    : 'hidden',\n    loading   : 'loading',\n    results   : 'results',\n    pressed   : 'down'\n  },\n\n  error : {\n    source          : 'Cannot search. No source used, and Semantic API module was not included',\n    noResults       : 'Your search returned no results',\n    logging         : 'Error in debug logging, exiting.',\n    noEndpoint      : 'No search endpoint was specified',\n    noTemplate      : 'A valid template name was not specified.',\n    oldSearchSyntax : 'searchFullText setting has been renamed fullTextSearch for consistency, please adjust your settings.',\n    serverError     : 'There was an issue querying the server.',\n    maxResults      : 'Results must be an array to use maxResults setting',\n    method          : 'The method you called is not defined.'\n  },\n\n  metadata: {\n    cache   : 'cache',\n    results : 'results',\n    result  : 'result'\n  },\n\n  regExp: {\n    escape     : /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\n    beginsWith : '(?:\\s|^)'\n  },\n\n  // maps api response attributes to internal representation\n  fields: {\n    categories      : 'results',     // array of categories (category view)\n    categoryName    : 'name',        // name of category (category view)\n    categoryResults : 'results',     // array of results (category view)\n    description     : 'description', // result description\n    image           : 'image',       // result image\n    price           : 'price',       // result price\n    results         : 'results',     // array of results (standard)\n    title           : 'title',       // result title\n    url             : 'url',         // result url\n    action          : 'action',      // \"view more\" object name\n    actionText      : 'text',        // \"view more\" text\n    actionURL       : 'url'          // \"view more\" url\n  },\n\n  selector : {\n    prompt       : '.prompt',\n    searchButton : '.search.button',\n    results      : '.results',\n    message      : '.results > .message',\n    category     : '.category',\n    result       : '.result',\n    title        : '.title, .name'\n  },\n\n  templates: {\n    escape: function(string) {\n      var\n        badChars     = /[&<>\"'`]/g,\n        shouldEscape = /[&<>\"'`]/,\n        escape       = {\n          \"&\": \"&amp;\",\n          \"<\": \"&lt;\",\n          \">\": \"&gt;\",\n          '\"': \"&quot;\",\n          \"'\": \"&#x27;\",\n          \"`\": \"&#x60;\"\n        },\n        escapedChar  = function(chr) {\n          return escape[chr];\n        }\n      ;\n      if(shouldEscape.test(string)) {\n        return string.replace(badChars, escapedChar);\n      }\n      return string;\n    },\n    message: function(message, type) {\n      var\n        html = ''\n      ;\n      if(message !== undefined && type !== undefined) {\n        html +=  ''\n          + '<div class=\"message ' + type + '\">'\n        ;\n        // message type\n        if(type == 'empty') {\n          html += ''\n            + '<div class=\"header\">No Results</div class=\"header\">'\n            + '<div class=\"description\">' + message + '</div class=\"description\">'\n          ;\n        }\n        else {\n          html += ' <div class=\"description\">' + message + '</div>';\n        }\n        html += '</div>';\n      }\n      return html;\n    },\n    category: function(response, fields) {\n      var\n        html = '',\n        escape = $.fn.search.settings.templates.escape\n      ;\n      if(response[fields.categoryResults] !== undefined) {\n\n        // each category\n        $.each(response[fields.categoryResults], function(index, category) {\n          if(category[fields.results] !== undefined && category.results.length > 0) {\n\n            html  += '<div class=\"category\">';\n\n            if(category[fields.categoryName] !== undefined) {\n              html += '<div class=\"name\">' + category[fields.categoryName] + '</div>';\n            }\n\n            // each item inside category\n            html += '<div class=\"results\">';\n            $.each(category.results, function(index, result) {\n              if(result[fields.url]) {\n                html  += '<a class=\"result\" href=\"' + result[fields.url] + '\">';\n              }\n              else {\n                html  += '<a class=\"result\">';\n              }\n              if(result[fields.image] !== undefined) {\n                html += ''\n                  + '<div class=\"image\">'\n                  + ' <img src=\"' + result[fields.image] + '\">'\n                  + '</div>'\n                ;\n              }\n              html += '<div class=\"content\">';\n              if(result[fields.price] !== undefined) {\n                html += '<div class=\"price\">' + result[fields.price] + '</div>';\n              }\n              if(result[fields.title] !== undefined) {\n                html += '<div class=\"title\">' + result[fields.title] + '</div>';\n              }\n              if(result[fields.description] !== undefined) {\n                html += '<div class=\"description\">' + result[fields.description] + '</div>';\n              }\n              html  += ''\n                + '</div>'\n              ;\n              html += '</a>';\n            });\n            html += '</div>';\n            html  += ''\n              + '</div>'\n            ;\n          }\n        });\n        if(response[fields.action]) {\n          html += ''\n          + '<a href=\"' + response[fields.action][fields.actionURL] + '\" class=\"action\">'\n          +   response[fields.action][fields.actionText]\n          + '</a>';\n        }\n        return html;\n      }\n      return false;\n    },\n    standard: function(response, fields) {\n      var\n        html = ''\n      ;\n      if(response[fields.results] !== undefined) {\n\n        // each result\n        $.each(response[fields.results], function(index, result) {\n          if(result[fields.url]) {\n            html  += '<a class=\"result\" href=\"' + result[fields.url] + '\">';\n          }\n          else {\n            html  += '<a class=\"result\">';\n          }\n          if(result[fields.image] !== undefined) {\n            html += ''\n              + '<div class=\"image\">'\n              + ' <img src=\"' + result[fields.image] + '\">'\n              + '</div>'\n            ;\n          }\n          html += '<div class=\"content\">';\n          if(result[fields.price] !== undefined) {\n            html += '<div class=\"price\">' + result[fields.price] + '</div>';\n          }\n          if(result[fields.title] !== undefined) {\n            html += '<div class=\"title\">' + result[fields.title] + '</div>';\n          }\n          if(result[fields.description] !== undefined) {\n            html += '<div class=\"description\">' + result[fields.description] + '</div>';\n          }\n          html  += ''\n            + '</div>'\n          ;\n          html += '</a>';\n        });\n\n        if(response[fields.action]) {\n          html += ''\n          + '<a href=\"' + response[fields.action][fields.actionURL] + '\" class=\"action\">'\n          +   response[fields.action][fields.actionText]\n          + '</a>';\n        }\n        return html;\n      }\n      return false;\n    }\n  }\n};\n\n})( jQuery, window, document );\n"]},"sourceType":"script","hash":"68e9206522230b396f21f32b92d6eec645036c52"}
