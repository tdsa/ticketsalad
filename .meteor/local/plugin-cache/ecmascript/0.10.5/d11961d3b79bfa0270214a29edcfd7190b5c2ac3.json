{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"Application/ticketsalad/client/semantic-ui/definitions/behaviors/form.js","filename":"Application/ticketsalad/client/semantic-ui/definitions/behaviors/form.js","sourceMapTarget":"Application/ticketsalad/client/semantic-ui/definitions/behaviors/form.js.map","sourceMaps":true,"passPerPreset":false,"envName":"development","cwd":"/Users/tristan/Documents/Uni/2018/Semester 1/COS 301/Group Project/TicketSalad/ticketsalad","parserOpts":{"sourceType":"module","sourceFileName":"Application/ticketsalad/client/semantic-ui/definitions/behaviors/form.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"Application/ticketsalad/client/semantic-ui/definitions/behaviors/form.js","comments":true,"compact":false,"sourceMaps":true,"sourceMapTarget":"Application/ticketsalad/client/semantic-ui/definitions/behaviors/form.js.map","sourceFileName":"Application/ticketsalad/client/semantic-ui/definitions/behaviors/form.js"}},"code":"/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.3.1\n*/\n\n/*!\n * # Semantic UI - Form Validation\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n;\n\n(function ($, window, document, undefined) {\n  'use strict';\n\n  window = typeof window != 'undefined' && window.Math == Math ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\n\n  $.fn.form = function (parameters) {\n    var $allModules = $(this),\n        moduleSelector = $allModules.selector || '',\n        time = new Date().getTime(),\n        performance = [],\n        query = arguments[0],\n        legacyParameters = arguments[1],\n        methodInvoked = typeof query == 'string',\n        queryArguments = [].slice.call(arguments, 1),\n        returnedValue;\n    $allModules.each(function () {\n      var $module = $(this),\n          element = this,\n          formErrors = [],\n          keyHeldDown = false,\n          // set at run-time\n      $field,\n          $group,\n          $message,\n          $prompt,\n          $submit,\n          $clear,\n          $reset,\n          settings,\n          validation,\n          metadata,\n          selector,\n          className,\n          regExp,\n          error,\n          namespace,\n          moduleNamespace,\n          eventNamespace,\n          instance,\n          module;\n      module = {\n        initialize: function () {\n          // settings grabbed at run time\n          module.get.settings();\n\n          if (methodInvoked) {\n            if (instance === undefined) {\n              module.instantiate();\n            }\n\n            module.invoke(query);\n          } else {\n            if (instance !== undefined) {\n              instance.invoke('destroy');\n            }\n\n            module.verbose('Initializing form validation', $module, settings);\n            module.bindEvents();\n            module.set.defaults();\n            module.instantiate();\n          }\n        },\n        instantiate: function () {\n          module.verbose('Storing instance of module', module);\n          instance = module;\n          $module.data(moduleNamespace, module);\n        },\n        destroy: function () {\n          module.verbose('Destroying previous module', instance);\n          module.removeEvents();\n          $module.removeData(moduleNamespace);\n        },\n        refresh: function () {\n          module.verbose('Refreshing selector cache');\n          $field = $module.find(selector.field);\n          $group = $module.find(selector.group);\n          $message = $module.find(selector.message);\n          $prompt = $module.find(selector.prompt);\n          $submit = $module.find(selector.submit);\n          $clear = $module.find(selector.clear);\n          $reset = $module.find(selector.reset);\n        },\n        submit: function () {\n          module.verbose('Submitting form', $module);\n          $module.submit();\n        },\n        attachEvents: function (selector, action) {\n          action = action || 'submit';\n          $(selector).on('click' + eventNamespace, function (event) {\n            module[action]();\n            event.preventDefault();\n          });\n        },\n        bindEvents: function () {\n          module.verbose('Attaching form events');\n          $module.on('submit' + eventNamespace, module.validate.form).on('blur' + eventNamespace, selector.field, module.event.field.blur).on('click' + eventNamespace, selector.submit, module.submit).on('click' + eventNamespace, selector.reset, module.reset).on('click' + eventNamespace, selector.clear, module.clear);\n\n          if (settings.keyboardShortcuts) {\n            $module.on('keydown' + eventNamespace, selector.field, module.event.field.keydown);\n          }\n\n          $field.each(function () {\n            var $input = $(this),\n                type = $input.prop('type'),\n                inputEvent = module.get.changeEvent(type, $input);\n            $(this).on(inputEvent + eventNamespace, module.event.field.change);\n          });\n        },\n        clear: function () {\n          $field.each(function () {\n            var $field = $(this),\n                $element = $field.parent(),\n                $fieldGroup = $field.closest($group),\n                $prompt = $fieldGroup.find(selector.prompt),\n                defaultValue = $field.data(metadata.defaultValue) || '',\n                isCheckbox = $element.is(selector.uiCheckbox),\n                isDropdown = $element.is(selector.uiDropdown),\n                isErrored = $fieldGroup.hasClass(className.error);\n\n            if (isErrored) {\n              module.verbose('Resetting error on field', $fieldGroup);\n              $fieldGroup.removeClass(className.error);\n              $prompt.remove();\n            }\n\n            if (isDropdown) {\n              module.verbose('Resetting dropdown value', $element, defaultValue);\n              $element.dropdown('clear');\n            } else if (isCheckbox) {\n              $field.prop('checked', false);\n            } else {\n              module.verbose('Resetting field value', $field, defaultValue);\n              $field.val('');\n            }\n          });\n        },\n        reset: function () {\n          $field.each(function () {\n            var $field = $(this),\n                $element = $field.parent(),\n                $fieldGroup = $field.closest($group),\n                $prompt = $fieldGroup.find(selector.prompt),\n                defaultValue = $field.data(metadata.defaultValue),\n                isCheckbox = $element.is(selector.uiCheckbox),\n                isDropdown = $element.is(selector.uiDropdown),\n                isErrored = $fieldGroup.hasClass(className.error);\n\n            if (defaultValue === undefined) {\n              return;\n            }\n\n            if (isErrored) {\n              module.verbose('Resetting error on field', $fieldGroup);\n              $fieldGroup.removeClass(className.error);\n              $prompt.remove();\n            }\n\n            if (isDropdown) {\n              module.verbose('Resetting dropdown value', $element, defaultValue);\n              $element.dropdown('restore defaults');\n            } else if (isCheckbox) {\n              module.verbose('Resetting checkbox value', $element, defaultValue);\n              $field.prop('checked', defaultValue);\n            } else {\n              module.verbose('Resetting field value', $field, defaultValue);\n              $field.val(defaultValue);\n            }\n          });\n        },\n        determine: {\n          isValid: function () {\n            var allValid = true;\n            $.each(validation, function (fieldName, field) {\n              if (!module.validate.field(field, fieldName, true)) {\n                allValid = false;\n              }\n            });\n            return allValid;\n          }\n        },\n        is: {\n          bracketedRule: function (rule) {\n            return rule.type && rule.type.match(settings.regExp.bracket);\n          },\n          shorthandFields: function (fields) {\n            var fieldKeys = Object.keys(fields),\n                firstRule = fields[fieldKeys[0]];\n            return module.is.shorthandRules(firstRule);\n          },\n          // duck type rule test\n          shorthandRules: function (rules) {\n            return typeof rules == 'string' || $.isArray(rules);\n          },\n          empty: function ($field) {\n            if (!$field || $field.length === 0) {\n              return true;\n            } else if ($field.is('input[type=\"checkbox\"]')) {\n              return !$field.is(':checked');\n            } else {\n              return module.is.blank($field);\n            }\n          },\n          blank: function ($field) {\n            return $.trim($field.val()) === '';\n          },\n          valid: function (field) {\n            var allValid = true;\n\n            if (field) {\n              module.verbose('Checking if field is valid', field);\n              return module.validate.field(validation[field], field, false);\n            } else {\n              module.verbose('Checking if form is valid');\n              $.each(validation, function (fieldName, field) {\n                if (!module.is.valid(fieldName)) {\n                  allValid = false;\n                }\n              });\n              return allValid;\n            }\n          }\n        },\n        removeEvents: function () {\n          $module.off(eventNamespace);\n          $field.off(eventNamespace);\n          $submit.off(eventNamespace);\n          $field.off(eventNamespace);\n        },\n        event: {\n          field: {\n            keydown: function (event) {\n              var $field = $(this),\n                  key = event.which,\n                  isInput = $field.is(selector.input),\n                  isCheckbox = $field.is(selector.checkbox),\n                  isInDropdown = $field.closest(selector.uiDropdown).length > 0,\n                  keyCode = {\n                enter: 13,\n                escape: 27\n              };\n\n              if (key == keyCode.escape) {\n                module.verbose('Escape key pressed blurring field');\n                $field.blur();\n              }\n\n              if (!event.ctrlKey && key == keyCode.enter && isInput && !isInDropdown && !isCheckbox) {\n                if (!keyHeldDown) {\n                  $field.one('keyup' + eventNamespace, module.event.field.keyup);\n                  module.submit();\n                  module.debug('Enter pressed on input submitting form');\n                }\n\n                keyHeldDown = true;\n              }\n            },\n            keyup: function () {\n              keyHeldDown = false;\n            },\n            blur: function (event) {\n              var $field = $(this),\n                  $fieldGroup = $field.closest($group),\n                  validationRules = module.get.validation($field);\n\n              if ($fieldGroup.hasClass(className.error)) {\n                module.debug('Revalidating field', $field, validationRules);\n\n                if (validationRules) {\n                  module.validate.field(validationRules);\n                }\n              } else if (settings.on == 'blur') {\n                if (validationRules) {\n                  module.validate.field(validationRules);\n                }\n              }\n            },\n            change: function (event) {\n              var $field = $(this),\n                  $fieldGroup = $field.closest($group),\n                  validationRules = module.get.validation($field);\n\n              if (validationRules && (settings.on == 'change' || $fieldGroup.hasClass(className.error) && settings.revalidate)) {\n                clearTimeout(module.timer);\n                module.timer = setTimeout(function () {\n                  module.debug('Revalidating field', $field, module.get.validation($field));\n                  module.validate.field(validationRules);\n                }, settings.delay);\n              }\n            }\n          }\n        },\n        get: {\n          ancillaryValue: function (rule) {\n            if (!rule.type || !rule.value && !module.is.bracketedRule(rule)) {\n              return false;\n            }\n\n            return rule.value !== undefined ? rule.value : rule.type.match(settings.regExp.bracket)[1] + '';\n          },\n          ruleName: function (rule) {\n            if (module.is.bracketedRule(rule)) {\n              return rule.type.replace(rule.type.match(settings.regExp.bracket)[0], '');\n            }\n\n            return rule.type;\n          },\n          changeEvent: function (type, $input) {\n            if (type == 'checkbox' || type == 'radio' || type == 'hidden' || $input.is('select')) {\n              return 'change';\n            } else {\n              return module.get.inputEvent();\n            }\n          },\n          inputEvent: function () {\n            return document.createElement('input').oninput !== undefined ? 'input' : document.createElement('input').onpropertychange !== undefined ? 'propertychange' : 'keyup';\n          },\n          fieldsFromShorthand: function (fields) {\n            var fullFields = {};\n            $.each(fields, function (name, rules) {\n              if (typeof rules == 'string') {\n                rules = [rules];\n              }\n\n              fullFields[name] = {\n                rules: []\n              };\n              $.each(rules, function (index, rule) {\n                fullFields[name].rules.push({\n                  type: rule\n                });\n              });\n            });\n            return fullFields;\n          },\n          prompt: function (rule, field) {\n            var ruleName = module.get.ruleName(rule),\n                ancillary = module.get.ancillaryValue(rule),\n                $field = module.get.field(field.identifier),\n                value = $field.val(),\n                prompt = $.isFunction(rule.prompt) ? rule.prompt(value) : rule.prompt || settings.prompt[ruleName] || settings.text.unspecifiedRule,\n                requiresValue = prompt.search('{value}') !== -1,\n                requiresName = prompt.search('{name}') !== -1,\n                $label,\n                name;\n\n            if (requiresValue) {\n              prompt = prompt.replace('{value}', $field.val());\n            }\n\n            if (requiresName) {\n              $label = $field.closest(selector.group).find('label').eq(0);\n              name = $label.length == 1 ? $label.text() : $field.prop('placeholder') || settings.text.unspecifiedField;\n              prompt = prompt.replace('{name}', name);\n            }\n\n            prompt = prompt.replace('{identifier}', field.identifier);\n            prompt = prompt.replace('{ruleValue}', ancillary);\n\n            if (!rule.prompt) {\n              module.verbose('Using default validation prompt for type', prompt, ruleName);\n            }\n\n            return prompt;\n          },\n          settings: function () {\n            if ($.isPlainObject(parameters)) {\n              var keys = Object.keys(parameters),\n                  isLegacySettings = keys.length > 0 ? parameters[keys[0]].identifier !== undefined && parameters[keys[0]].rules !== undefined : false,\n                  ruleKeys;\n\n              if (isLegacySettings) {\n                // 1.x (ducktyped)\n                settings = $.extend(true, {}, $.fn.form.settings, legacyParameters);\n                validation = $.extend({}, $.fn.form.settings.defaults, parameters);\n                module.error(settings.error.oldSyntax, element);\n                module.verbose('Extending settings from legacy parameters', validation, settings);\n              } else {\n                // 2.x\n                if (parameters.fields && module.is.shorthandFields(parameters.fields)) {\n                  parameters.fields = module.get.fieldsFromShorthand(parameters.fields);\n                }\n\n                settings = $.extend(true, {}, $.fn.form.settings, parameters);\n                validation = $.extend({}, $.fn.form.settings.defaults, settings.fields);\n                module.verbose('Extending settings', validation, settings);\n              }\n            } else {\n              settings = $.fn.form.settings;\n              validation = $.fn.form.settings.defaults;\n              module.verbose('Using default form validation', validation, settings);\n            } // shorthand\n\n\n            namespace = settings.namespace;\n            metadata = settings.metadata;\n            selector = settings.selector;\n            className = settings.className;\n            regExp = settings.regExp;\n            error = settings.error;\n            moduleNamespace = 'module-' + namespace;\n            eventNamespace = '.' + namespace; // grab instance\n\n            instance = $module.data(moduleNamespace); // refresh selector cache\n\n            module.refresh();\n          },\n          field: function (identifier) {\n            module.verbose('Finding field with identifier', identifier);\n            identifier = module.escape.string(identifier);\n\n            if ($field.filter('#' + identifier).length > 0) {\n              return $field.filter('#' + identifier);\n            } else if ($field.filter('[name=\"' + identifier + '\"]').length > 0) {\n              return $field.filter('[name=\"' + identifier + '\"]');\n            } else if ($field.filter('[name=\"' + identifier + '[]\"]').length > 0) {\n              return $field.filter('[name=\"' + identifier + '[]\"]');\n            } else if ($field.filter('[data-' + metadata.validate + '=\"' + identifier + '\"]').length > 0) {\n              return $field.filter('[data-' + metadata.validate + '=\"' + identifier + '\"]');\n            }\n\n            return $('<input/>');\n          },\n          fields: function (fields) {\n            var $fields = $();\n            $.each(fields, function (index, name) {\n              $fields = $fields.add(module.get.field(name));\n            });\n            return $fields;\n          },\n          validation: function ($field) {\n            var fieldValidation, identifier;\n\n            if (!validation) {\n              return false;\n            }\n\n            $.each(validation, function (fieldName, field) {\n              identifier = field.identifier || fieldName;\n\n              if (module.get.field(identifier)[0] == $field[0]) {\n                field.identifier = identifier;\n                fieldValidation = field;\n              }\n            });\n            return fieldValidation || false;\n          },\n          value: function (field) {\n            var fields = [],\n                results;\n            fields.push(field);\n            results = module.get.values.call(element, fields);\n            return results[field];\n          },\n          values: function (fields) {\n            var $fields = $.isArray(fields) ? module.get.fields(fields) : $field,\n                values = {};\n            $fields.each(function (index, field) {\n              var $field = $(field),\n                  type = $field.prop('type'),\n                  name = $field.prop('name'),\n                  value = $field.val(),\n                  isCheckbox = $field.is(selector.checkbox),\n                  isRadio = $field.is(selector.radio),\n                  isMultiple = name.indexOf('[]') !== -1,\n                  isChecked = isCheckbox ? $field.is(':checked') : false;\n\n              if (name) {\n                if (isMultiple) {\n                  name = name.replace('[]', '');\n\n                  if (!values[name]) {\n                    values[name] = [];\n                  }\n\n                  if (isCheckbox) {\n                    if (isChecked) {\n                      values[name].push(value || true);\n                    } else {\n                      values[name].push(false);\n                    }\n                  } else {\n                    values[name].push(value);\n                  }\n                } else {\n                  if (isRadio) {\n                    if (values[name] === undefined || values[name] == false) {\n                      values[name] = isChecked ? value || true : false;\n                    }\n                  } else if (isCheckbox) {\n                    if (isChecked) {\n                      values[name] = value || true;\n                    } else {\n                      values[name] = false;\n                    }\n                  } else {\n                    values[name] = value;\n                  }\n                }\n              }\n            });\n            return values;\n          }\n        },\n        has: {\n          field: function (identifier) {\n            module.verbose('Checking for existence of a field with identifier', identifier);\n            identifier = module.escape.string(identifier);\n\n            if (typeof identifier !== 'string') {\n              module.error(error.identifier, identifier);\n            }\n\n            if ($field.filter('#' + identifier).length > 0) {\n              return true;\n            } else if ($field.filter('[name=\"' + identifier + '\"]').length > 0) {\n              return true;\n            } else if ($field.filter('[data-' + metadata.validate + '=\"' + identifier + '\"]').length > 0) {\n              return true;\n            }\n\n            return false;\n          }\n        },\n        escape: {\n          string: function (text) {\n            text = String(text);\n            return text.replace(regExp.escape, '\\\\$&');\n          }\n        },\n        add: {\n          // alias\n          rule: function (name, rules) {\n            module.add.field(name, rules);\n          },\n          field: function (name, rules) {\n            var newValidation = {};\n\n            if (module.is.shorthandRules(rules)) {\n              rules = $.isArray(rules) ? rules : [rules];\n              newValidation[name] = {\n                rules: []\n              };\n              $.each(rules, function (index, rule) {\n                newValidation[name].rules.push({\n                  type: rule\n                });\n              });\n            } else {\n              newValidation[name] = rules;\n            }\n\n            validation = $.extend({}, validation, newValidation);\n            module.debug('Adding rules', newValidation, validation);\n          },\n          fields: function (fields) {\n            var newValidation;\n\n            if (fields && module.is.shorthandFields(fields)) {\n              newValidation = module.get.fieldsFromShorthand(fields);\n            } else {\n              newValidation = fields;\n            }\n\n            validation = $.extend({}, validation, newValidation);\n          },\n          prompt: function (identifier, errors) {\n            var $field = module.get.field(identifier),\n                $fieldGroup = $field.closest($group),\n                $prompt = $fieldGroup.children(selector.prompt),\n                promptExists = $prompt.length !== 0;\n            errors = typeof errors == 'string' ? [errors] : errors;\n            module.verbose('Adding field error state', identifier);\n            $fieldGroup.addClass(className.error);\n\n            if (settings.inline) {\n              if (!promptExists) {\n                $prompt = settings.templates.prompt(errors);\n                $prompt.appendTo($fieldGroup);\n              }\n\n              $prompt.html(errors[0]);\n\n              if (!promptExists) {\n                if (settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {\n                  module.verbose('Displaying error with css transition', settings.transition);\n                  $prompt.transition(settings.transition + ' in', settings.duration);\n                } else {\n                  module.verbose('Displaying error with fallback javascript animation');\n                  $prompt.fadeIn(settings.duration);\n                }\n              } else {\n                module.verbose('Inline errors are disabled, no inline error added', identifier);\n              }\n            }\n          },\n          errors: function (errors) {\n            module.debug('Adding form error messages', errors);\n            module.set.error();\n            $message.html(settings.templates.error(errors));\n          }\n        },\n        remove: {\n          rule: function (field, rule) {\n            var rules = $.isArray(rule) ? rule : [rule];\n\n            if (rule == undefined) {\n              module.debug('Removed all rules');\n              validation[field].rules = [];\n              return;\n            }\n\n            if (validation[field] == undefined || !$.isArray(validation[field].rules)) {\n              return;\n            }\n\n            $.each(validation[field].rules, function (index, rule) {\n              if (rules.indexOf(rule.type) !== -1) {\n                module.debug('Removed rule', rule.type);\n                validation[field].rules.splice(index, 1);\n              }\n            });\n          },\n          field: function (field) {\n            var fields = $.isArray(field) ? field : [field];\n            $.each(fields, function (index, field) {\n              module.remove.rule(field);\n            });\n          },\n          // alias\n          rules: function (field, rules) {\n            if ($.isArray(field)) {\n              $.each(fields, function (index, field) {\n                module.remove.rule(field, rules);\n              });\n            } else {\n              module.remove.rule(field, rules);\n            }\n          },\n          fields: function (fields) {\n            module.remove.field(fields);\n          },\n          prompt: function (identifier) {\n            var $field = module.get.field(identifier),\n                $fieldGroup = $field.closest($group),\n                $prompt = $fieldGroup.children(selector.prompt);\n            $fieldGroup.removeClass(className.error);\n\n            if (settings.inline && $prompt.is(':visible')) {\n              module.verbose('Removing prompt for field', identifier);\n\n              if (settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {\n                $prompt.transition(settings.transition + ' out', settings.duration, function () {\n                  $prompt.remove();\n                });\n              } else {\n                $prompt.fadeOut(settings.duration, function () {\n                  $prompt.remove();\n                });\n              }\n            }\n          }\n        },\n        set: {\n          success: function () {\n            $module.removeClass(className.error).addClass(className.success);\n          },\n          defaults: function () {\n            $field.each(function () {\n              var $field = $(this),\n                  isCheckbox = $field.filter(selector.checkbox).length > 0,\n                  value = isCheckbox ? $field.is(':checked') : $field.val();\n              $field.data(metadata.defaultValue, value);\n            });\n          },\n          error: function () {\n            $module.removeClass(className.success).addClass(className.error);\n          },\n          value: function (field, value) {\n            var fields = {};\n            fields[field] = value;\n            return module.set.values.call(element, fields);\n          },\n          values: function (fields) {\n            if ($.isEmptyObject(fields)) {\n              return;\n            }\n\n            $.each(fields, function (key, value) {\n              var $field = module.get.field(key),\n                  $element = $field.parent(),\n                  isMultiple = $.isArray(value),\n                  isCheckbox = $element.is(selector.uiCheckbox),\n                  isDropdown = $element.is(selector.uiDropdown),\n                  isRadio = $field.is(selector.radio) && isCheckbox,\n                  fieldExists = $field.length > 0,\n                  $multipleField;\n\n              if (fieldExists) {\n                if (isMultiple && isCheckbox) {\n                  module.verbose('Selecting multiple', value, $field);\n                  $element.checkbox('uncheck');\n                  $.each(value, function (index, value) {\n                    $multipleField = $field.filter('[value=\"' + value + '\"]');\n                    $element = $multipleField.parent();\n\n                    if ($multipleField.length > 0) {\n                      $element.checkbox('check');\n                    }\n                  });\n                } else if (isRadio) {\n                  module.verbose('Selecting radio value', value, $field);\n                  $field.filter('[value=\"' + value + '\"]').parent(selector.uiCheckbox).checkbox('check');\n                } else if (isCheckbox) {\n                  module.verbose('Setting checkbox value', value, $element);\n\n                  if (value === true) {\n                    $element.checkbox('check');\n                  } else {\n                    $element.checkbox('uncheck');\n                  }\n                } else if (isDropdown) {\n                  module.verbose('Setting dropdown value', value, $element);\n                  $element.dropdown('set selected', value);\n                } else {\n                  module.verbose('Setting field value', value, $field);\n                  $field.val(value);\n                }\n              }\n            });\n          }\n        },\n        validate: {\n          form: function (event, ignoreCallbacks) {\n            var values = module.get.values(),\n                apiRequest; // input keydown event will fire submit repeatedly by browser default\n\n            if (keyHeldDown) {\n              return false;\n            } // reset errors\n\n\n            formErrors = [];\n\n            if (module.determine.isValid()) {\n              module.debug('Form has no validation errors, submitting');\n              module.set.success();\n\n              if (ignoreCallbacks !== true) {\n                return settings.onSuccess.call(element, event, values);\n              }\n            } else {\n              module.debug('Form has errors');\n              module.set.error();\n\n              if (!settings.inline) {\n                module.add.errors(formErrors);\n              } // prevent ajax submit\n\n\n              if ($module.data('moduleApi') !== undefined) {\n                event.stopImmediatePropagation();\n              }\n\n              if (ignoreCallbacks !== true) {\n                return settings.onFailure.call(element, formErrors, values);\n              }\n            }\n          },\n          // takes a validation object and returns whether field passes validation\n          field: function (field, fieldName, showErrors) {\n            showErrors = showErrors !== undefined ? showErrors : true;\n\n            if (typeof field == 'string') {\n              module.verbose('Validating field', field);\n              fieldName = field;\n              field = validation[field];\n            }\n\n            var identifier = field.identifier || fieldName,\n                $field = module.get.field(identifier),\n                $dependsField = field.depends ? module.get.field(field.depends) : false,\n                fieldValid = true,\n                fieldErrors = [];\n\n            if (!field.identifier) {\n              module.debug('Using field name as identifier', identifier);\n              field.identifier = identifier;\n            }\n\n            if ($field.prop('disabled')) {\n              module.debug('Field is disabled. Skipping', identifier);\n              fieldValid = true;\n            } else if (field.optional && module.is.blank($field)) {\n              module.debug('Field is optional and blank. Skipping', identifier);\n              fieldValid = true;\n            } else if (field.depends && module.is.empty($dependsField)) {\n              module.debug('Field depends on another value that is not present or empty. Skipping', $dependsField);\n              fieldValid = true;\n            } else if (field.rules !== undefined) {\n              $.each(field.rules, function (index, rule) {\n                if (module.has.field(identifier) && !module.validate.rule(field, rule)) {\n                  module.debug('Field is invalid', identifier, rule.type);\n                  fieldErrors.push(module.get.prompt(rule, field));\n                  fieldValid = false;\n                }\n              });\n            }\n\n            if (fieldValid) {\n              if (showErrors) {\n                module.remove.prompt(identifier, fieldErrors);\n                settings.onValid.call($field);\n              }\n            } else {\n              if (showErrors) {\n                formErrors = formErrors.concat(fieldErrors);\n                module.add.prompt(identifier, fieldErrors);\n                settings.onInvalid.call($field, fieldErrors);\n              }\n\n              return false;\n            }\n\n            return true;\n          },\n          // takes validation rule and returns whether field passes rule\n          rule: function (field, rule) {\n            var $field = module.get.field(field.identifier),\n                type = rule.type,\n                value = $field.val(),\n                isValid = true,\n                ancillary = module.get.ancillaryValue(rule),\n                ruleName = module.get.ruleName(rule),\n                ruleFunction = settings.rules[ruleName];\n\n            if (!$.isFunction(ruleFunction)) {\n              module.error(error.noRule, ruleName);\n              return;\n            } // cast to string avoiding encoding special values\n\n\n            value = value === undefined || value === '' || value === null ? '' : $.trim(value + '');\n            return ruleFunction.call($field, value, ancillary);\n          }\n        },\n        setting: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, settings, name);\n          } else if (value !== undefined) {\n            settings[name] = value;\n          } else {\n            return settings[name];\n          }\n        },\n        internal: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, module, name);\n          } else if (value !== undefined) {\n            module[name] = value;\n          } else {\n            return module[name];\n          }\n        },\n        debug: function () {\n          if (!settings.silent && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function () {\n          if (!settings.silent && settings.verbose && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function () {\n          if (!settings.silent) {\n            module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n            module.error.apply(console, arguments);\n          }\n        },\n        performance: {\n          log: function (message) {\n            var currentTime, executionTime, previousTime;\n\n            if (settings.performance) {\n              currentTime = new Date().getTime();\n              previousTime = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time = currentTime;\n              performance.push({\n                'Name': message[0],\n                'Arguments': [].slice.call(message, 1) || '',\n                'Element': element,\n                'Execution Time': executionTime\n              });\n            }\n\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function () {\n            var title = settings.name + ':',\n                totalTime = 0;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function (index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n\n            if (moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n\n            if ($allModules.length > 1) {\n              title += ' ' + '(' + $allModules.length + ')';\n            }\n\n            if ((console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n\n              if (console.table) {\n                console.table(performance);\n              } else {\n                $.each(performance, function (index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time'] + 'ms');\n                });\n              }\n\n              console.groupEnd();\n            }\n\n            performance = [];\n          }\n        },\n        invoke: function (query, passedArguments, context) {\n          var object = instance,\n              maxDepth,\n              found,\n              response;\n          passedArguments = passedArguments || queryArguments;\n          context = element || context;\n\n          if (typeof query == 'string' && object !== undefined) {\n            query = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function (depth, value) {\n              var camelCaseValue = depth != maxDepth ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1) : query;\n\n              if ($.isPlainObject(object[camelCaseValue]) && depth != maxDepth) {\n                object = object[camelCaseValue];\n              } else if (object[camelCaseValue] !== undefined) {\n                found = object[camelCaseValue];\n                return false;\n              } else if ($.isPlainObject(object[value]) && depth != maxDepth) {\n                object = object[value];\n              } else if (object[value] !== undefined) {\n                found = object[value];\n                return false;\n              } else {\n                return false;\n              }\n            });\n          }\n\n          if ($.isFunction(found)) {\n            response = found.apply(context, passedArguments);\n          } else if (found !== undefined) {\n            response = found;\n          }\n\n          if ($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          } else if (returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          } else if (response !== undefined) {\n            returnedValue = response;\n          }\n\n          return found;\n        }\n      };\n      module.initialize();\n    });\n    return returnedValue !== undefined ? returnedValue : this;\n  };\n\n  $.fn.form.settings = {\n    name: 'Form',\n    namespace: 'form',\n    debug: false,\n    verbose: false,\n    performance: true,\n    fields: false,\n    keyboardShortcuts: true,\n    on: 'submit',\n    inline: false,\n    delay: 200,\n    revalidate: true,\n    transition: 'scale',\n    duration: 200,\n    onValid: function () {},\n    onInvalid: function () {},\n    onSuccess: function () {\n      return true;\n    },\n    onFailure: function () {\n      return false;\n    },\n    metadata: {\n      defaultValue: 'default',\n      validate: 'validate'\n    },\n    regExp: {\n      htmlID: /^[a-zA-Z][\\w:.-]*$/g,\n      bracket: /\\[(.*)\\]/i,\n      decimal: /^\\d+\\.?\\d*$/,\n      email: /^[a-z0-9!#$%&'*+\\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,\n      escape: /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\n      flags: /^\\/(.*)\\/(.*)?/,\n      integer: /^\\-?\\d+$/,\n      number: /^\\-?\\d*(\\.\\d+)?$/,\n      url: /(https?:\\/\\/(?:www\\.|(?!www))[^\\s\\.]+\\.[^\\s]{2,}|www\\.[^\\s]+\\.[^\\s]{2,})/i\n    },\n    text: {\n      unspecifiedRule: 'Please enter a valid value',\n      unspecifiedField: 'This field'\n    },\n    prompt: {\n      empty: '{name} must have a value',\n      checked: '{name} must be checked',\n      email: '{name} must be a valid e-mail',\n      url: '{name} must be a valid url',\n      regExp: '{name} is not formatted correctly',\n      integer: '{name} must be an integer',\n      decimal: '{name} must be a decimal number',\n      number: '{name} must be set to a number',\n      is: '{name} must be \"{ruleValue}\"',\n      isExactly: '{name} must be exactly \"{ruleValue}\"',\n      not: '{name} cannot be set to \"{ruleValue}\"',\n      notExactly: '{name} cannot be set to exactly \"{ruleValue}\"',\n      contain: '{name} must contain \"{ruleValue}\"',\n      containExactly: '{name} must contain exactly \"{ruleValue}\"',\n      doesntContain: '{name} cannot contain  \"{ruleValue}\"',\n      doesntContainExactly: '{name} cannot contain exactly \"{ruleValue}\"',\n      minLength: '{name} must be at least {ruleValue} characters',\n      length: '{name} must be at least {ruleValue} characters',\n      exactLength: '{name} must be exactly {ruleValue} characters',\n      maxLength: '{name} cannot be longer than {ruleValue} characters',\n      match: '{name} must match {ruleValue} field',\n      different: '{name} must have a different value than {ruleValue} field',\n      creditCard: '{name} must be a valid credit card number',\n      minCount: '{name} must have at least {ruleValue} choices',\n      exactCount: '{name} must have exactly {ruleValue} choices',\n      maxCount: '{name} must have {ruleValue} or less choices'\n    },\n    selector: {\n      checkbox: 'input[type=\"checkbox\"], input[type=\"radio\"]',\n      clear: '.clear',\n      field: 'input, textarea, select',\n      group: '.field',\n      input: 'input',\n      message: '.error.message',\n      prompt: '.prompt.label',\n      radio: 'input[type=\"radio\"]',\n      reset: '.reset:not([type=\"reset\"])',\n      submit: '.submit:not([type=\"submit\"])',\n      uiCheckbox: '.ui.checkbox',\n      uiDropdown: '.ui.dropdown'\n    },\n    className: {\n      error: 'error',\n      label: 'ui prompt label',\n      pressed: 'down',\n      success: 'success'\n    },\n    error: {\n      identifier: 'You must specify a string identifier for each field',\n      method: 'The method you called is not defined.',\n      noRule: 'There is no rule matching the one you specified',\n      oldSyntax: 'Starting in 2.0 forms now only take a single settings object. Validation settings converted to new syntax automatically.'\n    },\n    templates: {\n      // template that produces error message\n      error: function (errors) {\n        var html = '<ul class=\"list\">';\n        $.each(errors, function (index, value) {\n          html += '<li>' + value + '</li>';\n        });\n        html += '</ul>';\n        return $(html);\n      },\n      // template that produces label\n      prompt: function (errors) {\n        return $('<div/>').addClass('ui basic red pointing prompt label').html(errors[0]);\n      }\n    },\n    rules: {\n      // is not empty or blank string\n      empty: function (value) {\n        return !(value === undefined || '' === value || $.isArray(value) && value.length === 0);\n      },\n      // checkbox checked\n      checked: function () {\n        return $(this).filter(':checked').length > 0;\n      },\n      // is most likely an email\n      email: function (value) {\n        return $.fn.form.settings.regExp.email.test(value);\n      },\n      // value is most likely url\n      url: function (value) {\n        return $.fn.form.settings.regExp.url.test(value);\n      },\n      // matches specified regExp\n      regExp: function (value, regExp) {\n        if (regExp instanceof RegExp) {\n          return value.match(regExp);\n        }\n\n        var regExpParts = regExp.match($.fn.form.settings.regExp.flags),\n            flags; // regular expression specified as /baz/gi (flags)\n\n        if (regExpParts) {\n          regExp = regExpParts.length >= 2 ? regExpParts[1] : regExp;\n          flags = regExpParts.length >= 3 ? regExpParts[2] : '';\n        }\n\n        return value.match(new RegExp(regExp, flags));\n      },\n      // is valid integer or matches range\n      integer: function (value, range) {\n        var intRegExp = $.fn.form.settings.regExp.integer,\n            min,\n            max,\n            parts;\n\n        if (!range || ['', '..'].indexOf(range) !== -1) {// do nothing\n        } else if (range.indexOf('..') == -1) {\n          if (intRegExp.test(range)) {\n            min = max = range - 0;\n          }\n        } else {\n          parts = range.split('..', 2);\n\n          if (intRegExp.test(parts[0])) {\n            min = parts[0] - 0;\n          }\n\n          if (intRegExp.test(parts[1])) {\n            max = parts[1] - 0;\n          }\n        }\n\n        return intRegExp.test(value) && (min === undefined || value >= min) && (max === undefined || value <= max);\n      },\n      // is valid number (with decimal)\n      decimal: function (value) {\n        return $.fn.form.settings.regExp.decimal.test(value);\n      },\n      // is valid number\n      number: function (value) {\n        return $.fn.form.settings.regExp.number.test(value);\n      },\n      // is value (case insensitive)\n      is: function (value, text) {\n        text = typeof text == 'string' ? text.toLowerCase() : text;\n        value = typeof value == 'string' ? value.toLowerCase() : value;\n        return value == text;\n      },\n      // is value\n      isExactly: function (value, text) {\n        return value == text;\n      },\n      // value is not another value (case insensitive)\n      not: function (value, notValue) {\n        value = typeof value == 'string' ? value.toLowerCase() : value;\n        notValue = typeof notValue == 'string' ? notValue.toLowerCase() : notValue;\n        return value != notValue;\n      },\n      // value is not another value (case sensitive)\n      notExactly: function (value, notValue) {\n        return value != notValue;\n      },\n      // value contains text (insensitive)\n      contains: function (value, text) {\n        // escape regex characters\n        text = text.replace($.fn.form.settings.regExp.escape, \"\\\\$&\");\n        return value.search(new RegExp(text, 'i')) !== -1;\n      },\n      // value contains text (case sensitive)\n      containsExactly: function (value, text) {\n        // escape regex characters\n        text = text.replace($.fn.form.settings.regExp.escape, \"\\\\$&\");\n        return value.search(new RegExp(text)) !== -1;\n      },\n      // value contains text (insensitive)\n      doesntContain: function (value, text) {\n        // escape regex characters\n        text = text.replace($.fn.form.settings.regExp.escape, \"\\\\$&\");\n        return value.search(new RegExp(text, 'i')) === -1;\n      },\n      // value contains text (case sensitive)\n      doesntContainExactly: function (value, text) {\n        // escape regex characters\n        text = text.replace($.fn.form.settings.regExp.escape, \"\\\\$&\");\n        return value.search(new RegExp(text)) === -1;\n      },\n      // is at least string length\n      minLength: function (value, requiredLength) {\n        return value !== undefined ? value.length >= requiredLength : false;\n      },\n      // see rls notes for 2.0.6 (this is a duplicate of minLength)\n      length: function (value, requiredLength) {\n        return value !== undefined ? value.length >= requiredLength : false;\n      },\n      // is exactly length\n      exactLength: function (value, requiredLength) {\n        return value !== undefined ? value.length == requiredLength : false;\n      },\n      // is less than length\n      maxLength: function (value, maxLength) {\n        return value !== undefined ? value.length <= maxLength : false;\n      },\n      // matches another field\n      match: function (value, identifier) {\n        var $form = $(this),\n            matchingValue;\n\n        if ($('[data-validate=\"' + identifier + '\"]').length > 0) {\n          matchingValue = $('[data-validate=\"' + identifier + '\"]').val();\n        } else if ($('#' + identifier).length > 0) {\n          matchingValue = $('#' + identifier).val();\n        } else if ($('[name=\"' + identifier + '\"]').length > 0) {\n          matchingValue = $('[name=\"' + identifier + '\"]').val();\n        } else if ($('[name=\"' + identifier + '[]\"]').length > 0) {\n          matchingValue = $('[name=\"' + identifier + '[]\"]');\n        }\n\n        return matchingValue !== undefined ? value.toString() == matchingValue.toString() : false;\n      },\n      // different than another field\n      different: function (value, identifier) {\n        // use either id or name of field\n        var $form = $(this),\n            matchingValue;\n\n        if ($('[data-validate=\"' + identifier + '\"]').length > 0) {\n          matchingValue = $('[data-validate=\"' + identifier + '\"]').val();\n        } else if ($('#' + identifier).length > 0) {\n          matchingValue = $('#' + identifier).val();\n        } else if ($('[name=\"' + identifier + '\"]').length > 0) {\n          matchingValue = $('[name=\"' + identifier + '\"]').val();\n        } else if ($('[name=\"' + identifier + '[]\"]').length > 0) {\n          matchingValue = $('[name=\"' + identifier + '[]\"]');\n        }\n\n        return matchingValue !== undefined ? value.toString() !== matchingValue.toString() : false;\n      },\n      creditCard: function (cardNumber, cardTypes) {\n        var cards = {\n          visa: {\n            pattern: /^4/,\n            length: [16]\n          },\n          amex: {\n            pattern: /^3[47]/,\n            length: [15]\n          },\n          mastercard: {\n            pattern: /^5[1-5]/,\n            length: [16]\n          },\n          discover: {\n            pattern: /^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,\n            length: [16]\n          },\n          unionPay: {\n            pattern: /^(62|88)/,\n            length: [16, 17, 18, 19]\n          },\n          jcb: {\n            pattern: /^35(2[89]|[3-8][0-9])/,\n            length: [16]\n          },\n          maestro: {\n            pattern: /^(5018|5020|5038|6304|6759|676[1-3])/,\n            length: [12, 13, 14, 15, 16, 17, 18, 19]\n          },\n          dinersClub: {\n            pattern: /^(30[0-5]|^36)/,\n            length: [14]\n          },\n          laser: {\n            pattern: /^(6304|670[69]|6771)/,\n            length: [16, 17, 18, 19]\n          },\n          visaElectron: {\n            pattern: /^(4026|417500|4508|4844|491(3|7))/,\n            length: [16]\n          }\n        },\n            valid = {},\n            validCard = false,\n            requiredTypes = typeof cardTypes == 'string' ? cardTypes.split(',') : false,\n            unionPay,\n            validation;\n\n        if (typeof cardNumber !== 'string' || cardNumber.length === 0) {\n          return;\n        } // allow dashes in card\n\n\n        cardNumber = cardNumber.replace(/[\\-]/g, ''); // verify card types\n\n        if (requiredTypes) {\n          $.each(requiredTypes, function (index, type) {\n            // verify each card type\n            validation = cards[type];\n\n            if (validation) {\n              valid = {\n                length: $.inArray(cardNumber.length, validation.length) !== -1,\n                pattern: cardNumber.search(validation.pattern) !== -1\n              };\n\n              if (valid.length && valid.pattern) {\n                validCard = true;\n              }\n            }\n          });\n\n          if (!validCard) {\n            return false;\n          }\n        } // skip luhn for UnionPay\n\n\n        unionPay = {\n          number: $.inArray(cardNumber.length, cards.unionPay.length) !== -1,\n          pattern: cardNumber.search(cards.unionPay.pattern) !== -1\n        };\n\n        if (unionPay.number && unionPay.pattern) {\n          return true;\n        } // verify luhn, adapted from  <https://gist.github.com/2134376>\n\n\n        var length = cardNumber.length,\n            multiple = 0,\n            producedValue = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [0, 2, 4, 6, 8, 1, 3, 5, 7, 9]],\n            sum = 0;\n\n        while (length--) {\n          sum += producedValue[multiple][parseInt(cardNumber.charAt(length), 10)];\n          multiple ^= 1;\n        }\n\n        return sum % 10 === 0 && sum > 0;\n      },\n      minCount: function (value, minCount) {\n        if (minCount == 0) {\n          return true;\n        }\n\n        if (minCount == 1) {\n          return value !== '';\n        }\n\n        return value.split(',').length >= minCount;\n      },\n      exactCount: function (value, exactCount) {\n        if (exactCount == 0) {\n          return value === '';\n        }\n\n        if (exactCount == 1) {\n          return value !== '' && value.search(',') === -1;\n        }\n\n        return value.split(',').length == exactCount;\n      },\n      maxCount: function (value, maxCount) {\n        if (maxCount == 0) {\n          return false;\n        }\n\n        if (maxCount == 1) {\n          return value.search(',') === -1;\n        }\n\n        return value.split(',').length <= maxCount;\n      }\n    }\n  };\n})(jQuery, window, document);","map":{"version":3,"sources":["Application/ticketsalad/client/semantic-ui/definitions/behaviors/form.js"],"names":["$","window","document","undefined","Math","self","Function","fn","form","parameters","$allModules","moduleSelector","selector","time","Date","getTime","performance","query","arguments","legacyParameters","methodInvoked","queryArguments","slice","call","returnedValue","each","$module","element","formErrors","keyHeldDown","$field","$group","$message","$prompt","$submit","$clear","$reset","settings","validation","metadata","className","regExp","error","namespace","moduleNamespace","eventNamespace","instance","module","initialize","get","instantiate","invoke","verbose","bindEvents","set","defaults","data","destroy","removeEvents","removeData","refresh","find","field","group","message","prompt","submit","clear","reset","attachEvents","action","on","event","preventDefault","validate","blur","keyboardShortcuts","keydown","$input","type","prop","inputEvent","changeEvent","change","$element","parent","$fieldGroup","closest","defaultValue","isCheckbox","is","uiCheckbox","isDropdown","uiDropdown","isErrored","hasClass","removeClass","remove","dropdown","val","determine","isValid","allValid","fieldName","bracketedRule","rule","match","bracket","shorthandFields","fields","fieldKeys","Object","keys","firstRule","shorthandRules","rules","isArray","empty","length","blank","trim","valid","off","key","which","isInput","input","checkbox","isInDropdown","keyCode","enter","escape","ctrlKey","one","keyup","debug","validationRules","revalidate","clearTimeout","timer","setTimeout","delay","ancillaryValue","value","ruleName","replace","createElement","oninput","onpropertychange","fieldsFromShorthand","fullFields","name","index","push","ancillary","identifier","isFunction","text","unspecifiedRule","requiresValue","search","requiresName","$label","eq","unspecifiedField","isPlainObject","isLegacySettings","ruleKeys","extend","oldSyntax","string","filter","$fields","add","fieldValidation","results","values","isRadio","radio","isMultiple","indexOf","isChecked","has","String","newValidation","errors","children","promptExists","addClass","inline","templates","appendTo","html","transition","duration","fadeIn","splice","fadeOut","success","isEmptyObject","fieldExists","$multipleField","ignoreCallbacks","apiRequest","onSuccess","stopImmediatePropagation","onFailure","showErrors","$dependsField","depends","fieldValid","fieldErrors","optional","onValid","concat","onInvalid","ruleFunction","noRule","setting","internal","silent","log","prototype","bind","console","info","apply","currentTime","executionTime","previousTime","display","title","totalTime","table","groupCollapsed","groupEnd","passedArguments","context","object","maxDepth","found","response","split","depth","camelCaseValue","charAt","toUpperCase","htmlID","decimal","email","flags","integer","number","url","checked","isExactly","not","notExactly","contain","containExactly","doesntContain","doesntContainExactly","minLength","exactLength","maxLength","different","creditCard","minCount","exactCount","maxCount","label","pressed","method","test","RegExp","regExpParts","range","intRegExp","min","max","parts","toLowerCase","notValue","contains","containsExactly","requiredLength","$form","matchingValue","toString","cardNumber","cardTypes","cards","visa","pattern","amex","mastercard","discover","unionPay","jcb","maestro","dinersClub","laser","visaElectron","validCard","requiredTypes","inArray","multiple","producedValue","sum","parseInt","jQuery"],"mappings":"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","file":"Application/ticketsalad/client/semantic-ui/definitions/behaviors/form.js.map","sourcesContent":["/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.3.1\n*/\n/*!\n * # Semantic UI - Form Validation\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n\n;(function ($, window, document, undefined) {\n\n'use strict';\n\nwindow = (typeof window != 'undefined' && window.Math == Math)\n  ? window\n  : (typeof self != 'undefined' && self.Math == Math)\n    ? self\n    : Function('return this')()\n;\n\n$.fn.form = function(parameters) {\n  var\n    $allModules      = $(this),\n    moduleSelector   = $allModules.selector || '',\n\n    time             = new Date().getTime(),\n    performance      = [],\n\n    query            = arguments[0],\n    legacyParameters = arguments[1],\n    methodInvoked    = (typeof query == 'string'),\n    queryArguments   = [].slice.call(arguments, 1),\n    returnedValue\n  ;\n  $allModules\n    .each(function() {\n      var\n        $module     = $(this),\n        element     = this,\n\n        formErrors  = [],\n        keyHeldDown = false,\n\n        // set at run-time\n        $field,\n        $group,\n        $message,\n        $prompt,\n        $submit,\n        $clear,\n        $reset,\n\n        settings,\n        validation,\n\n        metadata,\n        selector,\n        className,\n        regExp,\n        error,\n\n        namespace,\n        moduleNamespace,\n        eventNamespace,\n\n        instance,\n        module\n      ;\n\n      module      = {\n\n        initialize: function() {\n\n          // settings grabbed at run time\n          module.get.settings();\n          if(methodInvoked) {\n            if(instance === undefined) {\n              module.instantiate();\n            }\n            module.invoke(query);\n          }\n          else {\n            if(instance !== undefined) {\n              instance.invoke('destroy');\n            }\n            module.verbose('Initializing form validation', $module, settings);\n            module.bindEvents();\n            module.set.defaults();\n            module.instantiate();\n          }\n        },\n\n        instantiate: function() {\n          module.verbose('Storing instance of module', module);\n          instance = module;\n          $module\n            .data(moduleNamespace, module)\n          ;\n        },\n\n        destroy: function() {\n          module.verbose('Destroying previous module', instance);\n          module.removeEvents();\n          $module\n            .removeData(moduleNamespace)\n          ;\n        },\n\n        refresh: function() {\n          module.verbose('Refreshing selector cache');\n          $field      = $module.find(selector.field);\n          $group      = $module.find(selector.group);\n          $message    = $module.find(selector.message);\n          $prompt     = $module.find(selector.prompt);\n\n          $submit     = $module.find(selector.submit);\n          $clear      = $module.find(selector.clear);\n          $reset      = $module.find(selector.reset);\n        },\n\n        submit: function() {\n          module.verbose('Submitting form', $module);\n          $module\n            .submit()\n          ;\n        },\n\n        attachEvents: function(selector, action) {\n          action = action || 'submit';\n          $(selector)\n            .on('click' + eventNamespace, function(event) {\n              module[action]();\n              event.preventDefault();\n            })\n          ;\n        },\n\n        bindEvents: function() {\n          module.verbose('Attaching form events');\n          $module\n            .on('submit' + eventNamespace, module.validate.form)\n            .on('blur'   + eventNamespace, selector.field, module.event.field.blur)\n            .on('click'  + eventNamespace, selector.submit, module.submit)\n            .on('click'  + eventNamespace, selector.reset, module.reset)\n            .on('click'  + eventNamespace, selector.clear, module.clear)\n          ;\n          if(settings.keyboardShortcuts) {\n            $module\n              .on('keydown' + eventNamespace, selector.field, module.event.field.keydown)\n            ;\n          }\n          $field\n            .each(function() {\n              var\n                $input     = $(this),\n                type       = $input.prop('type'),\n                inputEvent = module.get.changeEvent(type, $input)\n              ;\n              $(this)\n                .on(inputEvent + eventNamespace, module.event.field.change)\n              ;\n            })\n          ;\n        },\n\n        clear: function() {\n          $field\n            .each(function () {\n              var\n                $field       = $(this),\n                $element     = $field.parent(),\n                $fieldGroup  = $field.closest($group),\n                $prompt      = $fieldGroup.find(selector.prompt),\n                defaultValue = $field.data(metadata.defaultValue) || '',\n                isCheckbox   = $element.is(selector.uiCheckbox),\n                isDropdown   = $element.is(selector.uiDropdown),\n                isErrored    = $fieldGroup.hasClass(className.error)\n              ;\n              if(isErrored) {\n                module.verbose('Resetting error on field', $fieldGroup);\n                $fieldGroup.removeClass(className.error);\n                $prompt.remove();\n              }\n              if(isDropdown) {\n                module.verbose('Resetting dropdown value', $element, defaultValue);\n                $element.dropdown('clear');\n              }\n              else if(isCheckbox) {\n                $field.prop('checked', false);\n              }\n              else {\n                module.verbose('Resetting field value', $field, defaultValue);\n                $field.val('');\n              }\n            })\n          ;\n        },\n\n        reset: function() {\n          $field\n            .each(function () {\n              var\n                $field       = $(this),\n                $element     = $field.parent(),\n                $fieldGroup  = $field.closest($group),\n                $prompt      = $fieldGroup.find(selector.prompt),\n                defaultValue = $field.data(metadata.defaultValue),\n                isCheckbox   = $element.is(selector.uiCheckbox),\n                isDropdown   = $element.is(selector.uiDropdown),\n                isErrored    = $fieldGroup.hasClass(className.error)\n              ;\n              if(defaultValue === undefined) {\n                return;\n              }\n              if(isErrored) {\n                module.verbose('Resetting error on field', $fieldGroup);\n                $fieldGroup.removeClass(className.error);\n                $prompt.remove();\n              }\n              if(isDropdown) {\n                module.verbose('Resetting dropdown value', $element, defaultValue);\n                $element.dropdown('restore defaults');\n              }\n              else if(isCheckbox) {\n                module.verbose('Resetting checkbox value', $element, defaultValue);\n                $field.prop('checked', defaultValue);\n              }\n              else {\n                module.verbose('Resetting field value', $field, defaultValue);\n                $field.val(defaultValue);\n              }\n            })\n          ;\n        },\n\n        determine: {\n          isValid: function() {\n            var\n              allValid = true\n            ;\n            $.each(validation, function(fieldName, field) {\n              if( !( module.validate.field(field, fieldName, true) ) ) {\n                allValid = false;\n              }\n            });\n            return allValid;\n          }\n        },\n\n        is: {\n          bracketedRule: function(rule) {\n            return (rule.type && rule.type.match(settings.regExp.bracket));\n          },\n          shorthandFields: function(fields) {\n            var\n              fieldKeys = Object.keys(fields),\n              firstRule = fields[fieldKeys[0]]\n            ;\n            return module.is.shorthandRules(firstRule);\n          },\n          // duck type rule test\n          shorthandRules: function(rules) {\n            return (typeof rules == 'string' || $.isArray(rules));\n          },\n          empty: function($field) {\n            if(!$field || $field.length === 0) {\n              return true;\n            }\n            else if($field.is('input[type=\"checkbox\"]')) {\n              return !$field.is(':checked');\n            }\n            else {\n              return module.is.blank($field);\n            }\n          },\n          blank: function($field) {\n            return $.trim($field.val()) === '';\n          },\n          valid: function(field) {\n            var\n              allValid = true\n            ;\n            if(field) {\n              module.verbose('Checking if field is valid', field);\n              return module.validate.field(validation[field], field, false);\n            }\n            else {\n              module.verbose('Checking if form is valid');\n              $.each(validation, function(fieldName, field) {\n                if( !module.is.valid(fieldName) ) {\n                  allValid = false;\n                }\n              });\n              return allValid;\n            }\n          }\n        },\n\n        removeEvents: function() {\n          $module\n            .off(eventNamespace)\n          ;\n          $field\n            .off(eventNamespace)\n          ;\n          $submit\n            .off(eventNamespace)\n          ;\n          $field\n            .off(eventNamespace)\n          ;\n        },\n\n        event: {\n          field: {\n            keydown: function(event) {\n              var\n                $field       = $(this),\n                key          = event.which,\n                isInput      = $field.is(selector.input),\n                isCheckbox   = $field.is(selector.checkbox),\n                isInDropdown = ($field.closest(selector.uiDropdown).length > 0),\n                keyCode      = {\n                  enter  : 13,\n                  escape : 27\n                }\n              ;\n              if( key == keyCode.escape) {\n                module.verbose('Escape key pressed blurring field');\n                $field\n                  .blur()\n                ;\n              }\n              if(!event.ctrlKey && key == keyCode.enter && isInput && !isInDropdown && !isCheckbox) {\n                if(!keyHeldDown) {\n                  $field\n                    .one('keyup' + eventNamespace, module.event.field.keyup)\n                  ;\n                  module.submit();\n                  module.debug('Enter pressed on input submitting form');\n                }\n                keyHeldDown = true;\n              }\n            },\n            keyup: function() {\n              keyHeldDown = false;\n            },\n            blur: function(event) {\n              var\n                $field          = $(this),\n                $fieldGroup     = $field.closest($group),\n                validationRules = module.get.validation($field)\n              ;\n              if( $fieldGroup.hasClass(className.error) ) {\n                module.debug('Revalidating field', $field, validationRules);\n                if(validationRules) {\n                  module.validate.field( validationRules );\n                }\n              }\n              else if(settings.on == 'blur') {\n                if(validationRules) {\n                  module.validate.field( validationRules );\n                }\n              }\n            },\n            change: function(event) {\n              var\n                $field      = $(this),\n                $fieldGroup = $field.closest($group),\n                validationRules = module.get.validation($field)\n              ;\n              if(validationRules && (settings.on == 'change' || ( $fieldGroup.hasClass(className.error) && settings.revalidate) )) {\n                clearTimeout(module.timer);\n                module.timer = setTimeout(function() {\n                  module.debug('Revalidating field', $field,  module.get.validation($field));\n                  module.validate.field( validationRules );\n                }, settings.delay);\n              }\n            }\n          }\n\n        },\n\n        get: {\n          ancillaryValue: function(rule) {\n            if(!rule.type || (!rule.value && !module.is.bracketedRule(rule))) {\n              return false;\n            }\n            return (rule.value !== undefined)\n              ? rule.value\n              : rule.type.match(settings.regExp.bracket)[1] + ''\n            ;\n          },\n          ruleName: function(rule) {\n            if( module.is.bracketedRule(rule) ) {\n              return rule.type.replace(rule.type.match(settings.regExp.bracket)[0], '');\n            }\n            return rule.type;\n          },\n          changeEvent: function(type, $input) {\n            if(type == 'checkbox' || type == 'radio' || type == 'hidden' || $input.is('select')) {\n              return 'change';\n            }\n            else {\n              return module.get.inputEvent();\n            }\n          },\n          inputEvent: function() {\n            return (document.createElement('input').oninput !== undefined)\n              ? 'input'\n              : (document.createElement('input').onpropertychange !== undefined)\n                ? 'propertychange'\n                : 'keyup'\n            ;\n          },\n          fieldsFromShorthand: function(fields) {\n            var\n              fullFields = {}\n            ;\n            $.each(fields, function(name, rules) {\n              if(typeof rules == 'string') {\n                rules = [rules];\n              }\n              fullFields[name] = {\n                rules: []\n              };\n              $.each(rules, function(index, rule) {\n                fullFields[name].rules.push({ type: rule });\n              });\n            });\n            return fullFields;\n          },\n          prompt: function(rule, field) {\n            var\n              ruleName      = module.get.ruleName(rule),\n              ancillary     = module.get.ancillaryValue(rule),\n              $field        = module.get.field(field.identifier),\n              value         = $field.val(),\n              prompt        = $.isFunction(rule.prompt)\n                ? rule.prompt(value)\n                : rule.prompt || settings.prompt[ruleName] || settings.text.unspecifiedRule,\n              requiresValue = (prompt.search('{value}') !== -1),\n              requiresName  = (prompt.search('{name}') !== -1),\n              $label,\n              name\n            ;\n            if(requiresValue) {\n              prompt = prompt.replace('{value}', $field.val());\n            }\n            if(requiresName) {\n              $label = $field.closest(selector.group).find('label').eq(0);\n              name = ($label.length == 1)\n                ? $label.text()\n                : $field.prop('placeholder') || settings.text.unspecifiedField\n              ;\n              prompt = prompt.replace('{name}', name);\n            }\n            prompt = prompt.replace('{identifier}', field.identifier);\n            prompt = prompt.replace('{ruleValue}', ancillary);\n            if(!rule.prompt) {\n              module.verbose('Using default validation prompt for type', prompt, ruleName);\n            }\n            return prompt;\n          },\n          settings: function() {\n            if($.isPlainObject(parameters)) {\n              var\n                keys     = Object.keys(parameters),\n                isLegacySettings = (keys.length > 0)\n                  ? (parameters[keys[0]].identifier !== undefined && parameters[keys[0]].rules !== undefined)\n                  : false,\n                ruleKeys\n              ;\n              if(isLegacySettings) {\n                // 1.x (ducktyped)\n                settings   = $.extend(true, {}, $.fn.form.settings, legacyParameters);\n                validation = $.extend({}, $.fn.form.settings.defaults, parameters);\n                module.error(settings.error.oldSyntax, element);\n                module.verbose('Extending settings from legacy parameters', validation, settings);\n              }\n              else {\n                // 2.x\n                if(parameters.fields && module.is.shorthandFields(parameters.fields)) {\n                  parameters.fields = module.get.fieldsFromShorthand(parameters.fields);\n                }\n                settings   = $.extend(true, {}, $.fn.form.settings, parameters);\n                validation = $.extend({}, $.fn.form.settings.defaults, settings.fields);\n                module.verbose('Extending settings', validation, settings);\n              }\n            }\n            else {\n              settings   = $.fn.form.settings;\n              validation = $.fn.form.settings.defaults;\n              module.verbose('Using default form validation', validation, settings);\n            }\n\n            // shorthand\n            namespace       = settings.namespace;\n            metadata        = settings.metadata;\n            selector        = settings.selector;\n            className       = settings.className;\n            regExp          = settings.regExp;\n            error           = settings.error;\n            moduleNamespace = 'module-' + namespace;\n            eventNamespace  = '.' + namespace;\n\n            // grab instance\n            instance = $module.data(moduleNamespace);\n\n            // refresh selector cache\n            module.refresh();\n          },\n          field: function(identifier) {\n            module.verbose('Finding field with identifier', identifier);\n            identifier = module.escape.string(identifier);\n            if($field.filter('#' + identifier).length > 0 ) {\n              return $field.filter('#' + identifier);\n            }\n            else if( $field.filter('[name=\"' + identifier +'\"]').length > 0 ) {\n              return $field.filter('[name=\"' + identifier +'\"]');\n            }\n            else if( $field.filter('[name=\"' + identifier +'[]\"]').length > 0 ) {\n              return $field.filter('[name=\"' + identifier +'[]\"]');\n            }\n            else if( $field.filter('[data-' + metadata.validate + '=\"'+ identifier +'\"]').length > 0 ) {\n              return $field.filter('[data-' + metadata.validate + '=\"'+ identifier +'\"]');\n            }\n            return $('<input/>');\n          },\n          fields: function(fields) {\n            var\n              $fields = $()\n            ;\n            $.each(fields, function(index, name) {\n              $fields = $fields.add( module.get.field(name) );\n            });\n            return $fields;\n          },\n          validation: function($field) {\n            var\n              fieldValidation,\n              identifier\n            ;\n            if(!validation) {\n              return false;\n            }\n            $.each(validation, function(fieldName, field) {\n              identifier = field.identifier || fieldName;\n              if( module.get.field(identifier)[0] == $field[0] ) {\n                field.identifier = identifier;\n                fieldValidation = field;\n              }\n            });\n            return fieldValidation || false;\n          },\n          value: function (field) {\n            var\n              fields = [],\n              results\n            ;\n            fields.push(field);\n            results = module.get.values.call(element, fields);\n            return results[field];\n          },\n          values: function (fields) {\n            var\n              $fields = $.isArray(fields)\n                ? module.get.fields(fields)\n                : $field,\n              values = {}\n            ;\n            $fields.each(function(index, field) {\n              var\n                $field     = $(field),\n                type       = $field.prop('type'),\n                name       = $field.prop('name'),\n                value      = $field.val(),\n                isCheckbox = $field.is(selector.checkbox),\n                isRadio    = $field.is(selector.radio),\n                isMultiple = (name.indexOf('[]') !== -1),\n                isChecked  = (isCheckbox)\n                  ? $field.is(':checked')\n                  : false\n              ;\n              if(name) {\n                if(isMultiple) {\n                  name = name.replace('[]', '');\n                  if(!values[name]) {\n                    values[name] = [];\n                  }\n                  if(isCheckbox) {\n                    if(isChecked) {\n                      values[name].push(value || true);\n                    }\n                    else {\n                      values[name].push(false);\n                    }\n                  }\n                  else {\n                    values[name].push(value);\n                  }\n                }\n                else {\n                  if(isRadio) {\n                    if(values[name] === undefined || values[name] == false) {\n                      values[name] = (isChecked)\n                        ? value || true\n                        : false\n                      ;\n                    }\n                  }\n                  else if(isCheckbox) {\n                    if(isChecked) {\n                      values[name] = value || true;\n                    }\n                    else {\n                      values[name] = false;\n                    }\n                  }\n                  else {\n                    values[name] = value;\n                  }\n                }\n              }\n            });\n            return values;\n          }\n        },\n\n        has: {\n\n          field: function(identifier) {\n            module.verbose('Checking for existence of a field with identifier', identifier);\n            identifier = module.escape.string(identifier);\n            if(typeof identifier !== 'string') {\n              module.error(error.identifier, identifier);\n            }\n            if($field.filter('#' + identifier).length > 0 ) {\n              return true;\n            }\n            else if( $field.filter('[name=\"' + identifier +'\"]').length > 0 ) {\n              return true;\n            }\n            else if( $field.filter('[data-' + metadata.validate + '=\"'+ identifier +'\"]').length > 0 ) {\n              return true;\n            }\n            return false;\n          }\n\n        },\n\n        escape: {\n          string: function(text) {\n            text =  String(text);\n            return text.replace(regExp.escape, '\\\\$&');\n          }\n        },\n\n        add: {\n          // alias\n          rule: function(name, rules) {\n            module.add.field(name, rules);\n          },\n          field: function(name, rules) {\n            var\n              newValidation = {}\n            ;\n            if(module.is.shorthandRules(rules)) {\n              rules = $.isArray(rules)\n                ? rules\n                : [rules]\n              ;\n              newValidation[name] = {\n                rules: []\n              };\n              $.each(rules, function(index, rule) {\n                newValidation[name].rules.push({ type: rule });\n              });\n            }\n            else {\n              newValidation[name] = rules;\n            }\n            validation = $.extend({}, validation, newValidation);\n            module.debug('Adding rules', newValidation, validation);\n          },\n          fields: function(fields) {\n            var\n              newValidation\n            ;\n            if(fields && module.is.shorthandFields(fields)) {\n              newValidation = module.get.fieldsFromShorthand(fields);\n            }\n            else {\n              newValidation = fields;\n            }\n            validation = $.extend({}, validation, newValidation);\n          },\n          prompt: function(identifier, errors) {\n            var\n              $field       = module.get.field(identifier),\n              $fieldGroup  = $field.closest($group),\n              $prompt      = $fieldGroup.children(selector.prompt),\n              promptExists = ($prompt.length !== 0)\n            ;\n            errors = (typeof errors == 'string')\n              ? [errors]\n              : errors\n            ;\n            module.verbose('Adding field error state', identifier);\n            $fieldGroup\n              .addClass(className.error)\n            ;\n            if(settings.inline) {\n              if(!promptExists) {\n                $prompt = settings.templates.prompt(errors);\n                $prompt\n                  .appendTo($fieldGroup)\n                ;\n              }\n              $prompt\n                .html(errors[0])\n              ;\n              if(!promptExists) {\n                if(settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {\n                  module.verbose('Displaying error with css transition', settings.transition);\n                  $prompt.transition(settings.transition + ' in', settings.duration);\n                }\n                else {\n                  module.verbose('Displaying error with fallback javascript animation');\n                  $prompt\n                    .fadeIn(settings.duration)\n                  ;\n                }\n              }\n              else {\n                module.verbose('Inline errors are disabled, no inline error added', identifier);\n              }\n            }\n          },\n          errors: function(errors) {\n            module.debug('Adding form error messages', errors);\n            module.set.error();\n            $message\n              .html( settings.templates.error(errors) )\n            ;\n          }\n        },\n\n        remove: {\n          rule: function(field, rule) {\n            var\n              rules = $.isArray(rule)\n                ? rule\n                : [rule]\n            ;\n            if(rule == undefined) {\n              module.debug('Removed all rules');\n              validation[field].rules = [];\n              return;\n            }\n            if(validation[field] == undefined || !$.isArray(validation[field].rules)) {\n              return;\n            }\n            $.each(validation[field].rules, function(index, rule) {\n              if(rules.indexOf(rule.type) !== -1) {\n                module.debug('Removed rule', rule.type);\n                validation[field].rules.splice(index, 1);\n              }\n            });\n          },\n          field: function(field) {\n            var\n              fields = $.isArray(field)\n                ? field\n                : [field]\n            ;\n            $.each(fields, function(index, field) {\n              module.remove.rule(field);\n            });\n          },\n          // alias\n          rules: function(field, rules) {\n            if($.isArray(field)) {\n              $.each(fields, function(index, field) {\n                module.remove.rule(field, rules);\n              });\n            }\n            else {\n              module.remove.rule(field, rules);\n            }\n          },\n          fields: function(fields) {\n            module.remove.field(fields);\n          },\n          prompt: function(identifier) {\n            var\n              $field      = module.get.field(identifier),\n              $fieldGroup = $field.closest($group),\n              $prompt     = $fieldGroup.children(selector.prompt)\n            ;\n            $fieldGroup\n              .removeClass(className.error)\n            ;\n            if(settings.inline && $prompt.is(':visible')) {\n              module.verbose('Removing prompt for field', identifier);\n              if(settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {\n                $prompt.transition(settings.transition + ' out', settings.duration, function() {\n                  $prompt.remove();\n                });\n              }\n              else {\n                $prompt\n                  .fadeOut(settings.duration, function(){\n                    $prompt.remove();\n                  })\n                ;\n              }\n            }\n          }\n        },\n\n        set: {\n          success: function() {\n            $module\n              .removeClass(className.error)\n              .addClass(className.success)\n            ;\n          },\n          defaults: function () {\n            $field\n              .each(function () {\n                var\n                  $field     = $(this),\n                  isCheckbox = ($field.filter(selector.checkbox).length > 0),\n                  value      = (isCheckbox)\n                    ? $field.is(':checked')\n                    : $field.val()\n                ;\n                $field.data(metadata.defaultValue, value);\n              })\n            ;\n          },\n          error: function() {\n            $module\n              .removeClass(className.success)\n              .addClass(className.error)\n            ;\n          },\n          value: function (field, value) {\n            var\n              fields = {}\n            ;\n            fields[field] = value;\n            return module.set.values.call(element, fields);\n          },\n          values: function (fields) {\n            if($.isEmptyObject(fields)) {\n              return;\n            }\n            $.each(fields, function(key, value) {\n              var\n                $field      = module.get.field(key),\n                $element    = $field.parent(),\n                isMultiple  = $.isArray(value),\n                isCheckbox  = $element.is(selector.uiCheckbox),\n                isDropdown  = $element.is(selector.uiDropdown),\n                isRadio     = ($field.is(selector.radio) && isCheckbox),\n                fieldExists = ($field.length > 0),\n                $multipleField\n              ;\n              if(fieldExists) {\n                if(isMultiple && isCheckbox) {\n                  module.verbose('Selecting multiple', value, $field);\n                  $element.checkbox('uncheck');\n                  $.each(value, function(index, value) {\n                    $multipleField = $field.filter('[value=\"' + value + '\"]');\n                    $element       = $multipleField.parent();\n                    if($multipleField.length > 0) {\n                      $element.checkbox('check');\n                    }\n                  });\n                }\n                else if(isRadio) {\n                  module.verbose('Selecting radio value', value, $field);\n                  $field.filter('[value=\"' + value + '\"]')\n                    .parent(selector.uiCheckbox)\n                      .checkbox('check')\n                  ;\n                }\n                else if(isCheckbox) {\n                  module.verbose('Setting checkbox value', value, $element);\n                  if(value === true) {\n                    $element.checkbox('check');\n                  }\n                  else {\n                    $element.checkbox('uncheck');\n                  }\n                }\n                else if(isDropdown) {\n                  module.verbose('Setting dropdown value', value, $element);\n                  $element.dropdown('set selected', value);\n                }\n                else {\n                  module.verbose('Setting field value', value, $field);\n                  $field.val(value);\n                }\n              }\n            });\n          }\n        },\n\n        validate: {\n\n          form: function(event, ignoreCallbacks) {\n            var\n              values = module.get.values(),\n              apiRequest\n            ;\n\n            // input keydown event will fire submit repeatedly by browser default\n            if(keyHeldDown) {\n              return false;\n            }\n\n            // reset errors\n            formErrors = [];\n            if( module.determine.isValid() ) {\n              module.debug('Form has no validation errors, submitting');\n              module.set.success();\n              if(ignoreCallbacks !== true) {\n                return settings.onSuccess.call(element, event, values);\n              }\n            }\n            else {\n              module.debug('Form has errors');\n              module.set.error();\n              if(!settings.inline) {\n                module.add.errors(formErrors);\n              }\n              // prevent ajax submit\n              if($module.data('moduleApi') !== undefined) {\n                event.stopImmediatePropagation();\n              }\n              if(ignoreCallbacks !== true) {\n                return settings.onFailure.call(element, formErrors, values);\n              }\n            }\n          },\n\n          // takes a validation object and returns whether field passes validation\n          field: function(field, fieldName, showErrors) {\n            showErrors = (showErrors !== undefined)\n              ? showErrors\n              : true\n            ;\n            if(typeof field == 'string') {\n              module.verbose('Validating field', field);\n              fieldName = field;\n              field     = validation[field];\n            }\n            var\n              identifier    = field.identifier || fieldName,\n              $field        = module.get.field(identifier),\n              $dependsField = (field.depends)\n                ? module.get.field(field.depends)\n                : false,\n              fieldValid  = true,\n              fieldErrors = []\n            ;\n            if(!field.identifier) {\n              module.debug('Using field name as identifier', identifier);\n              field.identifier = identifier;\n            }\n            if($field.prop('disabled')) {\n              module.debug('Field is disabled. Skipping', identifier);\n              fieldValid = true;\n            }\n            else if(field.optional && module.is.blank($field)){\n              module.debug('Field is optional and blank. Skipping', identifier);\n              fieldValid = true;\n            }\n            else if(field.depends && module.is.empty($dependsField)) {\n              module.debug('Field depends on another value that is not present or empty. Skipping', $dependsField);\n              fieldValid = true;\n            }\n            else if(field.rules !== undefined) {\n              $.each(field.rules, function(index, rule) {\n                if( module.has.field(identifier) && !( module.validate.rule(field, rule) ) ) {\n                  module.debug('Field is invalid', identifier, rule.type);\n                  fieldErrors.push(module.get.prompt(rule, field));\n                  fieldValid = false;\n                }\n              });\n            }\n            if(fieldValid) {\n              if(showErrors) {\n                module.remove.prompt(identifier, fieldErrors);\n                settings.onValid.call($field);\n              }\n            }\n            else {\n              if(showErrors) {\n                formErrors = formErrors.concat(fieldErrors);\n                module.add.prompt(identifier, fieldErrors);\n                settings.onInvalid.call($field, fieldErrors);\n              }\n              return false;\n            }\n            return true;\n          },\n\n          // takes validation rule and returns whether field passes rule\n          rule: function(field, rule) {\n            var\n              $field       = module.get.field(field.identifier),\n              type         = rule.type,\n              value        = $field.val(),\n              isValid      = true,\n              ancillary    = module.get.ancillaryValue(rule),\n              ruleName     = module.get.ruleName(rule),\n              ruleFunction = settings.rules[ruleName]\n            ;\n            if( !$.isFunction(ruleFunction) ) {\n              module.error(error.noRule, ruleName);\n              return;\n            }\n            // cast to string avoiding encoding special values\n            value = (value === undefined || value === '' || value === null)\n              ? ''\n              : $.trim(value + '')\n            ;\n            return ruleFunction.call($field, value, ancillary);\n          }\n        },\n\n        setting: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, settings, name);\n          }\n          else if(value !== undefined) {\n            settings[name] = value;\n          }\n          else {\n            return settings[name];\n          }\n        },\n        internal: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, module, name);\n          }\n          else if(value !== undefined) {\n            module[name] = value;\n          }\n          else {\n            return module[name];\n          }\n        },\n        debug: function() {\n          if(!settings.silent && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function() {\n          if(!settings.silent && settings.verbose && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function() {\n          if(!settings.silent) {\n            module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n            module.error.apply(console, arguments);\n          }\n        },\n        performance: {\n          log: function(message) {\n            var\n              currentTime,\n              executionTime,\n              previousTime\n            ;\n            if(settings.performance) {\n              currentTime   = new Date().getTime();\n              previousTime  = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time          = currentTime;\n              performance.push({\n                'Name'           : message[0],\n                'Arguments'      : [].slice.call(message, 1) || '',\n                'Element'        : element,\n                'Execution Time' : executionTime\n              });\n            }\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function() {\n            var\n              title = settings.name + ':',\n              totalTime = 0\n            ;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function(index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n            if(moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n            if($allModules.length > 1) {\n              title += ' ' + '(' + $allModules.length + ')';\n            }\n            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n              if(console.table) {\n                console.table(performance);\n              }\n              else {\n                $.each(performance, function(index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');\n                });\n              }\n              console.groupEnd();\n            }\n            performance = [];\n          }\n        },\n        invoke: function(query, passedArguments, context) {\n          var\n            object = instance,\n            maxDepth,\n            found,\n            response\n          ;\n          passedArguments = passedArguments || queryArguments;\n          context         = element         || context;\n          if(typeof query == 'string' && object !== undefined) {\n            query    = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function(depth, value) {\n              var camelCaseValue = (depth != maxDepth)\n                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)\n                : query\n              ;\n              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {\n                object = object[camelCaseValue];\n              }\n              else if( object[camelCaseValue] !== undefined ) {\n                found = object[camelCaseValue];\n                return false;\n              }\n              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {\n                object = object[value];\n              }\n              else if( object[value] !== undefined ) {\n                found = object[value];\n                return false;\n              }\n              else {\n                return false;\n              }\n            });\n          }\n          if( $.isFunction( found ) ) {\n            response = found.apply(context, passedArguments);\n          }\n          else if(found !== undefined) {\n            response = found;\n          }\n          if($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          }\n          else if(returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          }\n          else if(response !== undefined) {\n            returnedValue = response;\n          }\n          return found;\n        }\n      };\n      module.initialize();\n    })\n  ;\n\n  return (returnedValue !== undefined)\n    ? returnedValue\n    : this\n  ;\n};\n\n$.fn.form.settings = {\n\n  name              : 'Form',\n  namespace         : 'form',\n\n  debug             : false,\n  verbose           : false,\n  performance       : true,\n\n  fields            : false,\n\n  keyboardShortcuts : true,\n  on                : 'submit',\n  inline            : false,\n\n  delay             : 200,\n  revalidate        : true,\n\n  transition        : 'scale',\n  duration          : 200,\n\n  onValid           : function() {},\n  onInvalid         : function() {},\n  onSuccess         : function() { return true; },\n  onFailure         : function() { return false; },\n\n  metadata : {\n    defaultValue : 'default',\n    validate     : 'validate'\n  },\n\n  regExp: {\n    htmlID  : /^[a-zA-Z][\\w:.-]*$/g,\n    bracket : /\\[(.*)\\]/i,\n    decimal : /^\\d+\\.?\\d*$/,\n    email   : /^[a-z0-9!#$%&'*+\\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,\n    escape  : /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\n    flags   : /^\\/(.*)\\/(.*)?/,\n    integer : /^\\-?\\d+$/,\n    number  : /^\\-?\\d*(\\.\\d+)?$/,\n    url     : /(https?:\\/\\/(?:www\\.|(?!www))[^\\s\\.]+\\.[^\\s]{2,}|www\\.[^\\s]+\\.[^\\s]{2,})/i\n  },\n\n  text: {\n    unspecifiedRule  : 'Please enter a valid value',\n    unspecifiedField : 'This field'\n  },\n\n  prompt: {\n    empty                : '{name} must have a value',\n    checked              : '{name} must be checked',\n    email                : '{name} must be a valid e-mail',\n    url                  : '{name} must be a valid url',\n    regExp               : '{name} is not formatted correctly',\n    integer              : '{name} must be an integer',\n    decimal              : '{name} must be a decimal number',\n    number               : '{name} must be set to a number',\n    is                   : '{name} must be \"{ruleValue}\"',\n    isExactly            : '{name} must be exactly \"{ruleValue}\"',\n    not                  : '{name} cannot be set to \"{ruleValue}\"',\n    notExactly           : '{name} cannot be set to exactly \"{ruleValue}\"',\n    contain              : '{name} must contain \"{ruleValue}\"',\n    containExactly       : '{name} must contain exactly \"{ruleValue}\"',\n    doesntContain        : '{name} cannot contain  \"{ruleValue}\"',\n    doesntContainExactly : '{name} cannot contain exactly \"{ruleValue}\"',\n    minLength            : '{name} must be at least {ruleValue} characters',\n    length               : '{name} must be at least {ruleValue} characters',\n    exactLength          : '{name} must be exactly {ruleValue} characters',\n    maxLength            : '{name} cannot be longer than {ruleValue} characters',\n    match                : '{name} must match {ruleValue} field',\n    different            : '{name} must have a different value than {ruleValue} field',\n    creditCard           : '{name} must be a valid credit card number',\n    minCount             : '{name} must have at least {ruleValue} choices',\n    exactCount           : '{name} must have exactly {ruleValue} choices',\n    maxCount             : '{name} must have {ruleValue} or less choices'\n  },\n\n  selector : {\n    checkbox   : 'input[type=\"checkbox\"], input[type=\"radio\"]',\n    clear      : '.clear',\n    field      : 'input, textarea, select',\n    group      : '.field',\n    input      : 'input',\n    message    : '.error.message',\n    prompt     : '.prompt.label',\n    radio      : 'input[type=\"radio\"]',\n    reset      : '.reset:not([type=\"reset\"])',\n    submit     : '.submit:not([type=\"submit\"])',\n    uiCheckbox : '.ui.checkbox',\n    uiDropdown : '.ui.dropdown'\n  },\n\n  className : {\n    error   : 'error',\n    label   : 'ui prompt label',\n    pressed : 'down',\n    success : 'success'\n  },\n\n  error: {\n    identifier : 'You must specify a string identifier for each field',\n    method     : 'The method you called is not defined.',\n    noRule     : 'There is no rule matching the one you specified',\n    oldSyntax  : 'Starting in 2.0 forms now only take a single settings object. Validation settings converted to new syntax automatically.'\n  },\n\n  templates: {\n\n    // template that produces error message\n    error: function(errors) {\n      var\n        html = '<ul class=\"list\">'\n      ;\n      $.each(errors, function(index, value) {\n        html += '<li>' + value + '</li>';\n      });\n      html += '</ul>';\n      return $(html);\n    },\n\n    // template that produces label\n    prompt: function(errors) {\n      return $('<div/>')\n        .addClass('ui basic red pointing prompt label')\n        .html(errors[0])\n      ;\n    }\n  },\n\n  rules: {\n\n    // is not empty or blank string\n    empty: function(value) {\n      return !(value === undefined || '' === value || $.isArray(value) && value.length === 0);\n    },\n\n    // checkbox checked\n    checked: function() {\n      return ($(this).filter(':checked').length > 0);\n    },\n\n    // is most likely an email\n    email: function(value){\n      return $.fn.form.settings.regExp.email.test(value);\n    },\n\n    // value is most likely url\n    url: function(value) {\n      return $.fn.form.settings.regExp.url.test(value);\n    },\n\n    // matches specified regExp\n    regExp: function(value, regExp) {\n      if(regExp instanceof RegExp) {\n        return value.match(regExp);\n      }\n      var\n        regExpParts = regExp.match($.fn.form.settings.regExp.flags),\n        flags\n      ;\n      // regular expression specified as /baz/gi (flags)\n      if(regExpParts) {\n        regExp = (regExpParts.length >= 2)\n          ? regExpParts[1]\n          : regExp\n        ;\n        flags = (regExpParts.length >= 3)\n          ? regExpParts[2]\n          : ''\n        ;\n      }\n      return value.match( new RegExp(regExp, flags) );\n    },\n\n    // is valid integer or matches range\n    integer: function(value, range) {\n      var\n        intRegExp = $.fn.form.settings.regExp.integer,\n        min,\n        max,\n        parts\n      ;\n      if( !range || ['', '..'].indexOf(range) !== -1) {\n        // do nothing\n      }\n      else if(range.indexOf('..') == -1) {\n        if(intRegExp.test(range)) {\n          min = max = range - 0;\n        }\n      }\n      else {\n        parts = range.split('..', 2);\n        if(intRegExp.test(parts[0])) {\n          min = parts[0] - 0;\n        }\n        if(intRegExp.test(parts[1])) {\n          max = parts[1] - 0;\n        }\n      }\n      return (\n        intRegExp.test(value) &&\n        (min === undefined || value >= min) &&\n        (max === undefined || value <= max)\n      );\n    },\n\n    // is valid number (with decimal)\n    decimal: function(value) {\n      return $.fn.form.settings.regExp.decimal.test(value);\n    },\n\n    // is valid number\n    number: function(value) {\n      return $.fn.form.settings.regExp.number.test(value);\n    },\n\n    // is value (case insensitive)\n    is: function(value, text) {\n      text = (typeof text == 'string')\n        ? text.toLowerCase()\n        : text\n      ;\n      value = (typeof value == 'string')\n        ? value.toLowerCase()\n        : value\n      ;\n      return (value == text);\n    },\n\n    // is value\n    isExactly: function(value, text) {\n      return (value == text);\n    },\n\n    // value is not another value (case insensitive)\n    not: function(value, notValue) {\n      value = (typeof value == 'string')\n        ? value.toLowerCase()\n        : value\n      ;\n      notValue = (typeof notValue == 'string')\n        ? notValue.toLowerCase()\n        : notValue\n      ;\n      return (value != notValue);\n    },\n\n    // value is not another value (case sensitive)\n    notExactly: function(value, notValue) {\n      return (value != notValue);\n    },\n\n    // value contains text (insensitive)\n    contains: function(value, text) {\n      // escape regex characters\n      text = text.replace($.fn.form.settings.regExp.escape, \"\\\\$&\");\n      return (value.search( new RegExp(text, 'i') ) !== -1);\n    },\n\n    // value contains text (case sensitive)\n    containsExactly: function(value, text) {\n      // escape regex characters\n      text = text.replace($.fn.form.settings.regExp.escape, \"\\\\$&\");\n      return (value.search( new RegExp(text) ) !== -1);\n    },\n\n    // value contains text (insensitive)\n    doesntContain: function(value, text) {\n      // escape regex characters\n      text = text.replace($.fn.form.settings.regExp.escape, \"\\\\$&\");\n      return (value.search( new RegExp(text, 'i') ) === -1);\n    },\n\n    // value contains text (case sensitive)\n    doesntContainExactly: function(value, text) {\n      // escape regex characters\n      text = text.replace($.fn.form.settings.regExp.escape, \"\\\\$&\");\n      return (value.search( new RegExp(text) ) === -1);\n    },\n\n    // is at least string length\n    minLength: function(value, requiredLength) {\n      return (value !== undefined)\n        ? (value.length >= requiredLength)\n        : false\n      ;\n    },\n\n    // see rls notes for 2.0.6 (this is a duplicate of minLength)\n    length: function(value, requiredLength) {\n      return (value !== undefined)\n        ? (value.length >= requiredLength)\n        : false\n      ;\n    },\n\n    // is exactly length\n    exactLength: function(value, requiredLength) {\n      return (value !== undefined)\n        ? (value.length == requiredLength)\n        : false\n      ;\n    },\n\n    // is less than length\n    maxLength: function(value, maxLength) {\n      return (value !== undefined)\n        ? (value.length <= maxLength)\n        : false\n      ;\n    },\n\n    // matches another field\n    match: function(value, identifier) {\n      var\n        $form = $(this),\n        matchingValue\n      ;\n      if( $('[data-validate=\"'+ identifier +'\"]').length > 0 ) {\n        matchingValue = $('[data-validate=\"'+ identifier +'\"]').val();\n      }\n      else if($('#' + identifier).length > 0) {\n        matchingValue = $('#' + identifier).val();\n      }\n      else if($('[name=\"' + identifier +'\"]').length > 0) {\n        matchingValue = $('[name=\"' + identifier + '\"]').val();\n      }\n      else if( $('[name=\"' + identifier +'[]\"]').length > 0 ) {\n        matchingValue = $('[name=\"' + identifier +'[]\"]');\n      }\n      return (matchingValue !== undefined)\n        ? ( value.toString() == matchingValue.toString() )\n        : false\n      ;\n    },\n\n    // different than another field\n    different: function(value, identifier) {\n      // use either id or name of field\n      var\n        $form = $(this),\n        matchingValue\n      ;\n      if( $('[data-validate=\"'+ identifier +'\"]').length > 0 ) {\n        matchingValue = $('[data-validate=\"'+ identifier +'\"]').val();\n      }\n      else if($('#' + identifier).length > 0) {\n        matchingValue = $('#' + identifier).val();\n      }\n      else if($('[name=\"' + identifier +'\"]').length > 0) {\n        matchingValue = $('[name=\"' + identifier + '\"]').val();\n      }\n      else if( $('[name=\"' + identifier +'[]\"]').length > 0 ) {\n        matchingValue = $('[name=\"' + identifier +'[]\"]');\n      }\n      return (matchingValue !== undefined)\n        ? ( value.toString() !== matchingValue.toString() )\n        : false\n      ;\n    },\n\n    creditCard: function(cardNumber, cardTypes) {\n      var\n        cards = {\n          visa: {\n            pattern : /^4/,\n            length  : [16]\n          },\n          amex: {\n            pattern : /^3[47]/,\n            length  : [15]\n          },\n          mastercard: {\n            pattern : /^5[1-5]/,\n            length  : [16]\n          },\n          discover: {\n            pattern : /^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,\n            length  : [16]\n          },\n          unionPay: {\n            pattern : /^(62|88)/,\n            length  : [16, 17, 18, 19]\n          },\n          jcb: {\n            pattern : /^35(2[89]|[3-8][0-9])/,\n            length  : [16]\n          },\n          maestro: {\n            pattern : /^(5018|5020|5038|6304|6759|676[1-3])/,\n            length  : [12, 13, 14, 15, 16, 17, 18, 19]\n          },\n          dinersClub: {\n            pattern : /^(30[0-5]|^36)/,\n            length  : [14]\n          },\n          laser: {\n            pattern : /^(6304|670[69]|6771)/,\n            length  : [16, 17, 18, 19]\n          },\n          visaElectron: {\n            pattern : /^(4026|417500|4508|4844|491(3|7))/,\n            length  : [16]\n          }\n        },\n        valid         = {},\n        validCard     = false,\n        requiredTypes = (typeof cardTypes == 'string')\n          ? cardTypes.split(',')\n          : false,\n        unionPay,\n        validation\n      ;\n\n      if(typeof cardNumber !== 'string' || cardNumber.length === 0) {\n        return;\n      }\n\n      // allow dashes in card\n      cardNumber = cardNumber.replace(/[\\-]/g, '');\n\n      // verify card types\n      if(requiredTypes) {\n        $.each(requiredTypes, function(index, type){\n          // verify each card type\n          validation = cards[type];\n          if(validation) {\n            valid = {\n              length  : ($.inArray(cardNumber.length, validation.length) !== -1),\n              pattern : (cardNumber.search(validation.pattern) !== -1)\n            };\n            if(valid.length && valid.pattern) {\n              validCard = true;\n            }\n          }\n        });\n\n        if(!validCard) {\n          return false;\n        }\n      }\n\n      // skip luhn for UnionPay\n      unionPay = {\n        number  : ($.inArray(cardNumber.length, cards.unionPay.length) !== -1),\n        pattern : (cardNumber.search(cards.unionPay.pattern) !== -1)\n      };\n      if(unionPay.number && unionPay.pattern) {\n        return true;\n      }\n\n      // verify luhn, adapted from  <https://gist.github.com/2134376>\n      var\n        length        = cardNumber.length,\n        multiple      = 0,\n        producedValue = [\n          [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n          [0, 2, 4, 6, 8, 1, 3, 5, 7, 9]\n        ],\n        sum           = 0\n      ;\n      while (length--) {\n        sum += producedValue[multiple][parseInt(cardNumber.charAt(length), 10)];\n        multiple ^= 1;\n      }\n      return (sum % 10 === 0 && sum > 0);\n    },\n\n    minCount: function(value, minCount) {\n      if(minCount == 0) {\n        return true;\n      }\n      if(minCount == 1) {\n        return (value !== '');\n      }\n      return (value.split(',').length >= minCount);\n    },\n\n    exactCount: function(value, exactCount) {\n      if(exactCount == 0) {\n        return (value === '');\n      }\n      if(exactCount == 1) {\n        return (value !== '' && value.search(',') === -1);\n      }\n      return (value.split(',').length == exactCount);\n    },\n\n    maxCount: function(value, maxCount) {\n      if(maxCount == 0) {\n        return false;\n      }\n      if(maxCount == 1) {\n        return (value.search(',') === -1);\n      }\n      return (value.split(',').length <= maxCount);\n    }\n  }\n\n};\n\n})( jQuery, window, document );\n"]},"hash":"d11961d3b79bfa0270214a29edcfd7190b5c2ac3"}
