{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"Application/ticketsalad/client/semantic-ui/definitions/modules/dropdown.js","filename":"Application/ticketsalad/client/semantic-ui/definitions/modules/dropdown.js","sourceMapTarget":"Application/ticketsalad/client/semantic-ui/definitions/modules/dropdown.js.map","sourceMaps":true,"passPerPreset":false,"envName":"development","cwd":"/Users/tristan/Documents/Uni/2018/Semester 1/COS 301/Group Project/TicketSalad/ticketsalad","parserOpts":{"sourceType":"module","sourceFileName":"Application/ticketsalad/client/semantic-ui/definitions/modules/dropdown.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"Application/ticketsalad/client/semantic-ui/definitions/modules/dropdown.js","comments":true,"compact":false,"sourceMaps":true,"sourceMapTarget":"Application/ticketsalad/client/semantic-ui/definitions/modules/dropdown.js.map","sourceFileName":"Application/ticketsalad/client/semantic-ui/definitions/modules/dropdown.js"}},"code":"/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.3.1\n*/\n\n/*!\n * # Semantic UI - Dropdown\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n;\n\n(function ($, window, document, undefined) {\n  'use strict';\n\n  window = typeof window != 'undefined' && window.Math == Math ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\n\n  $.fn.dropdown = function (parameters) {\n    var $allModules = $(this),\n        $document = $(document),\n        moduleSelector = $allModules.selector || '',\n        hasTouch = 'ontouchstart' in document.documentElement,\n        time = new Date().getTime(),\n        performance = [],\n        query = arguments[0],\n        methodInvoked = typeof query == 'string',\n        queryArguments = [].slice.call(arguments, 1),\n        returnedValue;\n    $allModules.each(function (elementIndex) {\n      var settings = $.isPlainObject(parameters) ? $.extend(true, {}, $.fn.dropdown.settings, parameters) : $.extend({}, $.fn.dropdown.settings),\n          className = settings.className,\n          message = settings.message,\n          fields = settings.fields,\n          keys = settings.keys,\n          metadata = settings.metadata,\n          namespace = settings.namespace,\n          regExp = settings.regExp,\n          selector = settings.selector,\n          error = settings.error,\n          templates = settings.templates,\n          eventNamespace = '.' + namespace,\n          moduleNamespace = 'module-' + namespace,\n          $module = $(this),\n          $context = $(settings.context),\n          $text = $module.find(selector.text),\n          $search = $module.find(selector.search),\n          $sizer = $module.find(selector.sizer),\n          $input = $module.find(selector.input),\n          $icon = $module.find(selector.icon),\n          $combo = $module.prev().find(selector.text).length > 0 ? $module.prev().find(selector.text) : $module.prev(),\n          $menu = $module.children(selector.menu),\n          $item = $menu.find(selector.item),\n          activated = false,\n          itemActivated = false,\n          internalChange = false,\n          element = this,\n          instance = $module.data(moduleNamespace),\n          initialLoad,\n          pageLostFocus,\n          willRefocus,\n          elementNamespace,\n          id,\n          selectObserver,\n          menuObserver,\n          module;\n      module = {\n        initialize: function () {\n          module.debug('Initializing dropdown', settings);\n\n          if (module.is.alreadySetup()) {\n            module.setup.reference();\n          } else {\n            module.setup.layout();\n\n            if (settings.values) {\n              module.change.values(settings.values);\n            }\n\n            module.refreshData();\n            module.save.defaults();\n            module.restore.selected();\n            module.create.id();\n            module.bind.events();\n            module.observeChanges();\n            module.instantiate();\n          }\n        },\n        instantiate: function () {\n          module.verbose('Storing instance of dropdown', module);\n          instance = module;\n          $module.data(moduleNamespace, module);\n        },\n        destroy: function () {\n          module.verbose('Destroying previous dropdown', $module);\n          module.remove.tabbable();\n          $module.off(eventNamespace).removeData(moduleNamespace);\n          $menu.off(eventNamespace);\n          $document.off(elementNamespace);\n          module.disconnect.menuObserver();\n          module.disconnect.selectObserver();\n        },\n        observeChanges: function () {\n          if ('MutationObserver' in window) {\n            selectObserver = new MutationObserver(module.event.select.mutation);\n            menuObserver = new MutationObserver(module.event.menu.mutation);\n            module.debug('Setting up mutation observer', selectObserver, menuObserver);\n            module.observe.select();\n            module.observe.menu();\n          }\n        },\n        disconnect: {\n          menuObserver: function () {\n            if (menuObserver) {\n              menuObserver.disconnect();\n            }\n          },\n          selectObserver: function () {\n            if (selectObserver) {\n              selectObserver.disconnect();\n            }\n          }\n        },\n        observe: {\n          select: function () {\n            if (module.has.input()) {\n              selectObserver.observe($module[0], {\n                childList: true,\n                subtree: true\n              });\n            }\n          },\n          menu: function () {\n            if (module.has.menu()) {\n              menuObserver.observe($menu[0], {\n                childList: true,\n                subtree: true\n              });\n            }\n          }\n        },\n        create: {\n          id: function () {\n            id = (Math.random().toString(16) + '000000000').substr(2, 8);\n            elementNamespace = '.' + id;\n            module.verbose('Creating unique id for element', id);\n          },\n          userChoice: function (values) {\n            var $userChoices, $userChoice, isUserValue, html;\n            values = values || module.get.userValues();\n\n            if (!values) {\n              return false;\n            }\n\n            values = $.isArray(values) ? values : [values];\n            $.each(values, function (index, value) {\n              if (module.get.item(value) === false) {\n                html = settings.templates.addition(module.add.variables(message.addResult, value));\n                $userChoice = $('<div />').html(html).attr('data-' + metadata.value, value).attr('data-' + metadata.text, value).addClass(className.addition).addClass(className.item);\n\n                if (settings.hideAdditions) {\n                  $userChoice.addClass(className.hidden);\n                }\n\n                $userChoices = $userChoices === undefined ? $userChoice : $userChoices.add($userChoice);\n                module.verbose('Creating user choices for value', value, $userChoice);\n              }\n            });\n            return $userChoices;\n          },\n          userLabels: function (value) {\n            var userValues = module.get.userValues();\n\n            if (userValues) {\n              module.debug('Adding user labels', userValues);\n              $.each(userValues, function (index, value) {\n                module.verbose('Adding custom user value');\n                module.add.label(value, value);\n              });\n            }\n          },\n          menu: function () {\n            $menu = $('<div />').addClass(className.menu).appendTo($module);\n          },\n          sizer: function () {\n            $sizer = $('<span />').addClass(className.sizer).insertAfter($search);\n          }\n        },\n        search: function (query) {\n          query = query !== undefined ? query : module.get.query();\n          module.verbose('Searching for query', query);\n\n          if (module.has.minCharacters(query)) {\n            module.filter(query);\n          } else {\n            module.hide();\n          }\n        },\n        select: {\n          firstUnfiltered: function () {\n            module.verbose('Selecting first non-filtered element');\n            module.remove.selectedItem();\n            $item.not(selector.unselectable).not(selector.addition + selector.hidden).eq(0).addClass(className.selected);\n          },\n          nextAvailable: function ($selected) {\n            $selected = $selected.eq(0);\n            var $nextAvailable = $selected.nextAll(selector.item).not(selector.unselectable).eq(0),\n                $prevAvailable = $selected.prevAll(selector.item).not(selector.unselectable).eq(0),\n                hasNext = $nextAvailable.length > 0;\n\n            if (hasNext) {\n              module.verbose('Moving selection to', $nextAvailable);\n              $nextAvailable.addClass(className.selected);\n            } else {\n              module.verbose('Moving selection to', $prevAvailable);\n              $prevAvailable.addClass(className.selected);\n            }\n          }\n        },\n        setup: {\n          api: function () {\n            var apiSettings = {\n              debug: settings.debug,\n              urlData: {\n                value: module.get.value(),\n                query: module.get.query()\n              },\n              on: false\n            };\n            module.verbose('First request, initializing API');\n            $module.api(apiSettings);\n          },\n          layout: function () {\n            if ($module.is('select')) {\n              module.setup.select();\n              module.setup.returnedObject();\n            }\n\n            if (!module.has.menu()) {\n              module.create.menu();\n            }\n\n            if (module.is.search() && !module.has.search()) {\n              module.verbose('Adding search input');\n              $search = $('<input />').addClass(className.search).prop('autocomplete', 'off').insertBefore($text);\n            }\n\n            if (module.is.multiple() && module.is.searchSelection() && !module.has.sizer()) {\n              module.create.sizer();\n            }\n\n            if (settings.allowTab) {\n              module.set.tabbable();\n            }\n          },\n          select: function () {\n            var selectValues = module.get.selectValues();\n            module.debug('Dropdown initialized on a select', selectValues);\n\n            if ($module.is('select')) {\n              $input = $module;\n            } // see if select is placed correctly already\n\n\n            if ($input.parent(selector.dropdown).length > 0) {\n              module.debug('UI dropdown already exists. Creating dropdown menu only');\n              $module = $input.closest(selector.dropdown);\n\n              if (!module.has.menu()) {\n                module.create.menu();\n              }\n\n              $menu = $module.children(selector.menu);\n              module.setup.menu(selectValues);\n            } else {\n              module.debug('Creating entire dropdown from select');\n              $module = $('<div />').attr('class', $input.attr('class')).addClass(className.selection).addClass(className.dropdown).html(templates.dropdown(selectValues)).insertBefore($input);\n\n              if ($input.hasClass(className.multiple) && $input.prop('multiple') === false) {\n                module.error(error.missingMultiple);\n                $input.prop('multiple', true);\n              }\n\n              if ($input.is('[multiple]')) {\n                module.set.multiple();\n              }\n\n              if ($input.prop('disabled')) {\n                module.debug('Disabling dropdown');\n                $module.addClass(className.disabled);\n              }\n\n              $input.removeAttr('class').detach().prependTo($module);\n            }\n\n            module.refresh();\n          },\n          menu: function (values) {\n            $menu.html(templates.menu(values, fields));\n            $item = $menu.find(selector.item);\n          },\n          reference: function () {\n            module.debug('Dropdown behavior was called on select, replacing with closest dropdown'); // replace module reference\n\n            $module = $module.parent(selector.dropdown);\n            instance = $module.data(moduleNamespace);\n            element = $module.get(0);\n            module.refresh();\n            module.setup.returnedObject();\n          },\n          returnedObject: function () {\n            var $firstModules = $allModules.slice(0, elementIndex),\n                $lastModules = $allModules.slice(elementIndex + 1); // adjust all modules to use correct reference\n\n            $allModules = $firstModules.add($module).add($lastModules);\n          }\n        },\n        refresh: function () {\n          module.refreshSelectors();\n          module.refreshData();\n        },\n        refreshItems: function () {\n          $item = $menu.find(selector.item);\n        },\n        refreshSelectors: function () {\n          module.verbose('Refreshing selector cache');\n          $text = $module.find(selector.text);\n          $search = $module.find(selector.search);\n          $input = $module.find(selector.input);\n          $icon = $module.find(selector.icon);\n          $combo = $module.prev().find(selector.text).length > 0 ? $module.prev().find(selector.text) : $module.prev();\n          $menu = $module.children(selector.menu);\n          $item = $menu.find(selector.item);\n        },\n        refreshData: function () {\n          module.verbose('Refreshing cached metadata');\n          $item.removeData(metadata.text).removeData(metadata.value);\n        },\n        clearData: function () {\n          module.verbose('Clearing metadata');\n          $item.removeData(metadata.text).removeData(metadata.value);\n          $module.removeData(metadata.defaultText).removeData(metadata.defaultValue).removeData(metadata.placeholderText);\n        },\n        toggle: function () {\n          module.verbose('Toggling menu visibility');\n\n          if (!module.is.active()) {\n            module.show();\n          } else {\n            module.hide();\n          }\n        },\n        show: function (callback) {\n          callback = $.isFunction(callback) ? callback : function () {};\n\n          if (!module.can.show() && module.is.remote()) {\n            module.debug('No API results retrieved, searching before show');\n            module.queryRemote(module.get.query(), module.show);\n          }\n\n          if (module.can.show() && !module.is.active()) {\n            module.debug('Showing dropdown');\n\n            if (module.has.message() && !(module.has.maxSelections() || module.has.allResultsFiltered())) {\n              module.remove.message();\n            }\n\n            if (module.is.allFiltered()) {\n              return true;\n            }\n\n            if (settings.onShow.call(element) !== false) {\n              module.animate.show(function () {\n                if (module.can.click()) {\n                  module.bind.intent();\n                }\n\n                if (module.has.menuSearch()) {\n                  module.focusSearch();\n                }\n\n                module.set.visible();\n                callback.call(element);\n              });\n            }\n          }\n        },\n        hide: function (callback) {\n          callback = $.isFunction(callback) ? callback : function () {};\n\n          if (module.is.active() && !module.is.animatingOutward()) {\n            module.debug('Hiding dropdown');\n\n            if (settings.onHide.call(element) !== false) {\n              module.animate.hide(function () {\n                module.remove.visible();\n                callback.call(element);\n              });\n            }\n          }\n        },\n        hideOthers: function () {\n          module.verbose('Finding other dropdowns to hide');\n          $allModules.not($module).has(selector.menu + '.' + className.visible).dropdown('hide');\n        },\n        hideMenu: function () {\n          module.verbose('Hiding menu  instantaneously');\n          module.remove.active();\n          module.remove.visible();\n          $menu.transition('hide');\n        },\n        hideSubMenus: function () {\n          var $subMenus = $menu.children(selector.item).find(selector.menu);\n          module.verbose('Hiding sub menus', $subMenus);\n          $subMenus.transition('hide');\n        },\n        bind: {\n          events: function () {\n            if (hasTouch) {\n              module.bind.touchEvents();\n            }\n\n            module.bind.keyboardEvents();\n            module.bind.inputEvents();\n            module.bind.mouseEvents();\n          },\n          touchEvents: function () {\n            module.debug('Touch device detected binding additional touch events');\n\n            if (module.is.searchSelection()) {// do nothing special yet\n            } else if (module.is.single()) {\n              $module.on('touchstart' + eventNamespace, module.event.test.toggle);\n            }\n\n            $menu.on('touchstart' + eventNamespace, selector.item, module.event.item.mouseenter);\n          },\n          keyboardEvents: function () {\n            module.verbose('Binding keyboard events');\n            $module.on('keydown' + eventNamespace, module.event.keydown);\n\n            if (module.has.search()) {\n              $module.on(module.get.inputEvent() + eventNamespace, selector.search, module.event.input);\n            }\n\n            if (module.is.multiple()) {\n              $document.on('keydown' + elementNamespace, module.event.document.keydown);\n            }\n          },\n          inputEvents: function () {\n            module.verbose('Binding input change events');\n            $module.on('change' + eventNamespace, selector.input, module.event.change);\n          },\n          mouseEvents: function () {\n            module.verbose('Binding mouse events');\n\n            if (module.is.multiple()) {\n              $module.on('click' + eventNamespace, selector.label, module.event.label.click).on('click' + eventNamespace, selector.remove, module.event.remove.click);\n            }\n\n            if (module.is.searchSelection()) {\n              $module.on('mousedown' + eventNamespace, module.event.mousedown).on('mouseup' + eventNamespace, module.event.mouseup).on('mousedown' + eventNamespace, selector.menu, module.event.menu.mousedown).on('mouseup' + eventNamespace, selector.menu, module.event.menu.mouseup).on('click' + eventNamespace, selector.icon, module.event.icon.click).on('focus' + eventNamespace, selector.search, module.event.search.focus).on('click' + eventNamespace, selector.search, module.event.search.focus).on('blur' + eventNamespace, selector.search, module.event.search.blur).on('click' + eventNamespace, selector.text, module.event.text.focus);\n\n              if (module.is.multiple()) {\n                $module.on('click' + eventNamespace, module.event.click);\n              }\n            } else {\n              if (settings.on == 'click') {\n                $module.on('click' + eventNamespace, selector.icon, module.event.icon.click).on('click' + eventNamespace, module.event.test.toggle);\n              } else if (settings.on == 'hover') {\n                $module.on('mouseenter' + eventNamespace, module.delay.show).on('mouseleave' + eventNamespace, module.delay.hide);\n              } else {\n                $module.on(settings.on + eventNamespace, module.toggle);\n              }\n\n              $module.on('mousedown' + eventNamespace, module.event.mousedown).on('mouseup' + eventNamespace, module.event.mouseup).on('focus' + eventNamespace, module.event.focus);\n\n              if (module.has.menuSearch()) {\n                $module.on('blur' + eventNamespace, selector.search, module.event.search.blur);\n              } else {\n                $module.on('blur' + eventNamespace, module.event.blur);\n              }\n            }\n\n            $menu.on('mouseenter' + eventNamespace, selector.item, module.event.item.mouseenter).on('mouseleave' + eventNamespace, selector.item, module.event.item.mouseleave).on('click' + eventNamespace, selector.item, module.event.item.click);\n          },\n          intent: function () {\n            module.verbose('Binding hide intent event to document');\n\n            if (hasTouch) {\n              $document.on('touchstart' + elementNamespace, module.event.test.touch).on('touchmove' + elementNamespace, module.event.test.touch);\n            }\n\n            $document.on('click' + elementNamespace, module.event.test.hide);\n          }\n        },\n        unbind: {\n          intent: function () {\n            module.verbose('Removing hide intent event from document');\n\n            if (hasTouch) {\n              $document.off('touchstart' + elementNamespace).off('touchmove' + elementNamespace);\n            }\n\n            $document.off('click' + elementNamespace);\n          }\n        },\n        filter: function (query) {\n          var searchTerm = query !== undefined ? query : module.get.query(),\n              afterFiltered = function () {\n            if (module.is.multiple()) {\n              module.filterActive();\n            }\n\n            if (query || !query && module.get.activeItem().length == 0) {\n              module.select.firstUnfiltered();\n            }\n\n            if (module.has.allResultsFiltered()) {\n              if (settings.onNoResults.call(element, searchTerm)) {\n                if (settings.allowAdditions) {\n                  if (settings.hideAdditions) {\n                    module.verbose('User addition with no menu, setting empty style');\n                    module.set.empty();\n                    module.hideMenu();\n                  }\n                } else {\n                  module.verbose('All items filtered, showing message', searchTerm);\n                  module.add.message(message.noResults);\n                }\n              } else {\n                module.verbose('All items filtered, hiding dropdown', searchTerm);\n                module.hideMenu();\n              }\n            } else {\n              module.remove.empty();\n              module.remove.message();\n            }\n\n            if (settings.allowAdditions) {\n              module.add.userSuggestion(query);\n            }\n\n            if (module.is.searchSelection() && module.can.show() && module.is.focusedOnSearch()) {\n              module.show();\n            }\n          };\n\n          if (settings.useLabels && module.has.maxSelections()) {\n            return;\n          }\n\n          if (settings.apiSettings) {\n            if (module.can.useAPI()) {\n              module.queryRemote(searchTerm, function () {\n                if (settings.filterRemoteData) {\n                  module.filterItems(searchTerm);\n                }\n\n                afterFiltered();\n              });\n            } else {\n              module.error(error.noAPI);\n            }\n          } else {\n            module.filterItems(searchTerm);\n            afterFiltered();\n          }\n        },\n        queryRemote: function (query, callback) {\n          var apiSettings = {\n            errorDuration: false,\n            cache: 'local',\n            throttle: settings.throttle,\n            urlData: {\n              query: query\n            },\n            onError: function () {\n              module.add.message(message.serverError);\n              callback();\n            },\n            onFailure: function () {\n              module.add.message(message.serverError);\n              callback();\n            },\n            onSuccess: function (response) {\n              module.remove.message();\n              module.setup.menu({\n                values: response[fields.remoteValues]\n              });\n              callback();\n            }\n          };\n\n          if (!$module.api('get request')) {\n            module.setup.api();\n          }\n\n          apiSettings = $.extend(true, {}, apiSettings, settings.apiSettings);\n          $module.api('setting', apiSettings).api('query');\n        },\n        filterItems: function (query) {\n          var searchTerm = query !== undefined ? query : module.get.query(),\n              results = null,\n              escapedTerm = module.escape.string(searchTerm),\n              beginsWithRegExp = new RegExp('^' + escapedTerm, 'igm'); // avoid loop if we're matching nothing\n\n          if (module.has.query()) {\n            results = [];\n            module.verbose('Searching for matching values', searchTerm);\n            $item.each(function () {\n              var $choice = $(this),\n                  text,\n                  value;\n\n              if (settings.match == 'both' || settings.match == 'text') {\n                text = String(module.get.choiceText($choice, false));\n\n                if (text.search(beginsWithRegExp) !== -1) {\n                  results.push(this);\n                  return true;\n                } else if (settings.fullTextSearch === 'exact' && module.exactSearch(searchTerm, text)) {\n                  results.push(this);\n                  return true;\n                } else if (settings.fullTextSearch === true && module.fuzzySearch(searchTerm, text)) {\n                  results.push(this);\n                  return true;\n                }\n              }\n\n              if (settings.match == 'both' || settings.match == 'value') {\n                value = String(module.get.choiceValue($choice, text));\n\n                if (value.search(beginsWithRegExp) !== -1) {\n                  results.push(this);\n                  return true;\n                } else if (settings.fullTextSearch === 'exact' && module.exactSearch(searchTerm, value)) {\n                  results.push(this);\n                  return true;\n                } else if (settings.fullTextSearch === true && module.fuzzySearch(searchTerm, value)) {\n                  results.push(this);\n                  return true;\n                }\n              }\n            });\n          }\n\n          module.debug('Showing only matched items', searchTerm);\n          module.remove.filteredItem();\n\n          if (results) {\n            $item.not(results).addClass(className.filtered);\n          }\n        },\n        fuzzySearch: function (query, term) {\n          var termLength = term.length,\n              queryLength = query.length;\n          query = query.toLowerCase();\n          term = term.toLowerCase();\n\n          if (queryLength > termLength) {\n            return false;\n          }\n\n          if (queryLength === termLength) {\n            return query === term;\n          }\n\n          search: for (var characterIndex = 0, nextCharacterIndex = 0; characterIndex < queryLength; characterIndex++) {\n            var queryCharacter = query.charCodeAt(characterIndex);\n\n            while (nextCharacterIndex < termLength) {\n              if (term.charCodeAt(nextCharacterIndex++) === queryCharacter) {\n                continue search;\n              }\n            }\n\n            return false;\n          }\n\n          return true;\n        },\n        exactSearch: function (query, term) {\n          query = query.toLowerCase();\n          term = term.toLowerCase();\n\n          if (term.indexOf(query) > -1) {\n            return true;\n          }\n\n          return false;\n        },\n        filterActive: function () {\n          if (settings.useLabels) {\n            $item.filter('.' + className.active).addClass(className.filtered);\n          }\n        },\n        focusSearch: function (skipHandler) {\n          if (module.has.search() && !module.is.focusedOnSearch()) {\n            if (skipHandler) {\n              $module.off('focus' + eventNamespace, selector.search);\n              $search.focus();\n              $module.on('focus' + eventNamespace, selector.search, module.event.search.focus);\n            } else {\n              $search.focus();\n            }\n          }\n        },\n        forceSelection: function () {\n          var $currentlySelected = $item.not(className.filtered).filter('.' + className.selected).eq(0),\n              $activeItem = $item.not(className.filtered).filter('.' + className.active).eq(0),\n              $selectedItem = $currentlySelected.length > 0 ? $currentlySelected : $activeItem,\n              hasSelected = $selectedItem.length > 0;\n\n          if (hasSelected && !module.is.multiple()) {\n            module.debug('Forcing partial selection to selected item', $selectedItem);\n            module.event.item.click.call($selectedItem, {}, true);\n            return;\n          } else {\n            if (settings.allowAdditions) {\n              module.set.selected(module.get.query());\n              module.remove.searchTerm();\n            } else {\n              module.remove.searchTerm();\n            }\n          }\n        },\n        change: {\n          values: function (values) {\n            if (!settings.allowAdditions) {\n              module.clear();\n            }\n\n            module.debug('Creating dropdown with specified values', values);\n            module.setup.menu({\n              values: values\n            });\n            $.each(values, function (index, item) {\n              if (item.selected == true) {\n                module.debug('Setting initial selection to', item.value);\n                module.set.selected(item.value);\n                return true;\n              }\n            });\n          }\n        },\n        event: {\n          change: function () {\n            if (!internalChange) {\n              module.debug('Input changed, updating selection');\n              module.set.selected();\n            }\n          },\n          focus: function () {\n            if (settings.showOnFocus && !activated && module.is.hidden() && !pageLostFocus) {\n              module.show();\n            }\n          },\n          blur: function (event) {\n            pageLostFocus = document.activeElement === this;\n\n            if (!activated && !pageLostFocus) {\n              module.remove.activeLabel();\n              module.hide();\n            }\n          },\n          mousedown: function () {\n            if (module.is.searchSelection()) {\n              // prevent menu hiding on immediate re-focus\n              willRefocus = true;\n            } else {\n              // prevents focus callback from occurring on mousedown\n              activated = true;\n            }\n          },\n          mouseup: function () {\n            if (module.is.searchSelection()) {\n              // prevent menu hiding on immediate re-focus\n              willRefocus = false;\n            } else {\n              activated = false;\n            }\n          },\n          click: function (event) {\n            var $target = $(event.target); // focus search\n\n            if ($target.is($module)) {\n              if (!module.is.focusedOnSearch()) {\n                module.focusSearch();\n              } else {\n                module.show();\n              }\n            }\n          },\n          search: {\n            focus: function () {\n              activated = true;\n\n              if (module.is.multiple()) {\n                module.remove.activeLabel();\n              }\n\n              if (settings.showOnFocus) {\n                module.search();\n              }\n            },\n            blur: function (event) {\n              pageLostFocus = document.activeElement === this;\n\n              if (module.is.searchSelection() && !willRefocus) {\n                if (!itemActivated && !pageLostFocus) {\n                  if (settings.forceSelection) {\n                    module.forceSelection();\n                  }\n\n                  module.hide();\n                }\n              }\n\n              willRefocus = false;\n            }\n          },\n          icon: {\n            click: function (event) {\n              module.toggle();\n            }\n          },\n          text: {\n            focus: function (event) {\n              activated = true;\n              module.focusSearch();\n            }\n          },\n          input: function (event) {\n            if (module.is.multiple() || module.is.searchSelection()) {\n              module.set.filtered();\n            }\n\n            clearTimeout(module.timer);\n            module.timer = setTimeout(module.search, settings.delay.search);\n          },\n          label: {\n            click: function (event) {\n              var $label = $(this),\n                  $labels = $module.find(selector.label),\n                  $activeLabels = $labels.filter('.' + className.active),\n                  $nextActive = $label.nextAll('.' + className.active),\n                  $prevActive = $label.prevAll('.' + className.active),\n                  $range = $nextActive.length > 0 ? $label.nextUntil($nextActive).add($activeLabels).add($label) : $label.prevUntil($prevActive).add($activeLabels).add($label);\n\n              if (event.shiftKey) {\n                $activeLabels.removeClass(className.active);\n                $range.addClass(className.active);\n              } else if (event.ctrlKey) {\n                $label.toggleClass(className.active);\n              } else {\n                $activeLabels.removeClass(className.active);\n                $label.addClass(className.active);\n              }\n\n              settings.onLabelSelect.apply(this, $labels.filter('.' + className.active));\n            }\n          },\n          remove: {\n            click: function () {\n              var $label = $(this).parent();\n\n              if ($label.hasClass(className.active)) {\n                // remove all selected labels\n                module.remove.activeLabels();\n              } else {\n                // remove this label only\n                module.remove.activeLabels($label);\n              }\n            }\n          },\n          test: {\n            toggle: function (event) {\n              var toggleBehavior = module.is.multiple() ? module.show : module.toggle;\n\n              if (module.is.bubbledLabelClick(event) || module.is.bubbledIconClick(event)) {\n                return;\n              }\n\n              if (module.determine.eventOnElement(event, toggleBehavior)) {\n                event.preventDefault();\n              }\n            },\n            touch: function (event) {\n              module.determine.eventOnElement(event, function () {\n                if (event.type == 'touchstart') {\n                  module.timer = setTimeout(function () {\n                    module.hide();\n                  }, settings.delay.touch);\n                } else if (event.type == 'touchmove') {\n                  clearTimeout(module.timer);\n                }\n              });\n              event.stopPropagation();\n            },\n            hide: function (event) {\n              module.determine.eventInModule(event, module.hide);\n            }\n          },\n          select: {\n            mutation: function (mutations) {\n              module.debug('<select> modified, recreating menu');\n              var isSelectMutation = false;\n              $.each(mutations, function (index, mutation) {\n                if ($(mutation.target).is('select') || $(mutation.addedNodes).is('select')) {\n                  isSelectMutation = true;\n                  return true;\n                }\n              });\n\n              if (isSelectMutation) {\n                module.disconnect.selectObserver();\n                module.refresh();\n                module.setup.select();\n                module.set.selected();\n                module.observe.select();\n              }\n            }\n          },\n          menu: {\n            mutation: function (mutations) {\n              var mutation = mutations[0],\n                  $addedNode = mutation.addedNodes ? $(mutation.addedNodes[0]) : $(false),\n                  $removedNode = mutation.removedNodes ? $(mutation.removedNodes[0]) : $(false),\n                  $changedNodes = $addedNode.add($removedNode),\n                  isUserAddition = $changedNodes.is(selector.addition) || $changedNodes.closest(selector.addition).length > 0,\n                  isMessage = $changedNodes.is(selector.message) || $changedNodes.closest(selector.message).length > 0;\n\n              if (isUserAddition || isMessage) {\n                module.debug('Updating item selector cache');\n                module.refreshItems();\n              } else {\n                module.debug('Menu modified, updating selector cache');\n                module.refresh();\n              }\n            },\n            mousedown: function () {\n              itemActivated = true;\n            },\n            mouseup: function () {\n              itemActivated = false;\n            }\n          },\n          item: {\n            mouseenter: function (event) {\n              var $target = $(event.target),\n                  $item = $(this),\n                  $subMenu = $item.children(selector.menu),\n                  $otherMenus = $item.siblings(selector.item).children(selector.menu),\n                  hasSubMenu = $subMenu.length > 0,\n                  isBubbledEvent = $subMenu.find($target).length > 0;\n\n              if (!isBubbledEvent && hasSubMenu) {\n                clearTimeout(module.itemTimer);\n                module.itemTimer = setTimeout(function () {\n                  module.verbose('Showing sub-menu', $subMenu);\n                  $.each($otherMenus, function () {\n                    module.animate.hide(false, $(this));\n                  });\n                  module.animate.show(false, $subMenu);\n                }, settings.delay.show);\n                event.preventDefault();\n              }\n            },\n            mouseleave: function (event) {\n              var $subMenu = $(this).children(selector.menu);\n\n              if ($subMenu.length > 0) {\n                clearTimeout(module.itemTimer);\n                module.itemTimer = setTimeout(function () {\n                  module.verbose('Hiding sub-menu', $subMenu);\n                  module.animate.hide(false, $subMenu);\n                }, settings.delay.hide);\n              }\n            },\n            click: function (event, skipRefocus) {\n              var $choice = $(this),\n                  $target = event ? $(event.target) : $(''),\n                  $subMenu = $choice.find(selector.menu),\n                  text = module.get.choiceText($choice),\n                  value = module.get.choiceValue($choice, text),\n                  hasSubMenu = $subMenu.length > 0,\n                  isBubbledEvent = $subMenu.find($target).length > 0; // prevents IE11 bug where menu receives focus even though `tabindex=-1`\n\n              if (module.has.menuSearch()) {\n                $(document.activeElement).blur();\n              }\n\n              if (!isBubbledEvent && (!hasSubMenu || settings.allowCategorySelection)) {\n                if (module.is.searchSelection()) {\n                  if (settings.allowAdditions) {\n                    module.remove.userAddition();\n                  }\n\n                  module.remove.searchTerm();\n\n                  if (!module.is.focusedOnSearch() && !(skipRefocus == true)) {\n                    module.focusSearch(true);\n                  }\n                }\n\n                if (!settings.useLabels) {\n                  module.remove.filteredItem();\n                  module.set.scrollPosition($choice);\n                }\n\n                module.determine.selectAction.call(this, text, value);\n              }\n            }\n          },\n          document: {\n            // label selection should occur even when element has no focus\n            keydown: function (event) {\n              var pressedKey = event.which,\n                  isShortcutKey = module.is.inObject(pressedKey, keys);\n\n              if (isShortcutKey) {\n                var $label = $module.find(selector.label),\n                    $activeLabel = $label.filter('.' + className.active),\n                    activeValue = $activeLabel.data(metadata.value),\n                    labelIndex = $label.index($activeLabel),\n                    labelCount = $label.length,\n                    hasActiveLabel = $activeLabel.length > 0,\n                    hasMultipleActive = $activeLabel.length > 1,\n                    isFirstLabel = labelIndex === 0,\n                    isLastLabel = labelIndex + 1 == labelCount,\n                    isSearch = module.is.searchSelection(),\n                    isFocusedOnSearch = module.is.focusedOnSearch(),\n                    isFocused = module.is.focused(),\n                    caretAtStart = isFocusedOnSearch && module.get.caretPosition() === 0,\n                    $nextLabel;\n\n                if (isSearch && !hasActiveLabel && !isFocusedOnSearch) {\n                  return;\n                }\n\n                if (pressedKey == keys.leftArrow) {\n                  // activate previous label\n                  if ((isFocused || caretAtStart) && !hasActiveLabel) {\n                    module.verbose('Selecting previous label');\n                    $label.last().addClass(className.active);\n                  } else if (hasActiveLabel) {\n                    if (!event.shiftKey) {\n                      module.verbose('Selecting previous label');\n                      $label.removeClass(className.active);\n                    } else {\n                      module.verbose('Adding previous label to selection');\n                    }\n\n                    if (isFirstLabel && !hasMultipleActive) {\n                      $activeLabel.addClass(className.active);\n                    } else {\n                      $activeLabel.prev(selector.siblingLabel).addClass(className.active).end();\n                    }\n\n                    event.preventDefault();\n                  }\n                } else if (pressedKey == keys.rightArrow) {\n                  // activate first label\n                  if (isFocused && !hasActiveLabel) {\n                    $label.first().addClass(className.active);\n                  } // activate next label\n\n\n                  if (hasActiveLabel) {\n                    if (!event.shiftKey) {\n                      module.verbose('Selecting next label');\n                      $label.removeClass(className.active);\n                    } else {\n                      module.verbose('Adding next label to selection');\n                    }\n\n                    if (isLastLabel) {\n                      if (isSearch) {\n                        if (!isFocusedOnSearch) {\n                          module.focusSearch();\n                        } else {\n                          $label.removeClass(className.active);\n                        }\n                      } else if (hasMultipleActive) {\n                        $activeLabel.next(selector.siblingLabel).addClass(className.active);\n                      } else {\n                        $activeLabel.addClass(className.active);\n                      }\n                    } else {\n                      $activeLabel.next(selector.siblingLabel).addClass(className.active);\n                    }\n\n                    event.preventDefault();\n                  }\n                } else if (pressedKey == keys.deleteKey || pressedKey == keys.backspace) {\n                  if (hasActiveLabel) {\n                    module.verbose('Removing active labels');\n\n                    if (isLastLabel) {\n                      if (isSearch && !isFocusedOnSearch) {\n                        module.focusSearch();\n                      }\n                    }\n\n                    $activeLabel.last().next(selector.siblingLabel).addClass(className.active);\n                    module.remove.activeLabels($activeLabel);\n                    event.preventDefault();\n                  } else if (caretAtStart && !hasActiveLabel && pressedKey == keys.backspace) {\n                    module.verbose('Removing last label on input backspace');\n                    $activeLabel = $label.last().addClass(className.active);\n                    module.remove.activeLabels($activeLabel);\n                  }\n                } else {\n                  $activeLabel.removeClass(className.active);\n                }\n              }\n            }\n          },\n          keydown: function (event) {\n            var pressedKey = event.which,\n                isShortcutKey = module.is.inObject(pressedKey, keys);\n\n            if (isShortcutKey) {\n              var $currentlySelected = $item.not(selector.unselectable).filter('.' + className.selected).eq(0),\n                  $activeItem = $menu.children('.' + className.active).eq(0),\n                  $selectedItem = $currentlySelected.length > 0 ? $currentlySelected : $activeItem,\n                  $visibleItems = $selectedItem.length > 0 ? $selectedItem.siblings(':not(.' + className.filtered + ')').addBack() : $menu.children(':not(.' + className.filtered + ')'),\n                  $subMenu = $selectedItem.children(selector.menu),\n                  $parentMenu = $selectedItem.closest(selector.menu),\n                  inVisibleMenu = $parentMenu.hasClass(className.visible) || $parentMenu.hasClass(className.animating) || $parentMenu.parent(selector.menu).length > 0,\n                  hasSubMenu = $subMenu.length > 0,\n                  hasSelectedItem = $selectedItem.length > 0,\n                  selectedIsSelectable = $selectedItem.not(selector.unselectable).length > 0,\n                  delimiterPressed = pressedKey == keys.delimiter && settings.allowAdditions && module.is.multiple(),\n                  isAdditionWithoutMenu = settings.allowAdditions && settings.hideAdditions && (pressedKey == keys.enter || delimiterPressed) && selectedIsSelectable,\n                  $nextItem,\n                  isSubMenuItem,\n                  newIndex; // allow selection with menu closed\n\n              if (isAdditionWithoutMenu) {\n                module.verbose('Selecting item from keyboard shortcut', $selectedItem);\n                module.event.item.click.call($selectedItem, event);\n\n                if (module.is.searchSelection()) {\n                  module.remove.searchTerm();\n                }\n              } // visible menu keyboard shortcuts\n\n\n              if (module.is.visible()) {\n                // enter (select or open sub-menu)\n                if (pressedKey == keys.enter || delimiterPressed) {\n                  if (pressedKey == keys.enter && hasSelectedItem && hasSubMenu && !settings.allowCategorySelection) {\n                    module.verbose('Pressed enter on unselectable category, opening sub menu');\n                    pressedKey = keys.rightArrow;\n                  } else if (selectedIsSelectable) {\n                    module.verbose('Selecting item from keyboard shortcut', $selectedItem);\n                    module.event.item.click.call($selectedItem, event);\n\n                    if (module.is.searchSelection()) {\n                      module.remove.searchTerm();\n                    }\n                  }\n\n                  event.preventDefault();\n                } // sub-menu actions\n\n\n                if (hasSelectedItem) {\n                  if (pressedKey == keys.leftArrow) {\n                    isSubMenuItem = $parentMenu[0] !== $menu[0];\n\n                    if (isSubMenuItem) {\n                      module.verbose('Left key pressed, closing sub-menu');\n                      module.animate.hide(false, $parentMenu);\n                      $selectedItem.removeClass(className.selected);\n                      $parentMenu.closest(selector.item).addClass(className.selected);\n                      event.preventDefault();\n                    }\n                  } // right arrow (show sub-menu)\n\n\n                  if (pressedKey == keys.rightArrow) {\n                    if (hasSubMenu) {\n                      module.verbose('Right key pressed, opening sub-menu');\n                      module.animate.show(false, $subMenu);\n                      $selectedItem.removeClass(className.selected);\n                      $subMenu.find(selector.item).eq(0).addClass(className.selected);\n                      event.preventDefault();\n                    }\n                  }\n                } // up arrow (traverse menu up)\n\n\n                if (pressedKey == keys.upArrow) {\n                  $nextItem = hasSelectedItem && inVisibleMenu ? $selectedItem.prevAll(selector.item + ':not(' + selector.unselectable + ')').eq(0) : $item.eq(0);\n\n                  if ($visibleItems.index($nextItem) < 0) {\n                    module.verbose('Up key pressed but reached top of current menu');\n                    event.preventDefault();\n                    return;\n                  } else {\n                    module.verbose('Up key pressed, changing active item');\n                    $selectedItem.removeClass(className.selected);\n                    $nextItem.addClass(className.selected);\n                    module.set.scrollPosition($nextItem);\n\n                    if (settings.selectOnKeydown && module.is.single()) {\n                      module.set.selectedItem($nextItem);\n                    }\n                  }\n\n                  event.preventDefault();\n                } // down arrow (traverse menu down)\n\n\n                if (pressedKey == keys.downArrow) {\n                  $nextItem = hasSelectedItem && inVisibleMenu ? $nextItem = $selectedItem.nextAll(selector.item + ':not(' + selector.unselectable + ')').eq(0) : $item.eq(0);\n\n                  if ($nextItem.length === 0) {\n                    module.verbose('Down key pressed but reached bottom of current menu');\n                    event.preventDefault();\n                    return;\n                  } else {\n                    module.verbose('Down key pressed, changing active item');\n                    $item.removeClass(className.selected);\n                    $nextItem.addClass(className.selected);\n                    module.set.scrollPosition($nextItem);\n\n                    if (settings.selectOnKeydown && module.is.single()) {\n                      module.set.selectedItem($nextItem);\n                    }\n                  }\n\n                  event.preventDefault();\n                } // page down (show next page)\n\n\n                if (pressedKey == keys.pageUp) {\n                  module.scrollPage('up');\n                  event.preventDefault();\n                }\n\n                if (pressedKey == keys.pageDown) {\n                  module.scrollPage('down');\n                  event.preventDefault();\n                } // escape (close menu)\n\n\n                if (pressedKey == keys.escape) {\n                  module.verbose('Escape key pressed, closing dropdown');\n                  module.hide();\n                }\n              } else {\n                // delimiter key\n                if (delimiterPressed) {\n                  event.preventDefault();\n                } // down arrow (open menu)\n\n\n                if (pressedKey == keys.downArrow && !module.is.visible()) {\n                  module.verbose('Down key pressed, showing dropdown');\n                  module.show();\n                  event.preventDefault();\n                }\n              }\n            } else {\n              if (!module.has.search()) {\n                module.set.selectedLetter(String.fromCharCode(pressedKey));\n              }\n            }\n          }\n        },\n        trigger: {\n          change: function () {\n            var events = document.createEvent('HTMLEvents'),\n                inputElement = $input[0];\n\n            if (inputElement) {\n              module.verbose('Triggering native change event');\n              events.initEvent('change', true, false);\n              inputElement.dispatchEvent(events);\n            }\n          }\n        },\n        determine: {\n          selectAction: function (text, value) {\n            module.verbose('Determining action', settings.action);\n\n            if ($.isFunction(module.action[settings.action])) {\n              module.verbose('Triggering preset action', settings.action, text, value);\n              module.action[settings.action].call(element, text, value, this);\n            } else if ($.isFunction(settings.action)) {\n              module.verbose('Triggering user action', settings.action, text, value);\n              settings.action.call(element, text, value, this);\n            } else {\n              module.error(error.action, settings.action);\n            }\n          },\n          eventInModule: function (event, callback) {\n            var $target = $(event.target),\n                inDocument = $target.closest(document.documentElement).length > 0,\n                inModule = $target.closest($module).length > 0;\n            callback = $.isFunction(callback) ? callback : function () {};\n\n            if (inDocument && !inModule) {\n              module.verbose('Triggering event', callback);\n              callback();\n              return true;\n            } else {\n              module.verbose('Event occurred in dropdown, canceling callback');\n              return false;\n            }\n          },\n          eventOnElement: function (event, callback) {\n            var $target = $(event.target),\n                $label = $target.closest(selector.siblingLabel),\n                inVisibleDOM = document.body.contains(event.target),\n                notOnLabel = $module.find($label).length === 0,\n                notInMenu = $target.closest($menu).length === 0;\n            callback = $.isFunction(callback) ? callback : function () {};\n\n            if (inVisibleDOM && notOnLabel && notInMenu) {\n              module.verbose('Triggering event', callback);\n              callback();\n              return true;\n            } else {\n              module.verbose('Event occurred in dropdown menu, canceling callback');\n              return false;\n            }\n          }\n        },\n        action: {\n          nothing: function () {},\n          activate: function (text, value, element) {\n            value = value !== undefined ? value : text;\n\n            if (module.can.activate($(element))) {\n              module.set.selected(value, $(element));\n\n              if (module.is.multiple() && !module.is.allFiltered()) {\n                return;\n              } else {\n                module.hideAndClear();\n              }\n            }\n          },\n          select: function (text, value, element) {\n            value = value !== undefined ? value : text;\n\n            if (module.can.activate($(element))) {\n              module.set.value(value, text, $(element));\n\n              if (module.is.multiple() && !module.is.allFiltered()) {\n                return;\n              } else {\n                module.hideAndClear();\n              }\n            }\n          },\n          combo: function (text, value, element) {\n            value = value !== undefined ? value : text;\n            module.set.selected(value, $(element));\n            module.hideAndClear();\n          },\n          hide: function (text, value, element) {\n            module.set.value(value, text);\n            module.hideAndClear();\n          }\n        },\n        get: {\n          id: function () {\n            return id;\n          },\n          defaultText: function () {\n            return $module.data(metadata.defaultText);\n          },\n          defaultValue: function () {\n            return $module.data(metadata.defaultValue);\n          },\n          placeholderText: function () {\n            if (settings.placeholder != 'auto' && typeof settings.placeholder == 'string') {\n              return settings.placeholder;\n            }\n\n            return $module.data(metadata.placeholderText) || '';\n          },\n          text: function () {\n            return $text.text();\n          },\n          query: function () {\n            return $.trim($search.val());\n          },\n          searchWidth: function (value) {\n            value = value !== undefined ? value : $search.val();\n            $sizer.text(value); // prevent rounding issues\n\n            return Math.ceil($sizer.width() + 1);\n          },\n          selectionCount: function () {\n            var values = module.get.values(),\n                count;\n            count = module.is.multiple() ? $.isArray(values) ? values.length : 0 : module.get.value() !== '' ? 1 : 0;\n            return count;\n          },\n          transition: function ($subMenu) {\n            return settings.transition == 'auto' ? module.is.upward($subMenu) ? 'slide up' : 'slide down' : settings.transition;\n          },\n          userValues: function () {\n            var values = module.get.values();\n\n            if (!values) {\n              return false;\n            }\n\n            values = $.isArray(values) ? values : [values];\n            return $.grep(values, function (value) {\n              return module.get.item(value) === false;\n            });\n          },\n          uniqueArray: function (array) {\n            return $.grep(array, function (value, index) {\n              return $.inArray(value, array) === index;\n            });\n          },\n          caretPosition: function () {\n            var input = $search.get(0),\n                range,\n                rangeLength;\n\n            if ('selectionStart' in input) {\n              return input.selectionStart;\n            } else if (document.selection) {\n              input.focus();\n              range = document.selection.createRange();\n              rangeLength = range.text.length;\n              range.moveStart('character', -input.value.length);\n              return range.text.length - rangeLength;\n            }\n          },\n          value: function () {\n            var value = $input.length > 0 ? $input.val() : $module.data(metadata.value),\n                isEmptyMultiselect = $.isArray(value) && value.length === 1 && value[0] === ''; // prevents placeholder element from being selected when multiple\n\n            return value === undefined || isEmptyMultiselect ? '' : value;\n          },\n          values: function () {\n            var value = module.get.value();\n\n            if (value === '') {\n              return '';\n            }\n\n            return !module.has.selectInput() && module.is.multiple() ? typeof value == 'string' ? // delimited string\n            value.split(settings.delimiter) : '' : value;\n          },\n          remoteValues: function () {\n            var values = module.get.values(),\n                remoteValues = false;\n\n            if (values) {\n              if (typeof values == 'string') {\n                values = [values];\n              }\n\n              $.each(values, function (index, value) {\n                var name = module.read.remoteData(value);\n                module.verbose('Restoring value from session data', name, value);\n\n                if (name) {\n                  if (!remoteValues) {\n                    remoteValues = {};\n                  }\n\n                  remoteValues[value] = name;\n                }\n              });\n            }\n\n            return remoteValues;\n          },\n          choiceText: function ($choice, preserveHTML) {\n            preserveHTML = preserveHTML !== undefined ? preserveHTML : settings.preserveHTML;\n\n            if ($choice) {\n              if ($choice.find(selector.menu).length > 0) {\n                module.verbose('Retrieving text of element with sub-menu');\n                $choice = $choice.clone();\n                $choice.find(selector.menu).remove();\n                $choice.find(selector.menuIcon).remove();\n              }\n\n              return $choice.data(metadata.text) !== undefined ? $choice.data(metadata.text) : preserveHTML ? $.trim($choice.html()) : $.trim($choice.text());\n            }\n          },\n          choiceValue: function ($choice, choiceText) {\n            choiceText = choiceText || module.get.choiceText($choice);\n\n            if (!$choice) {\n              return false;\n            }\n\n            return $choice.data(metadata.value) !== undefined ? String($choice.data(metadata.value)) : typeof choiceText === 'string' ? $.trim(choiceText.toLowerCase()) : String(choiceText);\n          },\n          inputEvent: function () {\n            var input = $search[0];\n\n            if (input) {\n              return input.oninput !== undefined ? 'input' : input.onpropertychange !== undefined ? 'propertychange' : 'keyup';\n            }\n\n            return false;\n          },\n          selectValues: function () {\n            var select = {};\n            select.values = [];\n            $module.find('option').each(function () {\n              var $option = $(this),\n                  name = $option.html(),\n                  disabled = $option.attr('disabled'),\n                  value = $option.attr('value') !== undefined ? $option.attr('value') : name;\n\n              if (settings.placeholder === 'auto' && value === '') {\n                select.placeholder = name;\n              } else {\n                select.values.push({\n                  name: name,\n                  value: value,\n                  disabled: disabled\n                });\n              }\n            });\n\n            if (settings.placeholder && settings.placeholder !== 'auto') {\n              module.debug('Setting placeholder value to', settings.placeholder);\n              select.placeholder = settings.placeholder;\n            }\n\n            if (settings.sortSelect) {\n              select.values.sort(function (a, b) {\n                return a.name > b.name ? 1 : -1;\n              });\n              module.debug('Retrieved and sorted values from select', select);\n            } else {\n              module.debug('Retrieved values from select', select);\n            }\n\n            return select;\n          },\n          activeItem: function () {\n            return $item.filter('.' + className.active);\n          },\n          selectedItem: function () {\n            var $selectedItem = $item.not(selector.unselectable).filter('.' + className.selected);\n            return $selectedItem.length > 0 ? $selectedItem : $item.eq(0);\n          },\n          itemWithAdditions: function (value) {\n            var $items = module.get.item(value),\n                $userItems = module.create.userChoice(value),\n                hasUserItems = $userItems && $userItems.length > 0;\n\n            if (hasUserItems) {\n              $items = $items.length > 0 ? $items.add($userItems) : $userItems;\n            }\n\n            return $items;\n          },\n          item: function (value, strict) {\n            var $selectedItem = false,\n                shouldSearch,\n                isMultiple;\n            value = value !== undefined ? value : module.get.values() !== undefined ? module.get.values() : module.get.text();\n            shouldSearch = isMultiple ? value.length > 0 : value !== undefined && value !== null;\n            isMultiple = module.is.multiple() && $.isArray(value);\n            strict = value === '' || value === 0 ? true : strict || false;\n\n            if (shouldSearch) {\n              $item.each(function () {\n                var $choice = $(this),\n                    optionText = module.get.choiceText($choice),\n                    optionValue = module.get.choiceValue($choice, optionText); // safe early exit\n\n                if (optionValue === null || optionValue === undefined) {\n                  return;\n                }\n\n                if (isMultiple) {\n                  if ($.inArray(String(optionValue), value) !== -1 || $.inArray(optionText, value) !== -1) {\n                    $selectedItem = $selectedItem ? $selectedItem.add($choice) : $choice;\n                  }\n                } else if (strict) {\n                  module.verbose('Ambiguous dropdown value using strict type check', $choice, value);\n\n                  if (optionValue === value || optionText === value) {\n                    $selectedItem = $choice;\n                    return true;\n                  }\n                } else {\n                  if (String(optionValue) == String(value) || optionText == value) {\n                    module.verbose('Found select item by value', optionValue, value);\n                    $selectedItem = $choice;\n                    return true;\n                  }\n                }\n              });\n            }\n\n            return $selectedItem;\n          }\n        },\n        check: {\n          maxSelections: function (selectionCount) {\n            if (settings.maxSelections) {\n              selectionCount = selectionCount !== undefined ? selectionCount : module.get.selectionCount();\n\n              if (selectionCount >= settings.maxSelections) {\n                module.debug('Maximum selection count reached');\n\n                if (settings.useLabels) {\n                  $item.addClass(className.filtered);\n                  module.add.message(message.maxSelections);\n                }\n\n                return true;\n              } else {\n                module.verbose('No longer at maximum selection count');\n                module.remove.message();\n                module.remove.filteredItem();\n\n                if (module.is.searchSelection()) {\n                  module.filterItems();\n                }\n\n                return false;\n              }\n            }\n\n            return true;\n          }\n        },\n        restore: {\n          defaults: function () {\n            module.clear();\n            module.restore.defaultText();\n            module.restore.defaultValue();\n          },\n          defaultText: function () {\n            var defaultText = module.get.defaultText(),\n                placeholderText = module.get.placeholderText;\n\n            if (defaultText === placeholderText) {\n              module.debug('Restoring default placeholder text', defaultText);\n              module.set.placeholderText(defaultText);\n            } else {\n              module.debug('Restoring default text', defaultText);\n              module.set.text(defaultText);\n            }\n          },\n          placeholderText: function () {\n            module.set.placeholderText();\n          },\n          defaultValue: function () {\n            var defaultValue = module.get.defaultValue();\n\n            if (defaultValue !== undefined) {\n              module.debug('Restoring default value', defaultValue);\n\n              if (defaultValue !== '') {\n                module.set.value(defaultValue);\n                module.set.selected();\n              } else {\n                module.remove.activeItem();\n                module.remove.selectedItem();\n              }\n            }\n          },\n          labels: function () {\n            if (settings.allowAdditions) {\n              if (!settings.useLabels) {\n                module.error(error.labels);\n                settings.useLabels = true;\n              }\n\n              module.debug('Restoring selected values');\n              module.create.userLabels();\n            }\n\n            module.check.maxSelections();\n          },\n          selected: function () {\n            module.restore.values();\n\n            if (module.is.multiple()) {\n              module.debug('Restoring previously selected values and labels');\n              module.restore.labels();\n            } else {\n              module.debug('Restoring previously selected values');\n            }\n          },\n          values: function () {\n            // prevents callbacks from occurring on initial load\n            module.set.initialLoad();\n\n            if (settings.apiSettings && settings.saveRemoteData && module.get.remoteValues()) {\n              module.restore.remoteValues();\n            } else {\n              module.set.selected();\n            }\n\n            module.remove.initialLoad();\n          },\n          remoteValues: function () {\n            var values = module.get.remoteValues();\n            module.debug('Recreating selected from session data', values);\n\n            if (values) {\n              if (module.is.single()) {\n                $.each(values, function (value, name) {\n                  module.set.text(name);\n                });\n              } else {\n                $.each(values, function (value, name) {\n                  module.add.label(value, name);\n                });\n              }\n            }\n          }\n        },\n        read: {\n          remoteData: function (value) {\n            var name;\n\n            if (window.Storage === undefined) {\n              module.error(error.noStorage);\n              return;\n            }\n\n            name = sessionStorage.getItem(value);\n            return name !== undefined ? name : false;\n          }\n        },\n        save: {\n          defaults: function () {\n            module.save.defaultText();\n            module.save.placeholderText();\n            module.save.defaultValue();\n          },\n          defaultValue: function () {\n            var value = module.get.value();\n            module.verbose('Saving default value as', value);\n            $module.data(metadata.defaultValue, value);\n          },\n          defaultText: function () {\n            var text = module.get.text();\n            module.verbose('Saving default text as', text);\n            $module.data(metadata.defaultText, text);\n          },\n          placeholderText: function () {\n            var text;\n\n            if (settings.placeholder !== false && $text.hasClass(className.placeholder)) {\n              text = module.get.text();\n              module.verbose('Saving placeholder text as', text);\n              $module.data(metadata.placeholderText, text);\n            }\n          },\n          remoteData: function (name, value) {\n            if (window.Storage === undefined) {\n              module.error(error.noStorage);\n              return;\n            }\n\n            module.verbose('Saving remote data to session storage', value, name);\n            sessionStorage.setItem(value, name);\n          }\n        },\n        clear: function () {\n          if (module.is.multiple() && settings.useLabels) {\n            module.remove.labels();\n          } else {\n            module.remove.activeItem();\n            module.remove.selectedItem();\n          }\n\n          module.set.placeholderText();\n          module.clearValue();\n        },\n        clearValue: function () {\n          module.set.value('');\n        },\n        scrollPage: function (direction, $selectedItem) {\n          var $currentItem = $selectedItem || module.get.selectedItem(),\n              $menu = $currentItem.closest(selector.menu),\n              menuHeight = $menu.outerHeight(),\n              currentScroll = $menu.scrollTop(),\n              itemHeight = $item.eq(0).outerHeight(),\n              itemsPerPage = Math.floor(menuHeight / itemHeight),\n              maxScroll = $menu.prop('scrollHeight'),\n              newScroll = direction == 'up' ? currentScroll - itemHeight * itemsPerPage : currentScroll + itemHeight * itemsPerPage,\n              $selectableItem = $item.not(selector.unselectable),\n              isWithinRange,\n              $nextSelectedItem,\n              elementIndex;\n          elementIndex = direction == 'up' ? $selectableItem.index($currentItem) - itemsPerPage : $selectableItem.index($currentItem) + itemsPerPage;\n          isWithinRange = direction == 'up' ? elementIndex >= 0 : elementIndex < $selectableItem.length;\n          $nextSelectedItem = isWithinRange ? $selectableItem.eq(elementIndex) : direction == 'up' ? $selectableItem.first() : $selectableItem.last();\n\n          if ($nextSelectedItem.length > 0) {\n            module.debug('Scrolling page', direction, $nextSelectedItem);\n            $currentItem.removeClass(className.selected);\n            $nextSelectedItem.addClass(className.selected);\n\n            if (settings.selectOnKeydown && module.is.single()) {\n              module.set.selectedItem($nextSelectedItem);\n            }\n\n            $menu.scrollTop(newScroll);\n          }\n        },\n        set: {\n          filtered: function () {\n            var isMultiple = module.is.multiple(),\n                isSearch = module.is.searchSelection(),\n                isSearchMultiple = isMultiple && isSearch,\n                searchValue = isSearch ? module.get.query() : '',\n                hasSearchValue = typeof searchValue === 'string' && searchValue.length > 0,\n                searchWidth = module.get.searchWidth(),\n                valueIsSet = searchValue !== '';\n\n            if (isMultiple && hasSearchValue) {\n              module.verbose('Adjusting input width', searchWidth, settings.glyphWidth);\n              $search.css('width', searchWidth);\n            }\n\n            if (hasSearchValue || isSearchMultiple && valueIsSet) {\n              module.verbose('Hiding placeholder text');\n              $text.addClass(className.filtered);\n            } else if (!isMultiple || isSearchMultiple && !valueIsSet) {\n              module.verbose('Showing placeholder text');\n              $text.removeClass(className.filtered);\n            }\n          },\n          empty: function () {\n            $module.addClass(className.empty);\n          },\n          loading: function () {\n            $module.addClass(className.loading);\n          },\n          placeholderText: function (text) {\n            text = text || module.get.placeholderText();\n            module.debug('Setting placeholder text', text);\n            module.set.text(text);\n            $text.addClass(className.placeholder);\n          },\n          tabbable: function () {\n            if (module.is.searchSelection()) {\n              module.debug('Added tabindex to searchable dropdown');\n              $search.val('').attr('tabindex', 0);\n              $menu.attr('tabindex', -1);\n            } else {\n              module.debug('Added tabindex to dropdown');\n\n              if ($module.attr('tabindex') === undefined) {\n                $module.attr('tabindex', 0);\n                $menu.attr('tabindex', -1);\n              }\n            }\n          },\n          initialLoad: function () {\n            module.verbose('Setting initial load');\n            initialLoad = true;\n          },\n          activeItem: function ($item) {\n            if (settings.allowAdditions && $item.filter(selector.addition).length > 0) {\n              $item.addClass(className.filtered);\n            } else {\n              $item.addClass(className.active);\n            }\n          },\n          partialSearch: function (text) {\n            var length = module.get.query().length;\n            $search.val(text.substr(0, length));\n          },\n          scrollPosition: function ($item, forceScroll) {\n            var edgeTolerance = 5,\n                $menu,\n                hasActive,\n                offset,\n                itemHeight,\n                itemOffset,\n                menuOffset,\n                menuScroll,\n                menuHeight,\n                abovePage,\n                belowPage;\n            $item = $item || module.get.selectedItem();\n            $menu = $item.closest(selector.menu);\n            hasActive = $item && $item.length > 0;\n            forceScroll = forceScroll !== undefined ? forceScroll : false;\n\n            if ($item && $menu.length > 0 && hasActive) {\n              itemOffset = $item.position().top;\n              $menu.addClass(className.loading);\n              menuScroll = $menu.scrollTop();\n              menuOffset = $menu.offset().top;\n              itemOffset = $item.offset().top;\n              offset = menuScroll - menuOffset + itemOffset;\n\n              if (!forceScroll) {\n                menuHeight = $menu.height();\n                belowPage = menuScroll + menuHeight < offset + edgeTolerance;\n                abovePage = offset - edgeTolerance < menuScroll;\n              }\n\n              module.debug('Scrolling to active item', offset);\n\n              if (forceScroll || abovePage || belowPage) {\n                $menu.scrollTop(offset);\n              }\n\n              $menu.removeClass(className.loading);\n            }\n          },\n          text: function (text) {\n            if (settings.action !== 'select') {\n              if (settings.action == 'combo') {\n                module.debug('Changing combo button text', text, $combo);\n\n                if (settings.preserveHTML) {\n                  $combo.html(text);\n                } else {\n                  $combo.text(text);\n                }\n              } else {\n                if (text !== module.get.placeholderText()) {\n                  $text.removeClass(className.placeholder);\n                }\n\n                module.debug('Changing text', text, $text);\n                $text.removeClass(className.filtered);\n\n                if (settings.preserveHTML) {\n                  $text.html(text);\n                } else {\n                  $text.text(text);\n                }\n              }\n            }\n          },\n          selectedItem: function ($item) {\n            var value = module.get.choiceValue($item),\n                searchText = module.get.choiceText($item, false),\n                text = module.get.choiceText($item, true);\n            module.debug('Setting user selection to item', $item);\n            module.remove.activeItem();\n            module.set.partialSearch(searchText);\n            module.set.activeItem($item);\n            module.set.selected(value, $item);\n            module.set.text(text);\n          },\n          selectedLetter: function (letter) {\n            var $selectedItem = $item.filter('.' + className.selected),\n                alreadySelectedLetter = $selectedItem.length > 0 && module.has.firstLetter($selectedItem, letter),\n                $nextValue = false,\n                $nextItem; // check next of same letter\n\n            if (alreadySelectedLetter) {\n              $nextItem = $selectedItem.nextAll($item).eq(0);\n\n              if (module.has.firstLetter($nextItem, letter)) {\n                $nextValue = $nextItem;\n              }\n            } // check all values\n\n\n            if (!$nextValue) {\n              $item.each(function () {\n                if (module.has.firstLetter($(this), letter)) {\n                  $nextValue = $(this);\n                  return false;\n                }\n              });\n            } // set next value\n\n\n            if ($nextValue) {\n              module.verbose('Scrolling to next value with letter', letter);\n              module.set.scrollPosition($nextValue);\n              $selectedItem.removeClass(className.selected);\n              $nextValue.addClass(className.selected);\n\n              if (settings.selectOnKeydown && module.is.single()) {\n                module.set.selectedItem($nextValue);\n              }\n            }\n          },\n          direction: function ($menu) {\n            if (settings.direction == 'auto') {\n              // reset position\n              module.remove.upward();\n\n              if (module.can.openDownward($menu)) {\n                module.remove.upward($menu);\n              } else {\n                module.set.upward($menu);\n              }\n\n              if (!module.is.leftward($menu) && !module.can.openRightward($menu)) {\n                module.set.leftward($menu);\n              }\n            } else if (settings.direction == 'upward') {\n              module.set.upward($menu);\n            }\n          },\n          upward: function ($currentMenu) {\n            var $element = $currentMenu || $module;\n            $element.addClass(className.upward);\n          },\n          leftward: function ($currentMenu) {\n            var $element = $currentMenu || $menu;\n            $element.addClass(className.leftward);\n          },\n          value: function (value, text, $selected) {\n            var escapedValue = module.escape.value(value),\n                hasInput = $input.length > 0,\n                currentValue = module.get.values(),\n                stringValue = value !== undefined ? String(value) : value,\n                newValue;\n\n            if (hasInput) {\n              if (!settings.allowReselection && stringValue == currentValue) {\n                module.verbose('Skipping value update already same value', value, currentValue);\n\n                if (!module.is.initialLoad()) {\n                  return;\n                }\n              }\n\n              if (module.is.single() && module.has.selectInput() && module.can.extendSelect()) {\n                module.debug('Adding user option', value);\n                module.add.optionValue(value);\n              }\n\n              module.debug('Updating input value', escapedValue, currentValue);\n              internalChange = true;\n              $input.val(escapedValue);\n\n              if (settings.fireOnInit === false && module.is.initialLoad()) {\n                module.debug('Input native change event ignored on initial load');\n              } else {\n                module.trigger.change();\n              }\n\n              internalChange = false;\n            } else {\n              module.verbose('Storing value in metadata', escapedValue, $input);\n\n              if (escapedValue !== currentValue) {\n                $module.data(metadata.value, stringValue);\n              }\n            }\n\n            if (settings.fireOnInit === false && module.is.initialLoad()) {\n              module.verbose('No callback on initial load', settings.onChange);\n            } else {\n              settings.onChange.call(element, value, text, $selected);\n            }\n          },\n          active: function () {\n            $module.addClass(className.active);\n          },\n          multiple: function () {\n            $module.addClass(className.multiple);\n          },\n          visible: function () {\n            $module.addClass(className.visible);\n          },\n          exactly: function (value, $selectedItem) {\n            module.debug('Setting selected to exact values');\n            module.clear();\n            module.set.selected(value, $selectedItem);\n          },\n          selected: function (value, $selectedItem) {\n            var isMultiple = module.is.multiple(),\n                $userSelectedItem;\n            $selectedItem = settings.allowAdditions ? $selectedItem || module.get.itemWithAdditions(value) : $selectedItem || module.get.item(value);\n\n            if (!$selectedItem) {\n              return;\n            }\n\n            module.debug('Setting selected menu item to', $selectedItem);\n\n            if (module.is.multiple()) {\n              module.remove.searchWidth();\n            }\n\n            if (module.is.single()) {\n              module.remove.activeItem();\n              module.remove.selectedItem();\n            } else if (settings.useLabels) {\n              module.remove.selectedItem();\n            } // select each item\n\n\n            $selectedItem.each(function () {\n              var $selected = $(this),\n                  selectedText = module.get.choiceText($selected),\n                  selectedValue = module.get.choiceValue($selected, selectedText),\n                  isFiltered = $selected.hasClass(className.filtered),\n                  isActive = $selected.hasClass(className.active),\n                  isUserValue = $selected.hasClass(className.addition),\n                  shouldAnimate = isMultiple && $selectedItem.length == 1;\n\n              if (isMultiple) {\n                if (!isActive || isUserValue) {\n                  if (settings.apiSettings && settings.saveRemoteData) {\n                    module.save.remoteData(selectedText, selectedValue);\n                  }\n\n                  if (settings.useLabels) {\n                    module.add.label(selectedValue, selectedText, shouldAnimate);\n                    module.add.value(selectedValue, selectedText, $selected);\n                    module.set.activeItem($selected);\n                    module.filterActive();\n                    module.select.nextAvailable($selectedItem);\n                  } else {\n                    module.add.value(selectedValue, selectedText, $selected);\n                    module.set.text(module.add.variables(message.count));\n                    module.set.activeItem($selected);\n                  }\n                } else if (!isFiltered) {\n                  module.debug('Selected active value, removing label');\n                  module.remove.selected(selectedValue);\n                }\n              } else {\n                if (settings.apiSettings && settings.saveRemoteData) {\n                  module.save.remoteData(selectedText, selectedValue);\n                }\n\n                module.set.text(selectedText);\n                module.set.value(selectedValue, selectedText, $selected);\n                $selected.addClass(className.active).addClass(className.selected);\n              }\n            });\n          }\n        },\n        add: {\n          label: function (value, text, shouldAnimate) {\n            var $next = module.is.searchSelection() ? $search : $text,\n                escapedValue = module.escape.value(value),\n                $label;\n\n            if (settings.ignoreCase) {\n              escapedValue = escapedValue.toLowerCase();\n            }\n\n            $label = $('<a />').addClass(className.label).attr('data-' + metadata.value, escapedValue).html(templates.label(escapedValue, text));\n            $label = settings.onLabelCreate.call($label, escapedValue, text);\n\n            if (module.has.label(value)) {\n              module.debug('User selection already exists, skipping', escapedValue);\n              return;\n            }\n\n            if (settings.label.variation) {\n              $label.addClass(settings.label.variation);\n            }\n\n            if (shouldAnimate === true) {\n              module.debug('Animating in label', $label);\n              $label.addClass(className.hidden).insertBefore($next).transition(settings.label.transition, settings.label.duration);\n            } else {\n              module.debug('Adding selection label', $label);\n              $label.insertBefore($next);\n            }\n          },\n          message: function (message) {\n            var $message = $menu.children(selector.message),\n                html = settings.templates.message(module.add.variables(message));\n\n            if ($message.length > 0) {\n              $message.html(html);\n            } else {\n              $message = $('<div/>').html(html).addClass(className.message).appendTo($menu);\n            }\n          },\n          optionValue: function (value) {\n            var escapedValue = module.escape.value(value),\n                $option = $input.find('option[value=\"' + module.escape.string(escapedValue) + '\"]'),\n                hasOption = $option.length > 0;\n\n            if (hasOption) {\n              return;\n            } // temporarily disconnect observer\n\n\n            module.disconnect.selectObserver();\n\n            if (module.is.single()) {\n              module.verbose('Removing previous user addition');\n              $input.find('option.' + className.addition).remove();\n            }\n\n            $('<option/>').prop('value', escapedValue).addClass(className.addition).html(value).appendTo($input);\n            module.verbose('Adding user addition as an <option>', value);\n            module.observe.select();\n          },\n          userSuggestion: function (value) {\n            var $addition = $menu.children(selector.addition),\n                $existingItem = module.get.item(value),\n                alreadyHasValue = $existingItem && $existingItem.not(selector.addition).length,\n                hasUserSuggestion = $addition.length > 0,\n                html;\n\n            if (settings.useLabels && module.has.maxSelections()) {\n              return;\n            }\n\n            if (value === '' || alreadyHasValue) {\n              $addition.remove();\n              return;\n            }\n\n            if (hasUserSuggestion) {\n              $addition.data(metadata.value, value).data(metadata.text, value).attr('data-' + metadata.value, value).attr('data-' + metadata.text, value).removeClass(className.filtered);\n\n              if (!settings.hideAdditions) {\n                html = settings.templates.addition(module.add.variables(message.addResult, value));\n                $addition.html(html);\n              }\n\n              module.verbose('Replacing user suggestion with new value', $addition);\n            } else {\n              $addition = module.create.userChoice(value);\n              $addition.prependTo($menu);\n              module.verbose('Adding item choice to menu corresponding with user choice addition', $addition);\n            }\n\n            if (!settings.hideAdditions || module.is.allFiltered()) {\n              $addition.addClass(className.selected).siblings().removeClass(className.selected);\n            }\n\n            module.refreshItems();\n          },\n          variables: function (message, term) {\n            var hasCount = message.search('{count}') !== -1,\n                hasMaxCount = message.search('{maxCount}') !== -1,\n                hasTerm = message.search('{term}') !== -1,\n                values,\n                count,\n                query;\n            module.verbose('Adding templated variables to message', message);\n\n            if (hasCount) {\n              count = module.get.selectionCount();\n              message = message.replace('{count}', count);\n            }\n\n            if (hasMaxCount) {\n              count = module.get.selectionCount();\n              message = message.replace('{maxCount}', settings.maxSelections);\n            }\n\n            if (hasTerm) {\n              query = term || module.get.query();\n              message = message.replace('{term}', query);\n            }\n\n            return message;\n          },\n          value: function (addedValue, addedText, $selectedItem) {\n            var currentValue = module.get.values(),\n                newValue;\n\n            if (module.has.value(addedValue)) {\n              module.debug('Value already selected');\n              return;\n            }\n\n            if (addedValue === '') {\n              module.debug('Cannot select blank values from multiselect');\n              return;\n            } // extend current array\n\n\n            if ($.isArray(currentValue)) {\n              newValue = currentValue.concat([addedValue]);\n              newValue = module.get.uniqueArray(newValue);\n            } else {\n              newValue = [addedValue];\n            } // add values\n\n\n            if (module.has.selectInput()) {\n              if (module.can.extendSelect()) {\n                module.debug('Adding value to select', addedValue, newValue, $input);\n                module.add.optionValue(addedValue);\n              }\n            } else {\n              newValue = newValue.join(settings.delimiter);\n              module.debug('Setting hidden input to delimited value', newValue, $input);\n            }\n\n            if (settings.fireOnInit === false && module.is.initialLoad()) {\n              module.verbose('Skipping onadd callback on initial load', settings.onAdd);\n            } else {\n              settings.onAdd.call(element, addedValue, addedText, $selectedItem);\n            }\n\n            module.set.value(newValue, addedValue, addedText, $selectedItem);\n            module.check.maxSelections();\n          }\n        },\n        remove: {\n          active: function () {\n            $module.removeClass(className.active);\n          },\n          activeLabel: function () {\n            $module.find(selector.label).removeClass(className.active);\n          },\n          empty: function () {\n            $module.removeClass(className.empty);\n          },\n          loading: function () {\n            $module.removeClass(className.loading);\n          },\n          initialLoad: function () {\n            initialLoad = false;\n          },\n          upward: function ($currentMenu) {\n            var $element = $currentMenu || $module;\n            $element.removeClass(className.upward);\n          },\n          leftward: function ($currentMenu) {\n            var $element = $currentMenu || $menu;\n            $element.removeClass(className.leftward);\n          },\n          visible: function () {\n            $module.removeClass(className.visible);\n          },\n          activeItem: function () {\n            $item.removeClass(className.active);\n          },\n          filteredItem: function () {\n            if (settings.useLabels && module.has.maxSelections()) {\n              return;\n            }\n\n            if (settings.useLabels && module.is.multiple()) {\n              $item.not('.' + className.active).removeClass(className.filtered);\n            } else {\n              $item.removeClass(className.filtered);\n            }\n\n            module.remove.empty();\n          },\n          optionValue: function (value) {\n            var escapedValue = module.escape.value(value),\n                $option = $input.find('option[value=\"' + module.escape.string(escapedValue) + '\"]'),\n                hasOption = $option.length > 0;\n\n            if (!hasOption || !$option.hasClass(className.addition)) {\n              return;\n            } // temporarily disconnect observer\n\n\n            if (selectObserver) {\n              selectObserver.disconnect();\n              module.verbose('Temporarily disconnecting mutation observer');\n            }\n\n            $option.remove();\n            module.verbose('Removing user addition as an <option>', escapedValue);\n\n            if (selectObserver) {\n              selectObserver.observe($input[0], {\n                childList: true,\n                subtree: true\n              });\n            }\n          },\n          message: function () {\n            $menu.children(selector.message).remove();\n          },\n          searchWidth: function () {\n            $search.css('width', '');\n          },\n          searchTerm: function () {\n            module.verbose('Cleared search term');\n            $search.val('');\n            module.set.filtered();\n          },\n          userAddition: function () {\n            $item.filter(selector.addition).remove();\n          },\n          selected: function (value, $selectedItem) {\n            $selectedItem = settings.allowAdditions ? $selectedItem || module.get.itemWithAdditions(value) : $selectedItem || module.get.item(value);\n\n            if (!$selectedItem) {\n              return false;\n            }\n\n            $selectedItem.each(function () {\n              var $selected = $(this),\n                  selectedText = module.get.choiceText($selected),\n                  selectedValue = module.get.choiceValue($selected, selectedText);\n\n              if (module.is.multiple()) {\n                if (settings.useLabels) {\n                  module.remove.value(selectedValue, selectedText, $selected);\n                  module.remove.label(selectedValue);\n                } else {\n                  module.remove.value(selectedValue, selectedText, $selected);\n\n                  if (module.get.selectionCount() === 0) {\n                    module.set.placeholderText();\n                  } else {\n                    module.set.text(module.add.variables(message.count));\n                  }\n                }\n              } else {\n                module.remove.value(selectedValue, selectedText, $selected);\n              }\n\n              $selected.removeClass(className.filtered).removeClass(className.active);\n\n              if (settings.useLabels) {\n                $selected.removeClass(className.selected);\n              }\n            });\n          },\n          selectedItem: function () {\n            $item.removeClass(className.selected);\n          },\n          value: function (removedValue, removedText, $removedItem) {\n            var values = module.get.values(),\n                newValue;\n\n            if (module.has.selectInput()) {\n              module.verbose('Input is <select> removing selected option', removedValue);\n              newValue = module.remove.arrayValue(removedValue, values);\n              module.remove.optionValue(removedValue);\n            } else {\n              module.verbose('Removing from delimited values', removedValue);\n              newValue = module.remove.arrayValue(removedValue, values);\n              newValue = newValue.join(settings.delimiter);\n            }\n\n            if (settings.fireOnInit === false && module.is.initialLoad()) {\n              module.verbose('No callback on initial load', settings.onRemove);\n            } else {\n              settings.onRemove.call(element, removedValue, removedText, $removedItem);\n            }\n\n            module.set.value(newValue, removedText, $removedItem);\n            module.check.maxSelections();\n          },\n          arrayValue: function (removedValue, values) {\n            if (!$.isArray(values)) {\n              values = [values];\n            }\n\n            values = $.grep(values, function (value) {\n              return removedValue != value;\n            });\n            module.verbose('Removed value from delimited string', removedValue, values);\n            return values;\n          },\n          label: function (value, shouldAnimate) {\n            var $labels = $module.find(selector.label),\n                $removedLabel = $labels.filter('[data-' + metadata.value + '=\"' + module.escape.string(value) + '\"]');\n            module.verbose('Removing label', $removedLabel);\n            $removedLabel.remove();\n          },\n          activeLabels: function ($activeLabels) {\n            $activeLabels = $activeLabels || $module.find(selector.label).filter('.' + className.active);\n            module.verbose('Removing active label selections', $activeLabels);\n            module.remove.labels($activeLabels);\n          },\n          labels: function ($labels) {\n            $labels = $labels || $module.find(selector.label);\n            module.verbose('Removing labels', $labels);\n            $labels.each(function () {\n              var $label = $(this),\n                  value = $label.data(metadata.value),\n                  stringValue = value !== undefined ? String(value) : value,\n                  isUserValue = module.is.userValue(stringValue);\n\n              if (settings.onLabelRemove.call($label, value) === false) {\n                module.debug('Label remove callback cancelled removal');\n                return;\n              }\n\n              module.remove.message();\n\n              if (isUserValue) {\n                module.remove.value(stringValue);\n                module.remove.label(stringValue);\n              } else {\n                // selected will also remove label\n                module.remove.selected(stringValue);\n              }\n            });\n          },\n          tabbable: function () {\n            if (module.is.searchSelection()) {\n              module.debug('Searchable dropdown initialized');\n              $search.removeAttr('tabindex');\n              $menu.removeAttr('tabindex');\n            } else {\n              module.debug('Simple selection dropdown initialized');\n              $module.removeAttr('tabindex');\n              $menu.removeAttr('tabindex');\n            }\n          }\n        },\n        has: {\n          menuSearch: function () {\n            return module.has.search() && $search.closest($menu).length > 0;\n          },\n          search: function () {\n            return $search.length > 0;\n          },\n          sizer: function () {\n            return $sizer.length > 0;\n          },\n          selectInput: function () {\n            return $input.is('select');\n          },\n          minCharacters: function (searchTerm) {\n            if (settings.minCharacters) {\n              searchTerm = searchTerm !== undefined ? String(searchTerm) : String(module.get.query());\n              return searchTerm.length >= settings.minCharacters;\n            }\n\n            return true;\n          },\n          firstLetter: function ($item, letter) {\n            var text, firstLetter;\n\n            if (!$item || $item.length === 0 || typeof letter !== 'string') {\n              return false;\n            }\n\n            text = module.get.choiceText($item, false);\n            letter = letter.toLowerCase();\n            firstLetter = String(text).charAt(0).toLowerCase();\n            return letter == firstLetter;\n          },\n          input: function () {\n            return $input.length > 0;\n          },\n          items: function () {\n            return $item.length > 0;\n          },\n          menu: function () {\n            return $menu.length > 0;\n          },\n          message: function () {\n            return $menu.children(selector.message).length !== 0;\n          },\n          label: function (value) {\n            var escapedValue = module.escape.value(value),\n                $labels = $module.find(selector.label);\n\n            if (settings.ignoreCase) {\n              escapedValue = escapedValue.toLowerCase();\n            }\n\n            return $labels.filter('[data-' + metadata.value + '=\"' + module.escape.string(escapedValue) + '\"]').length > 0;\n          },\n          maxSelections: function () {\n            return settings.maxSelections && module.get.selectionCount() >= settings.maxSelections;\n          },\n          allResultsFiltered: function () {\n            var $normalResults = $item.not(selector.addition);\n            return $normalResults.filter(selector.unselectable).length === $normalResults.length;\n          },\n          userSuggestion: function () {\n            return $menu.children(selector.addition).length > 0;\n          },\n          query: function () {\n            return module.get.query() !== '';\n          },\n          value: function (value) {\n            return settings.ignoreCase ? module.has.valueIgnoringCase(value) : module.has.valueMatchingCase(value);\n          },\n          valueMatchingCase: function (value) {\n            var values = module.get.values(),\n                hasValue = $.isArray(values) ? values && $.inArray(value, values) !== -1 : values == value;\n            return hasValue ? true : false;\n          },\n          valueIgnoringCase: function (value) {\n            var values = module.get.values(),\n                hasValue = false;\n\n            if (!$.isArray(values)) {\n              values = [values];\n            }\n\n            $.each(values, function (index, existingValue) {\n              if (String(value).toLowerCase() == String(existingValue).toLowerCase()) {\n                hasValue = true;\n                return false;\n              }\n            });\n            return hasValue;\n          }\n        },\n        is: {\n          active: function () {\n            return $module.hasClass(className.active);\n          },\n          animatingInward: function () {\n            return $menu.transition('is inward');\n          },\n          animatingOutward: function () {\n            return $menu.transition('is outward');\n          },\n          bubbledLabelClick: function (event) {\n            return $(event.target).is('select, input') && $module.closest('label').length > 0;\n          },\n          bubbledIconClick: function (event) {\n            return $(event.target).closest($icon).length > 0;\n          },\n          alreadySetup: function () {\n            return $module.is('select') && $module.parent(selector.dropdown).data(moduleNamespace) !== undefined && $module.prev().length === 0;\n          },\n          animating: function ($subMenu) {\n            return $subMenu ? $subMenu.transition && $subMenu.transition('is animating') : $menu.transition && $menu.transition('is animating');\n          },\n          leftward: function ($subMenu) {\n            var $selectedMenu = $subMenu || $menu;\n            return $selectedMenu.hasClass(className.leftward);\n          },\n          disabled: function () {\n            return $module.hasClass(className.disabled);\n          },\n          focused: function () {\n            return document.activeElement === $module[0];\n          },\n          focusedOnSearch: function () {\n            return document.activeElement === $search[0];\n          },\n          allFiltered: function () {\n            return (module.is.multiple() || module.has.search()) && !(settings.hideAdditions == false && module.has.userSuggestion()) && !module.has.message() && module.has.allResultsFiltered();\n          },\n          hidden: function ($subMenu) {\n            return !module.is.visible($subMenu);\n          },\n          initialLoad: function () {\n            return initialLoad;\n          },\n          inObject: function (needle, object) {\n            var found = false;\n            $.each(object, function (index, property) {\n              if (property == needle) {\n                found = true;\n                return true;\n              }\n            });\n            return found;\n          },\n          multiple: function () {\n            return $module.hasClass(className.multiple);\n          },\n          remote: function () {\n            return settings.apiSettings && module.can.useAPI();\n          },\n          single: function () {\n            return !module.is.multiple();\n          },\n          selectMutation: function (mutations) {\n            var selectChanged = false;\n            $.each(mutations, function (index, mutation) {\n              if (mutation.target && $(mutation.target).is('select')) {\n                selectChanged = true;\n                return true;\n              }\n            });\n            return selectChanged;\n          },\n          search: function () {\n            return $module.hasClass(className.search);\n          },\n          searchSelection: function () {\n            return module.has.search() && $search.parent(selector.dropdown).length === 1;\n          },\n          selection: function () {\n            return $module.hasClass(className.selection);\n          },\n          userValue: function (value) {\n            return $.inArray(value, module.get.userValues()) !== -1;\n          },\n          upward: function ($menu) {\n            var $element = $menu || $module;\n            return $element.hasClass(className.upward);\n          },\n          visible: function ($subMenu) {\n            return $subMenu ? $subMenu.hasClass(className.visible) : $menu.hasClass(className.visible);\n          },\n          verticallyScrollableContext: function () {\n            var overflowY = $context.get(0) !== window ? $context.css('overflow-y') : false;\n            return overflowY == 'auto' || overflowY == 'scroll';\n          },\n          horizontallyScrollableContext: function () {\n            var overflowX = $context.get(0) !== window ? $context.css('overflow-X') : false;\n            return overflowX == 'auto' || overflowX == 'scroll';\n          }\n        },\n        can: {\n          activate: function ($item) {\n            if (settings.useLabels) {\n              return true;\n            }\n\n            if (!module.has.maxSelections()) {\n              return true;\n            }\n\n            if (module.has.maxSelections() && $item.hasClass(className.active)) {\n              return true;\n            }\n\n            return false;\n          },\n          openDownward: function ($subMenu) {\n            var $currentMenu = $subMenu || $menu,\n                canOpenDownward = true,\n                onScreen = {},\n                calculations;\n            $currentMenu.addClass(className.loading);\n            calculations = {\n              context: {\n                offset: $context.get(0) === window ? {\n                  top: 0,\n                  left: 0\n                } : $context.offset(),\n                scrollTop: $context.scrollTop(),\n                height: $context.outerHeight()\n              },\n              menu: {\n                offset: $currentMenu.offset(),\n                height: $currentMenu.outerHeight()\n              }\n            };\n\n            if (module.is.verticallyScrollableContext()) {\n              calculations.menu.offset.top += calculations.context.scrollTop;\n            }\n\n            onScreen = {\n              above: calculations.context.scrollTop <= calculations.menu.offset.top - calculations.context.offset.top - calculations.menu.height,\n              below: calculations.context.scrollTop + calculations.context.height >= calculations.menu.offset.top - calculations.context.offset.top + calculations.menu.height\n            };\n\n            if (onScreen.below) {\n              module.verbose('Dropdown can fit in context downward', onScreen);\n              canOpenDownward = true;\n            } else if (!onScreen.below && !onScreen.above) {\n              module.verbose('Dropdown cannot fit in either direction, favoring downward', onScreen);\n              canOpenDownward = true;\n            } else {\n              module.verbose('Dropdown cannot fit below, opening upward', onScreen);\n              canOpenDownward = false;\n            }\n\n            $currentMenu.removeClass(className.loading);\n            return canOpenDownward;\n          },\n          openRightward: function ($subMenu) {\n            var $currentMenu = $subMenu || $menu,\n                canOpenRightward = true,\n                isOffscreenRight = false,\n                calculations;\n            $currentMenu.addClass(className.loading);\n            calculations = {\n              context: {\n                offset: $context.get(0) === window ? {\n                  top: 0,\n                  left: 0\n                } : $context.offset(),\n                scrollLeft: $context.scrollLeft(),\n                width: $context.outerWidth()\n              },\n              menu: {\n                offset: $currentMenu.offset(),\n                width: $currentMenu.outerWidth()\n              }\n            };\n\n            if (module.is.horizontallyScrollableContext()) {\n              calculations.menu.offset.left += calculations.context.scrollLeft;\n            }\n\n            isOffscreenRight = calculations.menu.offset.left - calculations.context.offset.left + calculations.menu.width >= calculations.context.scrollLeft + calculations.context.width;\n\n            if (isOffscreenRight) {\n              module.verbose('Dropdown cannot fit in context rightward', isOffscreenRight);\n              canOpenRightward = false;\n            }\n\n            $currentMenu.removeClass(className.loading);\n            return canOpenRightward;\n          },\n          click: function () {\n            return hasTouch || settings.on == 'click';\n          },\n          extendSelect: function () {\n            return settings.allowAdditions || settings.apiSettings;\n          },\n          show: function () {\n            return !module.is.disabled() && (module.has.items() || module.has.message());\n          },\n          useAPI: function () {\n            return $.fn.api !== undefined;\n          }\n        },\n        animate: {\n          show: function (callback, $subMenu) {\n            var $currentMenu = $subMenu || $menu,\n                start = $subMenu ? function () {} : function () {\n              module.hideSubMenus();\n              module.hideOthers();\n              module.set.active();\n            },\n                transition;\n            callback = $.isFunction(callback) ? callback : function () {};\n            module.verbose('Doing menu show animation', $currentMenu);\n            module.set.direction($subMenu);\n            transition = module.get.transition($subMenu);\n\n            if (module.is.selection()) {\n              module.set.scrollPosition(module.get.selectedItem(), true);\n            }\n\n            if (module.is.hidden($currentMenu) || module.is.animating($currentMenu)) {\n              if (transition == 'none') {\n                start();\n                $currentMenu.transition('show');\n                callback.call(element);\n              } else if ($.fn.transition !== undefined && $module.transition('is supported')) {\n                $currentMenu.transition({\n                  animation: transition + ' in',\n                  debug: settings.debug,\n                  verbose: settings.verbose,\n                  duration: settings.duration,\n                  queue: true,\n                  onStart: start,\n                  onComplete: function () {\n                    callback.call(element);\n                  }\n                });\n              } else {\n                module.error(error.noTransition, transition);\n              }\n            }\n          },\n          hide: function (callback, $subMenu) {\n            var $currentMenu = $subMenu || $menu,\n                duration = $subMenu ? settings.duration * 0.9 : settings.duration,\n                start = $subMenu ? function () {} : function () {\n              if (module.can.click()) {\n                module.unbind.intent();\n              }\n\n              module.remove.active();\n            },\n                transition = module.get.transition($subMenu);\n            callback = $.isFunction(callback) ? callback : function () {};\n\n            if (module.is.visible($currentMenu) || module.is.animating($currentMenu)) {\n              module.verbose('Doing menu hide animation', $currentMenu);\n\n              if (transition == 'none') {\n                start();\n                $currentMenu.transition('hide');\n                callback.call(element);\n              } else if ($.fn.transition !== undefined && $module.transition('is supported')) {\n                $currentMenu.transition({\n                  animation: transition + ' out',\n                  duration: settings.duration,\n                  debug: settings.debug,\n                  verbose: settings.verbose,\n                  queue: false,\n                  onStart: start,\n                  onComplete: function () {\n                    callback.call(element);\n                  }\n                });\n              } else {\n                module.error(error.transition);\n              }\n            }\n          }\n        },\n        hideAndClear: function () {\n          module.remove.searchTerm();\n\n          if (module.has.maxSelections()) {\n            return;\n          }\n\n          if (module.has.search()) {\n            module.hide(function () {\n              module.remove.filteredItem();\n            });\n          } else {\n            module.hide();\n          }\n        },\n        delay: {\n          show: function () {\n            module.verbose('Delaying show event to ensure user intent');\n            clearTimeout(module.timer);\n            module.timer = setTimeout(module.show, settings.delay.show);\n          },\n          hide: function () {\n            module.verbose('Delaying hide event to ensure user intent');\n            clearTimeout(module.timer);\n            module.timer = setTimeout(module.hide, settings.delay.hide);\n          }\n        },\n        escape: {\n          value: function (value) {\n            var multipleValues = $.isArray(value),\n                stringValue = typeof value === 'string',\n                isUnparsable = !stringValue && !multipleValues,\n                hasQuotes = stringValue && value.search(regExp.quote) !== -1,\n                values = [];\n\n            if (isUnparsable || !hasQuotes) {\n              return value;\n            }\n\n            module.debug('Encoding quote values for use in select', value);\n\n            if (multipleValues) {\n              $.each(value, function (index, value) {\n                values.push(value.replace(regExp.quote, '&quot;'));\n              });\n              return values;\n            }\n\n            return value.replace(regExp.quote, '&quot;');\n          },\n          string: function (text) {\n            text = String(text);\n            return text.replace(regExp.escape, '\\\\$&');\n          }\n        },\n        setting: function (name, value) {\n          module.debug('Changing setting', name, value);\n\n          if ($.isPlainObject(name)) {\n            $.extend(true, settings, name);\n          } else if (value !== undefined) {\n            if ($.isPlainObject(settings[name])) {\n              $.extend(true, settings[name], value);\n            } else {\n              settings[name] = value;\n            }\n          } else {\n            return settings[name];\n          }\n        },\n        internal: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, module, name);\n          } else if (value !== undefined) {\n            module[name] = value;\n          } else {\n            return module[name];\n          }\n        },\n        debug: function () {\n          if (!settings.silent && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function () {\n          if (!settings.silent && settings.verbose && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function () {\n          if (!settings.silent) {\n            module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n            module.error.apply(console, arguments);\n          }\n        },\n        performance: {\n          log: function (message) {\n            var currentTime, executionTime, previousTime;\n\n            if (settings.performance) {\n              currentTime = new Date().getTime();\n              previousTime = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time = currentTime;\n              performance.push({\n                'Name': message[0],\n                'Arguments': [].slice.call(message, 1) || '',\n                'Element': element,\n                'Execution Time': executionTime\n              });\n            }\n\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function () {\n            var title = settings.name + ':',\n                totalTime = 0;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function (index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n\n            if (moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n\n            if ((console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n\n              if (console.table) {\n                console.table(performance);\n              } else {\n                $.each(performance, function (index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time'] + 'ms');\n                });\n              }\n\n              console.groupEnd();\n            }\n\n            performance = [];\n          }\n        },\n        invoke: function (query, passedArguments, context) {\n          var object = instance,\n              maxDepth,\n              found,\n              response;\n          passedArguments = passedArguments || queryArguments;\n          context = element || context;\n\n          if (typeof query == 'string' && object !== undefined) {\n            query = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function (depth, value) {\n              var camelCaseValue = depth != maxDepth ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1) : query;\n\n              if ($.isPlainObject(object[camelCaseValue]) && depth != maxDepth) {\n                object = object[camelCaseValue];\n              } else if (object[camelCaseValue] !== undefined) {\n                found = object[camelCaseValue];\n                return false;\n              } else if ($.isPlainObject(object[value]) && depth != maxDepth) {\n                object = object[value];\n              } else if (object[value] !== undefined) {\n                found = object[value];\n                return false;\n              } else {\n                module.error(error.method, query);\n                return false;\n              }\n            });\n          }\n\n          if ($.isFunction(found)) {\n            response = found.apply(context, passedArguments);\n          } else if (found !== undefined) {\n            response = found;\n          }\n\n          if ($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          } else if (returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          } else if (response !== undefined) {\n            returnedValue = response;\n          }\n\n          return found;\n        }\n      };\n\n      if (methodInvoked) {\n        if (instance === undefined) {\n          module.initialize();\n        }\n\n        module.invoke(query);\n      } else {\n        if (instance !== undefined) {\n          instance.invoke('destroy');\n        }\n\n        module.initialize();\n      }\n    });\n    return returnedValue !== undefined ? returnedValue : $allModules;\n  };\n\n  $.fn.dropdown.settings = {\n    silent: false,\n    debug: false,\n    verbose: false,\n    performance: true,\n    on: 'click',\n    // what event should show menu action on item selection\n    action: 'activate',\n    // action on item selection (nothing, activate, select, combo, hide, function(){})\n    values: false,\n    // specify values to use for dropdown\n    apiSettings: false,\n    selectOnKeydown: true,\n    // Whether selection should occur automatically when keyboard shortcuts used\n    minCharacters: 0,\n    // Minimum characters required to trigger API call\n    filterRemoteData: false,\n    // Whether API results should be filtered after being returned for query term\n    saveRemoteData: true,\n    // Whether remote name/value pairs should be stored in sessionStorage to allow remote data to be restored on page refresh\n    throttle: 200,\n    // How long to wait after last user input to search remotely\n    context: window,\n    // Context to use when determining if on screen\n    direction: 'auto',\n    // Whether dropdown should always open in one direction\n    keepOnScreen: true,\n    // Whether dropdown should check whether it is on screen before showing\n    match: 'both',\n    // what to match against with search selection (both, text, or label)\n    fullTextSearch: false,\n    // search anywhere in value (set to 'exact' to require exact matches)\n    placeholder: 'auto',\n    // whether to convert blank <select> values to placeholder text\n    preserveHTML: true,\n    // preserve html when selecting value\n    sortSelect: false,\n    // sort selection on init\n    forceSelection: true,\n    // force a choice on blur with search selection\n    allowAdditions: false,\n    // whether multiple select should allow user added values\n    ignoreCase: false,\n    // whether to consider values not matching in case to be the same\n    hideAdditions: true,\n    // whether or not to hide special message prompting a user they can enter a value\n    maxSelections: false,\n    // When set to a number limits the number of selections to this count\n    useLabels: true,\n    // whether multiple select should filter currently active selections from choices\n    delimiter: ',',\n    // when multiselect uses normal <input> the values will be delimited with this character\n    showOnFocus: true,\n    // show menu on focus\n    allowReselection: false,\n    // whether current value should trigger callbacks when reselected\n    allowTab: true,\n    // add tabindex to element\n    allowCategorySelection: false,\n    // allow elements with sub-menus to be selected\n    fireOnInit: false,\n    // Whether callbacks should fire when initializing dropdown values\n    transition: 'auto',\n    // auto transition will slide down or up based on direction\n    duration: 200,\n    // duration of transition\n    glyphWidth: 1.037,\n    // widest glyph width in em (W is 1.037 em) used to calculate multiselect input width\n    // label settings on multi-select\n    label: {\n      transition: 'scale',\n      duration: 200,\n      variation: false\n    },\n    // delay before event\n    delay: {\n      hide: 300,\n      show: 200,\n      search: 20,\n      touch: 50\n    },\n\n    /* Callbacks */\n    onChange: function (value, text, $selected) {},\n    onAdd: function (value, text, $selected) {},\n    onRemove: function (value, text, $selected) {},\n    onLabelSelect: function ($selectedLabels) {},\n    onLabelCreate: function (value, text) {\n      return $(this);\n    },\n    onLabelRemove: function (value) {\n      return true;\n    },\n    onNoResults: function (searchTerm) {\n      return true;\n    },\n    onShow: function () {},\n    onHide: function () {},\n\n    /* Component */\n    name: 'Dropdown',\n    namespace: 'dropdown',\n    message: {\n      addResult: 'Add <b>{term}</b>',\n      count: '{count} selected',\n      maxSelections: 'Max {maxCount} selections',\n      noResults: 'No results found.',\n      serverError: 'There was an error contacting the server'\n    },\n    error: {\n      action: 'You called a dropdown action that was not defined',\n      alreadySetup: 'Once a select has been initialized behaviors must be called on the created ui dropdown',\n      labels: 'Allowing user additions currently requires the use of labels.',\n      missingMultiple: '<select> requires multiple property to be set to correctly preserve multiple values',\n      method: 'The method you called is not defined.',\n      noAPI: 'The API module is required to load resources remotely',\n      noStorage: 'Saving remote data requires session storage',\n      noTransition: 'This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>'\n    },\n    regExp: {\n      escape: /[-[\\]{}()*+?.,\\\\^$|#\\s]/g,\n      quote: /\"/g\n    },\n    metadata: {\n      defaultText: 'defaultText',\n      defaultValue: 'defaultValue',\n      placeholderText: 'placeholder',\n      text: 'text',\n      value: 'value'\n    },\n    // property names for remote query\n    fields: {\n      remoteValues: 'results',\n      // grouping for api results\n      values: 'values',\n      // grouping for all dropdown values\n      disabled: 'disabled',\n      // whether value should be disabled\n      name: 'name',\n      // displayed dropdown text\n      value: 'value',\n      // actual dropdown value\n      text: 'text' // displayed text when selected\n\n    },\n    keys: {\n      backspace: 8,\n      delimiter: 188,\n      // comma\n      deleteKey: 46,\n      enter: 13,\n      escape: 27,\n      pageUp: 33,\n      pageDown: 34,\n      leftArrow: 37,\n      upArrow: 38,\n      rightArrow: 39,\n      downArrow: 40\n    },\n    selector: {\n      addition: '.addition',\n      dropdown: '.ui.dropdown',\n      hidden: '.hidden',\n      icon: '> .dropdown.icon',\n      input: '> input[type=\"hidden\"], > select',\n      item: '.item',\n      label: '> .label',\n      remove: '> .label > .delete.icon',\n      siblingLabel: '.label',\n      menu: '.menu',\n      message: '.message',\n      menuIcon: '.dropdown.icon',\n      search: 'input.search, .menu > .search > input, .menu input.search',\n      sizer: '> input.sizer',\n      text: '> .text:not(.icon)',\n      unselectable: '.disabled, .filtered'\n    },\n    className: {\n      active: 'active',\n      addition: 'addition',\n      animating: 'animating',\n      disabled: 'disabled',\n      empty: 'empty',\n      dropdown: 'ui dropdown',\n      filtered: 'filtered',\n      hidden: 'hidden transition',\n      item: 'item',\n      label: 'ui label',\n      loading: 'loading',\n      menu: 'menu',\n      message: 'message',\n      multiple: 'multiple',\n      placeholder: 'default',\n      sizer: 'sizer',\n      search: 'search',\n      selected: 'selected',\n      selection: 'selection',\n      upward: 'upward',\n      leftward: 'left',\n      visible: 'visible'\n    }\n  };\n  /* Templates */\n\n  $.fn.dropdown.settings.templates = {\n    // generates dropdown from select values\n    dropdown: function (select) {\n      var placeholder = select.placeholder || false,\n          values = select.values || {},\n          html = '';\n      html += '<i class=\"dropdown icon\"></i>';\n\n      if (select.placeholder) {\n        html += '<div class=\"default text\">' + placeholder + '</div>';\n      } else {\n        html += '<div class=\"text\"></div>';\n      }\n\n      html += '<div class=\"menu\">';\n      $.each(select.values, function (index, option) {\n        html += option.disabled ? '<div class=\"disabled item\" data-value=\"' + option.value + '\">' + option.name + '</div>' : '<div class=\"item\" data-value=\"' + option.value + '\">' + option.name + '</div>';\n      });\n      html += '</div>';\n      return html;\n    },\n    // generates just menu from select\n    menu: function (response, fields) {\n      var values = response[fields.values] || {},\n          html = '';\n      $.each(values, function (index, option) {\n        var maybeText = option[fields.text] ? 'data-text=\"' + option[fields.text] + '\"' : '',\n            maybeDisabled = option[fields.disabled] ? 'disabled ' : '';\n        html += '<div class=\"' + maybeDisabled + 'item\" data-value=\"' + option[fields.value] + '\"' + maybeText + '>';\n        html += option[fields.name];\n        html += '</div>';\n      });\n      return html;\n    },\n    // generates label for multiselect\n    label: function (value, text) {\n      return text + '<i class=\"delete icon\"></i>';\n    },\n    // generates messages like \"No results\"\n    message: function (message) {\n      return message;\n    },\n    // generates user addition to selection menu\n    addition: function (choice) {\n      return choice;\n    }\n  };\n})(jQuery, window, document);","map":{"version":3,"sources":["Application/ticketsalad/client/semantic-ui/definitions/modules/dropdown.js"],"names":["$","window","document","undefined","Math","self","Function","fn","dropdown","parameters","$allModules","$document","moduleSelector","selector","hasTouch","documentElement","time","Date","getTime","performance","query","arguments","methodInvoked","queryArguments","slice","call","returnedValue","each","elementIndex","settings","isPlainObject","extend","className","message","fields","keys","metadata","namespace","regExp","error","templates","eventNamespace","moduleNamespace","$module","$context","context","$text","find","text","$search","search","$sizer","sizer","$input","input","$icon","icon","$combo","prev","length","$menu","children","menu","$item","item","activated","itemActivated","internalChange","element","instance","data","initialLoad","pageLostFocus","willRefocus","elementNamespace","id","selectObserver","menuObserver","module","initialize","debug","is","alreadySetup","setup","reference","layout","values","change","refreshData","save","defaults","restore","selected","create","bind","events","observeChanges","instantiate","verbose","destroy","remove","tabbable","off","removeData","disconnect","MutationObserver","event","select","mutation","observe","has","childList","subtree","random","toString","substr","userChoice","$userChoices","$userChoice","isUserValue","html","get","userValues","isArray","index","value","addition","add","variables","addResult","attr","addClass","hideAdditions","hidden","userLabels","label","appendTo","insertAfter","minCharacters","filter","hide","firstUnfiltered","selectedItem","not","unselectable","eq","nextAvailable","$selected","$nextAvailable","nextAll","$prevAvailable","prevAll","hasNext","api","apiSettings","urlData","on","returnedObject","prop","insertBefore","multiple","searchSelection","allowTab","set","selectValues","parent","closest","selection","hasClass","missingMultiple","disabled","removeAttr","detach","prependTo","refresh","$firstModules","$lastModules","refreshSelectors","refreshItems","clearData","defaultText","defaultValue","placeholderText","toggle","active","show","callback","isFunction","can","remote","queryRemote","maxSelections","allResultsFiltered","allFiltered","onShow","animate","click","intent","menuSearch","focusSearch","visible","animatingOutward","onHide","hideOthers","hideMenu","transition","hideSubMenus","$subMenus","touchEvents","keyboardEvents","inputEvents","mouseEvents","single","test","mouseenter","keydown","inputEvent","mousedown","mouseup","focus","blur","delay","mouseleave","touch","unbind","searchTerm","afterFiltered","filterActive","activeItem","onNoResults","allowAdditions","empty","noResults","userSuggestion","focusedOnSearch","useLabels","useAPI","filterRemoteData","filterItems","noAPI","errorDuration","cache","throttle","onError","serverError","onFailure","onSuccess","response","remoteValues","results","escapedTerm","escape","string","beginsWithRegExp","RegExp","$choice","match","String","choiceText","push","fullTextSearch","exactSearch","fuzzySearch","choiceValue","filteredItem","filtered","term","termLength","queryLength","toLowerCase","characterIndex","nextCharacterIndex","queryCharacter","charCodeAt","indexOf","skipHandler","forceSelection","$currentlySelected","$activeItem","$selectedItem","hasSelected","clear","showOnFocus","activeElement","activeLabel","$target","target","clearTimeout","timer","setTimeout","$label","$labels","$activeLabels","$nextActive","$prevActive","$range","nextUntil","prevUntil","shiftKey","removeClass","ctrlKey","toggleClass","onLabelSelect","apply","activeLabels","toggleBehavior","bubbledLabelClick","bubbledIconClick","determine","eventOnElement","preventDefault","type","stopPropagation","eventInModule","mutations","isSelectMutation","addedNodes","$addedNode","$removedNode","removedNodes","$changedNodes","isUserAddition","isMessage","$subMenu","$otherMenus","siblings","hasSubMenu","isBubbledEvent","itemTimer","skipRefocus","allowCategorySelection","userAddition","scrollPosition","selectAction","pressedKey","which","isShortcutKey","inObject","$activeLabel","activeValue","labelIndex","labelCount","hasActiveLabel","hasMultipleActive","isFirstLabel","isLastLabel","isSearch","isFocusedOnSearch","isFocused","focused","caretAtStart","caretPosition","$nextLabel","leftArrow","last","siblingLabel","end","rightArrow","first","next","deleteKey","backspace","$visibleItems","addBack","$parentMenu","inVisibleMenu","animating","hasSelectedItem","selectedIsSelectable","delimiterPressed","delimiter","isAdditionWithoutMenu","enter","$nextItem","isSubMenuItem","newIndex","upArrow","selectOnKeydown","downArrow","pageUp","scrollPage","pageDown","selectedLetter","fromCharCode","trigger","createEvent","inputElement","initEvent","dispatchEvent","action","inDocument","inModule","inVisibleDOM","body","contains","notOnLabel","notInMenu","nothing","activate","hideAndClear","combo","placeholder","trim","val","searchWidth","ceil","width","selectionCount","count","upward","grep","uniqueArray","array","inArray","range","rangeLength","selectionStart","createRange","moveStart","isEmptyMultiselect","selectInput","split","name","read","remoteData","preserveHTML","clone","menuIcon","oninput","onpropertychange","$option","sortSelect","sort","a","b","itemWithAdditions","$items","$userItems","hasUserItems","strict","shouldSearch","isMultiple","optionText","optionValue","check","labels","saveRemoteData","Storage","noStorage","sessionStorage","getItem","setItem","clearValue","direction","$currentItem","menuHeight","outerHeight","currentScroll","scrollTop","itemHeight","itemsPerPage","floor","maxScroll","newScroll","$selectableItem","isWithinRange","$nextSelectedItem","isSearchMultiple","searchValue","hasSearchValue","valueIsSet","glyphWidth","css","loading","partialSearch","forceScroll","edgeTolerance","hasActive","offset","itemOffset","menuOffset","menuScroll","abovePage","belowPage","position","top","height","searchText","letter","alreadySelectedLetter","firstLetter","$nextValue","openDownward","leftward","openRightward","$currentMenu","$element","escapedValue","hasInput","currentValue","stringValue","newValue","allowReselection","extendSelect","fireOnInit","onChange","exactly","$userSelectedItem","selectedText","selectedValue","isFiltered","isActive","shouldAnimate","$next","ignoreCase","onLabelCreate","variation","duration","$message","hasOption","$addition","$existingItem","alreadyHasValue","hasUserSuggestion","hasCount","hasMaxCount","hasTerm","replace","addedValue","addedText","concat","join","onAdd","removedValue","removedText","$removedItem","arrayValue","onRemove","$removedLabel","userValue","onLabelRemove","charAt","items","$normalResults","valueIgnoringCase","valueMatchingCase","hasValue","existingValue","animatingInward","$selectedMenu","needle","object","found","property","selectMutation","selectChanged","verticallyScrollableContext","overflowY","horizontallyScrollableContext","overflowX","canOpenDownward","onScreen","calculations","left","above","below","canOpenRightward","isOffscreenRight","scrollLeft","outerWidth","start","animation","queue","onStart","onComplete","noTransition","multipleValues","isUnparsable","hasQuotes","quote","setting","internal","silent","log","prototype","console","info","currentTime","executionTime","previousTime","display","title","totalTime","group","table","groupCollapsed","groupEnd","invoke","passedArguments","maxDepth","depth","camelCaseValue","toUpperCase","method","keepOnScreen","$selectedLabels","option","maybeText","maybeDisabled","choice","jQuery"],"mappings":"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","file":"Application/ticketsalad/client/semantic-ui/definitions/modules/dropdown.js.map","sourcesContent":["/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.3.1\n*/\n/*!\n * # Semantic UI - Dropdown\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n\n;(function ($, window, document, undefined) {\n\n'use strict';\n\nwindow = (typeof window != 'undefined' && window.Math == Math)\n  ? window\n  : (typeof self != 'undefined' && self.Math == Math)\n    ? self\n    : Function('return this')()\n;\n\n$.fn.dropdown = function(parameters) {\n  var\n    $allModules    = $(this),\n    $document      = $(document),\n\n    moduleSelector = $allModules.selector || '',\n\n    hasTouch       = ('ontouchstart' in document.documentElement),\n    time           = new Date().getTime(),\n    performance    = [],\n\n    query          = arguments[0],\n    methodInvoked  = (typeof query == 'string'),\n    queryArguments = [].slice.call(arguments, 1),\n    returnedValue\n  ;\n\n  $allModules\n    .each(function(elementIndex) {\n      var\n        settings          = ( $.isPlainObject(parameters) )\n          ? $.extend(true, {}, $.fn.dropdown.settings, parameters)\n          : $.extend({}, $.fn.dropdown.settings),\n\n        className       = settings.className,\n        message         = settings.message,\n        fields          = settings.fields,\n        keys            = settings.keys,\n        metadata        = settings.metadata,\n        namespace       = settings.namespace,\n        regExp          = settings.regExp,\n        selector        = settings.selector,\n        error           = settings.error,\n        templates       = settings.templates,\n\n        eventNamespace  = '.' + namespace,\n        moduleNamespace = 'module-' + namespace,\n\n        $module         = $(this),\n        $context        = $(settings.context),\n        $text           = $module.find(selector.text),\n        $search         = $module.find(selector.search),\n        $sizer          = $module.find(selector.sizer),\n        $input          = $module.find(selector.input),\n        $icon           = $module.find(selector.icon),\n\n        $combo = ($module.prev().find(selector.text).length > 0)\n          ? $module.prev().find(selector.text)\n          : $module.prev(),\n\n        $menu           = $module.children(selector.menu),\n        $item           = $menu.find(selector.item),\n\n        activated       = false,\n        itemActivated   = false,\n        internalChange  = false,\n        element         = this,\n        instance        = $module.data(moduleNamespace),\n\n        initialLoad,\n        pageLostFocus,\n        willRefocus,\n        elementNamespace,\n        id,\n        selectObserver,\n        menuObserver,\n        module\n      ;\n\n      module = {\n\n        initialize: function() {\n          module.debug('Initializing dropdown', settings);\n\n          if( module.is.alreadySetup() ) {\n            module.setup.reference();\n          }\n          else {\n\n            module.setup.layout();\n\n            if(settings.values) {\n              module.change.values(settings.values);\n            }\n\n            module.refreshData();\n\n            module.save.defaults();\n            module.restore.selected();\n\n            module.create.id();\n            module.bind.events();\n\n            module.observeChanges();\n            module.instantiate();\n          }\n\n        },\n\n        instantiate: function() {\n          module.verbose('Storing instance of dropdown', module);\n          instance = module;\n          $module\n            .data(moduleNamespace, module)\n          ;\n        },\n\n        destroy: function() {\n          module.verbose('Destroying previous dropdown', $module);\n          module.remove.tabbable();\n          $module\n            .off(eventNamespace)\n            .removeData(moduleNamespace)\n          ;\n          $menu\n            .off(eventNamespace)\n          ;\n          $document\n            .off(elementNamespace)\n          ;\n          module.disconnect.menuObserver();\n          module.disconnect.selectObserver();\n        },\n\n        observeChanges: function() {\n          if('MutationObserver' in window) {\n            selectObserver = new MutationObserver(module.event.select.mutation);\n            menuObserver   = new MutationObserver(module.event.menu.mutation);\n            module.debug('Setting up mutation observer', selectObserver, menuObserver);\n            module.observe.select();\n            module.observe.menu();\n          }\n        },\n\n        disconnect: {\n          menuObserver: function() {\n            if(menuObserver) {\n              menuObserver.disconnect();\n            }\n          },\n          selectObserver: function() {\n            if(selectObserver) {\n              selectObserver.disconnect();\n            }\n          }\n        },\n        observe: {\n          select: function() {\n            if(module.has.input()) {\n              selectObserver.observe($module[0], {\n                childList : true,\n                subtree   : true\n              });\n            }\n          },\n          menu: function() {\n            if(module.has.menu()) {\n              menuObserver.observe($menu[0], {\n                childList : true,\n                subtree   : true\n              });\n            }\n          }\n        },\n\n        create: {\n          id: function() {\n            id = (Math.random().toString(16) + '000000000').substr(2, 8);\n            elementNamespace = '.' + id;\n            module.verbose('Creating unique id for element', id);\n          },\n          userChoice: function(values) {\n            var\n              $userChoices,\n              $userChoice,\n              isUserValue,\n              html\n            ;\n            values = values || module.get.userValues();\n            if(!values) {\n              return false;\n            }\n            values = $.isArray(values)\n              ? values\n              : [values]\n            ;\n            $.each(values, function(index, value) {\n              if(module.get.item(value) === false) {\n                html         = settings.templates.addition( module.add.variables(message.addResult, value) );\n                $userChoice  = $('<div />')\n                  .html(html)\n                  .attr('data-' + metadata.value, value)\n                  .attr('data-' + metadata.text, value)\n                  .addClass(className.addition)\n                  .addClass(className.item)\n                ;\n                if(settings.hideAdditions) {\n                  $userChoice.addClass(className.hidden);\n                }\n                $userChoices = ($userChoices === undefined)\n                  ? $userChoice\n                  : $userChoices.add($userChoice)\n                ;\n                module.verbose('Creating user choices for value', value, $userChoice);\n              }\n            });\n            return $userChoices;\n          },\n          userLabels: function(value) {\n            var\n              userValues = module.get.userValues()\n            ;\n            if(userValues) {\n              module.debug('Adding user labels', userValues);\n              $.each(userValues, function(index, value) {\n                module.verbose('Adding custom user value');\n                module.add.label(value, value);\n              });\n            }\n          },\n          menu: function() {\n            $menu = $('<div />')\n              .addClass(className.menu)\n              .appendTo($module)\n            ;\n          },\n          sizer: function() {\n            $sizer = $('<span />')\n              .addClass(className.sizer)\n              .insertAfter($search)\n            ;\n          }\n        },\n\n        search: function(query) {\n          query = (query !== undefined)\n            ? query\n            : module.get.query()\n          ;\n          module.verbose('Searching for query', query);\n          if(module.has.minCharacters(query)) {\n            module.filter(query);\n          }\n          else {\n            module.hide();\n          }\n        },\n\n        select: {\n          firstUnfiltered: function() {\n            module.verbose('Selecting first non-filtered element');\n            module.remove.selectedItem();\n            $item\n              .not(selector.unselectable)\n              .not(selector.addition + selector.hidden)\n                .eq(0)\n                .addClass(className.selected)\n            ;\n          },\n          nextAvailable: function($selected) {\n            $selected = $selected.eq(0);\n            var\n              $nextAvailable = $selected.nextAll(selector.item).not(selector.unselectable).eq(0),\n              $prevAvailable = $selected.prevAll(selector.item).not(selector.unselectable).eq(0),\n              hasNext        = ($nextAvailable.length > 0)\n            ;\n            if(hasNext) {\n              module.verbose('Moving selection to', $nextAvailable);\n              $nextAvailable.addClass(className.selected);\n            }\n            else {\n              module.verbose('Moving selection to', $prevAvailable);\n              $prevAvailable.addClass(className.selected);\n            }\n          }\n        },\n\n        setup: {\n          api: function() {\n            var\n              apiSettings = {\n                debug   : settings.debug,\n                urlData : {\n                  value : module.get.value(),\n                  query : module.get.query()\n                },\n                on    : false\n              }\n            ;\n            module.verbose('First request, initializing API');\n            $module\n              .api(apiSettings)\n            ;\n          },\n          layout: function() {\n            if( $module.is('select') ) {\n              module.setup.select();\n              module.setup.returnedObject();\n            }\n            if( !module.has.menu() ) {\n              module.create.menu();\n            }\n            if( module.is.search() && !module.has.search() ) {\n              module.verbose('Adding search input');\n              $search = $('<input />')\n                .addClass(className.search)\n                .prop('autocomplete', 'off')\n                .insertBefore($text)\n              ;\n            }\n            if( module.is.multiple() && module.is.searchSelection() && !module.has.sizer()) {\n              module.create.sizer();\n            }\n            if(settings.allowTab) {\n              module.set.tabbable();\n            }\n          },\n          select: function() {\n            var\n              selectValues  = module.get.selectValues()\n            ;\n            module.debug('Dropdown initialized on a select', selectValues);\n            if( $module.is('select') ) {\n              $input = $module;\n            }\n            // see if select is placed correctly already\n            if($input.parent(selector.dropdown).length > 0) {\n              module.debug('UI dropdown already exists. Creating dropdown menu only');\n              $module = $input.closest(selector.dropdown);\n              if( !module.has.menu() ) {\n                module.create.menu();\n              }\n              $menu = $module.children(selector.menu);\n              module.setup.menu(selectValues);\n            }\n            else {\n              module.debug('Creating entire dropdown from select');\n              $module = $('<div />')\n                .attr('class', $input.attr('class') )\n                .addClass(className.selection)\n                .addClass(className.dropdown)\n                .html( templates.dropdown(selectValues) )\n                .insertBefore($input)\n              ;\n              if($input.hasClass(className.multiple) && $input.prop('multiple') === false) {\n                module.error(error.missingMultiple);\n                $input.prop('multiple', true);\n              }\n              if($input.is('[multiple]')) {\n                module.set.multiple();\n              }\n              if ($input.prop('disabled')) {\n                module.debug('Disabling dropdown');\n                $module.addClass(className.disabled);\n              }\n              $input\n                .removeAttr('class')\n                .detach()\n                .prependTo($module)\n              ;\n            }\n            module.refresh();\n          },\n          menu: function(values) {\n            $menu.html( templates.menu(values, fields));\n            $item = $menu.find(selector.item);\n          },\n          reference: function() {\n            module.debug('Dropdown behavior was called on select, replacing with closest dropdown');\n            // replace module reference\n            $module  = $module.parent(selector.dropdown);\n            instance = $module.data(moduleNamespace);\n            element  = $module.get(0);\n            module.refresh();\n            module.setup.returnedObject();\n          },\n          returnedObject: function() {\n            var\n              $firstModules = $allModules.slice(0, elementIndex),\n              $lastModules  = $allModules.slice(elementIndex + 1)\n            ;\n            // adjust all modules to use correct reference\n            $allModules = $firstModules.add($module).add($lastModules);\n          }\n        },\n\n        refresh: function() {\n          module.refreshSelectors();\n          module.refreshData();\n        },\n\n        refreshItems: function() {\n          $item = $menu.find(selector.item);\n        },\n\n        refreshSelectors: function() {\n          module.verbose('Refreshing selector cache');\n          $text   = $module.find(selector.text);\n          $search = $module.find(selector.search);\n          $input  = $module.find(selector.input);\n          $icon   = $module.find(selector.icon);\n          $combo  = ($module.prev().find(selector.text).length > 0)\n            ? $module.prev().find(selector.text)\n            : $module.prev()\n          ;\n          $menu    = $module.children(selector.menu);\n          $item    = $menu.find(selector.item);\n        },\n\n        refreshData: function() {\n          module.verbose('Refreshing cached metadata');\n          $item\n            .removeData(metadata.text)\n            .removeData(metadata.value)\n          ;\n        },\n\n        clearData: function() {\n          module.verbose('Clearing metadata');\n          $item\n            .removeData(metadata.text)\n            .removeData(metadata.value)\n          ;\n          $module\n            .removeData(metadata.defaultText)\n            .removeData(metadata.defaultValue)\n            .removeData(metadata.placeholderText)\n          ;\n        },\n\n        toggle: function() {\n          module.verbose('Toggling menu visibility');\n          if( !module.is.active() ) {\n            module.show();\n          }\n          else {\n            module.hide();\n          }\n        },\n\n        show: function(callback) {\n          callback = $.isFunction(callback)\n            ? callback\n            : function(){}\n          ;\n          if(!module.can.show() && module.is.remote()) {\n            module.debug('No API results retrieved, searching before show');\n            module.queryRemote(module.get.query(), module.show);\n          }\n          if( module.can.show() && !module.is.active() ) {\n            module.debug('Showing dropdown');\n            if(module.has.message() && !(module.has.maxSelections() || module.has.allResultsFiltered()) ) {\n              module.remove.message();\n            }\n            if(module.is.allFiltered()) {\n              return true;\n            }\n            if(settings.onShow.call(element) !== false) {\n              module.animate.show(function() {\n                if( module.can.click() ) {\n                  module.bind.intent();\n                }\n                if(module.has.menuSearch()) {\n                  module.focusSearch();\n                }\n                module.set.visible();\n                callback.call(element);\n              });\n            }\n          }\n        },\n\n        hide: function(callback) {\n          callback = $.isFunction(callback)\n            ? callback\n            : function(){}\n          ;\n          if( module.is.active() && !module.is.animatingOutward() ) {\n            module.debug('Hiding dropdown');\n            if(settings.onHide.call(element) !== false) {\n              module.animate.hide(function() {\n                module.remove.visible();\n                callback.call(element);\n              });\n            }\n          }\n        },\n\n        hideOthers: function() {\n          module.verbose('Finding other dropdowns to hide');\n          $allModules\n            .not($module)\n              .has(selector.menu + '.' + className.visible)\n                .dropdown('hide')\n          ;\n        },\n\n        hideMenu: function() {\n          module.verbose('Hiding menu  instantaneously');\n          module.remove.active();\n          module.remove.visible();\n          $menu.transition('hide');\n        },\n\n        hideSubMenus: function() {\n          var\n            $subMenus = $menu.children(selector.item).find(selector.menu)\n          ;\n          module.verbose('Hiding sub menus', $subMenus);\n          $subMenus.transition('hide');\n        },\n\n        bind: {\n          events: function() {\n            if(hasTouch) {\n              module.bind.touchEvents();\n            }\n            module.bind.keyboardEvents();\n            module.bind.inputEvents();\n            module.bind.mouseEvents();\n          },\n          touchEvents: function() {\n            module.debug('Touch device detected binding additional touch events');\n            if( module.is.searchSelection() ) {\n              // do nothing special yet\n            }\n            else if( module.is.single() ) {\n              $module\n                .on('touchstart' + eventNamespace, module.event.test.toggle)\n              ;\n            }\n            $menu\n              .on('touchstart' + eventNamespace, selector.item, module.event.item.mouseenter)\n            ;\n          },\n          keyboardEvents: function() {\n            module.verbose('Binding keyboard events');\n            $module\n              .on('keydown' + eventNamespace, module.event.keydown)\n            ;\n            if( module.has.search() ) {\n              $module\n                .on(module.get.inputEvent() + eventNamespace, selector.search, module.event.input)\n              ;\n            }\n            if( module.is.multiple() ) {\n              $document\n                .on('keydown' + elementNamespace, module.event.document.keydown)\n              ;\n            }\n          },\n          inputEvents: function() {\n            module.verbose('Binding input change events');\n            $module\n              .on('change' + eventNamespace, selector.input, module.event.change)\n            ;\n          },\n          mouseEvents: function() {\n            module.verbose('Binding mouse events');\n            if(module.is.multiple()) {\n              $module\n                .on('click'   + eventNamespace, selector.label,  module.event.label.click)\n                .on('click'   + eventNamespace, selector.remove, module.event.remove.click)\n              ;\n            }\n            if( module.is.searchSelection() ) {\n              $module\n                .on('mousedown' + eventNamespace, module.event.mousedown)\n                .on('mouseup'   + eventNamespace, module.event.mouseup)\n                .on('mousedown' + eventNamespace, selector.menu,   module.event.menu.mousedown)\n                .on('mouseup'   + eventNamespace, selector.menu,   module.event.menu.mouseup)\n                .on('click'     + eventNamespace, selector.icon,   module.event.icon.click)\n                .on('focus'     + eventNamespace, selector.search, module.event.search.focus)\n                .on('click'     + eventNamespace, selector.search, module.event.search.focus)\n                .on('blur'      + eventNamespace, selector.search, module.event.search.blur)\n                .on('click'     + eventNamespace, selector.text,   module.event.text.focus)\n              ;\n              if(module.is.multiple()) {\n                $module\n                  .on('click' + eventNamespace, module.event.click)\n                ;\n              }\n            }\n            else {\n              if(settings.on == 'click') {\n                $module\n                  .on('click' + eventNamespace, selector.icon, module.event.icon.click)\n                  .on('click' + eventNamespace, module.event.test.toggle)\n                ;\n              }\n              else if(settings.on == 'hover') {\n                $module\n                  .on('mouseenter' + eventNamespace, module.delay.show)\n                  .on('mouseleave' + eventNamespace, module.delay.hide)\n                ;\n              }\n              else {\n                $module\n                  .on(settings.on + eventNamespace, module.toggle)\n                ;\n              }\n              $module\n                .on('mousedown' + eventNamespace, module.event.mousedown)\n                .on('mouseup'   + eventNamespace, module.event.mouseup)\n                .on('focus'     + eventNamespace, module.event.focus)\n              ;\n              if(module.has.menuSearch() ) {\n                $module\n                  .on('blur' + eventNamespace, selector.search, module.event.search.blur)\n                ;\n              }\n              else {\n                $module\n                  .on('blur' + eventNamespace, module.event.blur)\n                ;\n              }\n            }\n            $menu\n              .on('mouseenter' + eventNamespace, selector.item, module.event.item.mouseenter)\n              .on('mouseleave' + eventNamespace, selector.item, module.event.item.mouseleave)\n              .on('click'      + eventNamespace, selector.item, module.event.item.click)\n            ;\n          },\n          intent: function() {\n            module.verbose('Binding hide intent event to document');\n            if(hasTouch) {\n              $document\n                .on('touchstart' + elementNamespace, module.event.test.touch)\n                .on('touchmove'  + elementNamespace, module.event.test.touch)\n              ;\n            }\n            $document\n              .on('click' + elementNamespace, module.event.test.hide)\n            ;\n          }\n        },\n\n        unbind: {\n          intent: function() {\n            module.verbose('Removing hide intent event from document');\n            if(hasTouch) {\n              $document\n                .off('touchstart' + elementNamespace)\n                .off('touchmove' + elementNamespace)\n              ;\n            }\n            $document\n              .off('click' + elementNamespace)\n            ;\n          }\n        },\n\n        filter: function(query) {\n          var\n            searchTerm = (query !== undefined)\n              ? query\n              : module.get.query(),\n            afterFiltered = function() {\n              if(module.is.multiple()) {\n                module.filterActive();\n              }\n              if(query || (!query && module.get.activeItem().length == 0)) {\n                module.select.firstUnfiltered();\n              }\n              if( module.has.allResultsFiltered() ) {\n                if( settings.onNoResults.call(element, searchTerm) ) {\n                  if(settings.allowAdditions) {\n                    if(settings.hideAdditions) {\n                      module.verbose('User addition with no menu, setting empty style');\n                      module.set.empty();\n                      module.hideMenu();\n                    }\n                  }\n                  else {\n                    module.verbose('All items filtered, showing message', searchTerm);\n                    module.add.message(message.noResults);\n                  }\n                }\n                else {\n                  module.verbose('All items filtered, hiding dropdown', searchTerm);\n                  module.hideMenu();\n                }\n              }\n              else {\n                module.remove.empty();\n                module.remove.message();\n              }\n              if(settings.allowAdditions) {\n                module.add.userSuggestion(query);\n              }\n              if(module.is.searchSelection() && module.can.show() && module.is.focusedOnSearch() ) {\n                module.show();\n              }\n            }\n          ;\n          if(settings.useLabels && module.has.maxSelections()) {\n            return;\n          }\n          if(settings.apiSettings) {\n            if( module.can.useAPI() ) {\n              module.queryRemote(searchTerm, function() {\n                if(settings.filterRemoteData) {\n                  module.filterItems(searchTerm);\n                }\n                afterFiltered();\n              });\n            }\n            else {\n              module.error(error.noAPI);\n            }\n          }\n          else {\n            module.filterItems(searchTerm);\n            afterFiltered();\n          }\n        },\n\n        queryRemote: function(query, callback) {\n          var\n            apiSettings = {\n              errorDuration : false,\n              cache         : 'local',\n              throttle      : settings.throttle,\n              urlData       : {\n                query: query\n              },\n              onError: function() {\n                module.add.message(message.serverError);\n                callback();\n              },\n              onFailure: function() {\n                module.add.message(message.serverError);\n                callback();\n              },\n              onSuccess : function(response) {\n                module.remove.message();\n                module.setup.menu({\n                  values: response[fields.remoteValues]\n                });\n                callback();\n              }\n            }\n          ;\n          if( !$module.api('get request') ) {\n            module.setup.api();\n          }\n          apiSettings = $.extend(true, {}, apiSettings, settings.apiSettings);\n          $module\n            .api('setting', apiSettings)\n            .api('query')\n          ;\n        },\n\n        filterItems: function(query) {\n          var\n            searchTerm = (query !== undefined)\n              ? query\n              : module.get.query(),\n            results          =  null,\n            escapedTerm      = module.escape.string(searchTerm),\n            beginsWithRegExp = new RegExp('^' + escapedTerm, 'igm')\n          ;\n          // avoid loop if we're matching nothing\n          if( module.has.query() ) {\n            results = [];\n\n            module.verbose('Searching for matching values', searchTerm);\n            $item\n              .each(function(){\n                var\n                  $choice = $(this),\n                  text,\n                  value\n                ;\n                if(settings.match == 'both' || settings.match == 'text') {\n                  text = String(module.get.choiceText($choice, false));\n                  if(text.search(beginsWithRegExp) !== -1) {\n                    results.push(this);\n                    return true;\n                  }\n                  else if (settings.fullTextSearch === 'exact' && module.exactSearch(searchTerm, text)) {\n                    results.push(this);\n                    return true;\n                  }\n                  else if (settings.fullTextSearch === true && module.fuzzySearch(searchTerm, text)) {\n                    results.push(this);\n                    return true;\n                  }\n                }\n                if(settings.match == 'both' || settings.match == 'value') {\n                  value = String(module.get.choiceValue($choice, text));\n                  if(value.search(beginsWithRegExp) !== -1) {\n                    results.push(this);\n                    return true;\n                  }\n                  else if (settings.fullTextSearch === 'exact' && module.exactSearch(searchTerm, value)) {\n                    results.push(this);\n                    return true;\n                  }\n                  else if (settings.fullTextSearch === true && module.fuzzySearch(searchTerm, value)) {\n                    results.push(this);\n                    return true;\n                  }\n                }\n              })\n            ;\n          }\n          module.debug('Showing only matched items', searchTerm);\n          module.remove.filteredItem();\n          if(results) {\n            $item\n              .not(results)\n              .addClass(className.filtered)\n            ;\n          }\n        },\n\n        fuzzySearch: function(query, term) {\n          var\n            termLength  = term.length,\n            queryLength = query.length\n          ;\n          query = query.toLowerCase();\n          term  = term.toLowerCase();\n          if(queryLength > termLength) {\n            return false;\n          }\n          if(queryLength === termLength) {\n            return (query === term);\n          }\n          search: for (var characterIndex = 0, nextCharacterIndex = 0; characterIndex < queryLength; characterIndex++) {\n            var\n              queryCharacter = query.charCodeAt(characterIndex)\n            ;\n            while(nextCharacterIndex < termLength) {\n              if(term.charCodeAt(nextCharacterIndex++) === queryCharacter) {\n                continue search;\n              }\n            }\n            return false;\n          }\n          return true;\n        },\n        exactSearch: function (query, term) {\n          query = query.toLowerCase();\n          term  = term.toLowerCase();\n          if(term.indexOf(query) > -1) {\n             return true;\n          }\n          return false;\n        },\n        filterActive: function() {\n          if(settings.useLabels) {\n            $item.filter('.' + className.active)\n              .addClass(className.filtered)\n            ;\n          }\n        },\n\n        focusSearch: function(skipHandler) {\n          if( module.has.search() && !module.is.focusedOnSearch() ) {\n            if(skipHandler) {\n              $module.off('focus' + eventNamespace, selector.search);\n              $search.focus();\n              $module.on('focus'  + eventNamespace, selector.search, module.event.search.focus);\n            }\n            else {\n              $search.focus();\n            }\n          }\n        },\n\n        forceSelection: function() {\n          var\n            $currentlySelected = $item.not(className.filtered).filter('.' + className.selected).eq(0),\n            $activeItem        = $item.not(className.filtered).filter('.' + className.active).eq(0),\n            $selectedItem      = ($currentlySelected.length > 0)\n              ? $currentlySelected\n              : $activeItem,\n            hasSelected = ($selectedItem.length > 0)\n          ;\n          if(hasSelected && !module.is.multiple()) {\n            module.debug('Forcing partial selection to selected item', $selectedItem);\n            module.event.item.click.call($selectedItem, {}, true);\n            return;\n          }\n          else {\n            if(settings.allowAdditions) {\n              module.set.selected(module.get.query());\n              module.remove.searchTerm();\n            }\n            else {\n              module.remove.searchTerm();\n            }\n          }\n        },\n\n        change: {\n          values: function(values) {\n            if(!settings.allowAdditions) {\n              module.clear();\n            }\n            module.debug('Creating dropdown with specified values', values);\n            module.setup.menu({values: values});\n            $.each(values, function(index, item) {\n              if(item.selected == true) {\n                module.debug('Setting initial selection to', item.value);\n                module.set.selected(item.value);\n                return true;\n              }\n            });\n          }\n        },\n\n        event: {\n          change: function() {\n            if(!internalChange) {\n              module.debug('Input changed, updating selection');\n              module.set.selected();\n            }\n          },\n          focus: function() {\n            if(settings.showOnFocus && !activated && module.is.hidden() && !pageLostFocus) {\n              module.show();\n            }\n          },\n          blur: function(event) {\n            pageLostFocus = (document.activeElement === this);\n            if(!activated && !pageLostFocus) {\n              module.remove.activeLabel();\n              module.hide();\n            }\n          },\n          mousedown: function() {\n            if(module.is.searchSelection()) {\n              // prevent menu hiding on immediate re-focus\n              willRefocus = true;\n            }\n            else {\n              // prevents focus callback from occurring on mousedown\n              activated = true;\n            }\n          },\n          mouseup: function() {\n            if(module.is.searchSelection()) {\n              // prevent menu hiding on immediate re-focus\n              willRefocus = false;\n            }\n            else {\n              activated = false;\n            }\n          },\n          click: function(event) {\n            var\n              $target = $(event.target)\n            ;\n            // focus search\n            if($target.is($module)) {\n              if(!module.is.focusedOnSearch()) {\n                module.focusSearch();\n              }\n              else {\n                module.show();\n              }\n            }\n          },\n          search: {\n            focus: function() {\n              activated = true;\n              if(module.is.multiple()) {\n                module.remove.activeLabel();\n              }\n              if(settings.showOnFocus) {\n                module.search();\n              }\n            },\n            blur: function(event) {\n              pageLostFocus = (document.activeElement === this);\n              if(module.is.searchSelection() && !willRefocus) {\n                if(!itemActivated && !pageLostFocus) {\n                  if(settings.forceSelection) {\n                    module.forceSelection();\n                  }\n                  module.hide();\n                }\n              }\n              willRefocus = false;\n            }\n          },\n          icon: {\n            click: function(event) {\n              module.toggle();\n            }\n          },\n          text: {\n            focus: function(event) {\n              activated = true;\n              module.focusSearch();\n            }\n          },\n          input: function(event) {\n            if(module.is.multiple() || module.is.searchSelection()) {\n              module.set.filtered();\n            }\n            clearTimeout(module.timer);\n            module.timer = setTimeout(module.search, settings.delay.search);\n          },\n          label: {\n            click: function(event) {\n              var\n                $label        = $(this),\n                $labels       = $module.find(selector.label),\n                $activeLabels = $labels.filter('.' + className.active),\n                $nextActive   = $label.nextAll('.' + className.active),\n                $prevActive   = $label.prevAll('.' + className.active),\n                $range = ($nextActive.length > 0)\n                  ? $label.nextUntil($nextActive).add($activeLabels).add($label)\n                  : $label.prevUntil($prevActive).add($activeLabels).add($label)\n              ;\n              if(event.shiftKey) {\n                $activeLabels.removeClass(className.active);\n                $range.addClass(className.active);\n              }\n              else if(event.ctrlKey) {\n                $label.toggleClass(className.active);\n              }\n              else {\n                $activeLabels.removeClass(className.active);\n                $label.addClass(className.active);\n              }\n              settings.onLabelSelect.apply(this, $labels.filter('.' + className.active));\n            }\n          },\n          remove: {\n            click: function() {\n              var\n                $label = $(this).parent()\n              ;\n              if( $label.hasClass(className.active) ) {\n                // remove all selected labels\n                module.remove.activeLabels();\n              }\n              else {\n                // remove this label only\n                module.remove.activeLabels( $label );\n              }\n            }\n          },\n          test: {\n            toggle: function(event) {\n              var\n                toggleBehavior = (module.is.multiple())\n                  ? module.show\n                  : module.toggle\n              ;\n              if(module.is.bubbledLabelClick(event) || module.is.bubbledIconClick(event)) {\n                return;\n              }\n              if( module.determine.eventOnElement(event, toggleBehavior) ) {\n                event.preventDefault();\n              }\n            },\n            touch: function(event) {\n              module.determine.eventOnElement(event, function() {\n                if(event.type == 'touchstart') {\n                  module.timer = setTimeout(function() {\n                    module.hide();\n                  }, settings.delay.touch);\n                }\n                else if(event.type == 'touchmove') {\n                  clearTimeout(module.timer);\n                }\n              });\n              event.stopPropagation();\n            },\n            hide: function(event) {\n              module.determine.eventInModule(event, module.hide);\n            }\n          },\n          select: {\n            mutation: function(mutations) {\n              module.debug('<select> modified, recreating menu');\n              var\n                isSelectMutation = false\n              ;\n              $.each(mutations, function(index, mutation) {\n                if($(mutation.target).is('select') || $(mutation.addedNodes).is('select')) {\n                  isSelectMutation = true;\n                  return true;\n                }\n              });\n              if(isSelectMutation) {\n                module.disconnect.selectObserver();\n                module.refresh();\n                module.setup.select();\n                module.set.selected();\n                module.observe.select();\n              }\n            }\n          },\n          menu: {\n            mutation: function(mutations) {\n              var\n                mutation   = mutations[0],\n                $addedNode = mutation.addedNodes\n                  ? $(mutation.addedNodes[0])\n                  : $(false),\n                $removedNode = mutation.removedNodes\n                  ? $(mutation.removedNodes[0])\n                  : $(false),\n                $changedNodes  = $addedNode.add($removedNode),\n                isUserAddition = $changedNodes.is(selector.addition) || $changedNodes.closest(selector.addition).length > 0,\n                isMessage      = $changedNodes.is(selector.message)  || $changedNodes.closest(selector.message).length > 0\n              ;\n              if(isUserAddition || isMessage) {\n                module.debug('Updating item selector cache');\n                module.refreshItems();\n              }\n              else {\n                module.debug('Menu modified, updating selector cache');\n                module.refresh();\n              }\n            },\n            mousedown: function() {\n              itemActivated = true;\n            },\n            mouseup: function() {\n              itemActivated = false;\n            }\n          },\n          item: {\n            mouseenter: function(event) {\n              var\n                $target        = $(event.target),\n                $item          = $(this),\n                $subMenu       = $item.children(selector.menu),\n                $otherMenus    = $item.siblings(selector.item).children(selector.menu),\n                hasSubMenu     = ($subMenu.length > 0),\n                isBubbledEvent = ($subMenu.find($target).length > 0)\n              ;\n              if( !isBubbledEvent && hasSubMenu ) {\n                clearTimeout(module.itemTimer);\n                module.itemTimer = setTimeout(function() {\n                  module.verbose('Showing sub-menu', $subMenu);\n                  $.each($otherMenus, function() {\n                    module.animate.hide(false, $(this));\n                  });\n                  module.animate.show(false, $subMenu);\n                }, settings.delay.show);\n                event.preventDefault();\n              }\n            },\n            mouseleave: function(event) {\n              var\n                $subMenu = $(this).children(selector.menu)\n              ;\n              if($subMenu.length > 0) {\n                clearTimeout(module.itemTimer);\n                module.itemTimer = setTimeout(function() {\n                  module.verbose('Hiding sub-menu', $subMenu);\n                  module.animate.hide(false, $subMenu);\n                }, settings.delay.hide);\n              }\n            },\n            click: function (event, skipRefocus) {\n              var\n                $choice        = $(this),\n                $target        = (event)\n                  ? $(event.target)\n                  : $(''),\n                $subMenu       = $choice.find(selector.menu),\n                text           = module.get.choiceText($choice),\n                value          = module.get.choiceValue($choice, text),\n                hasSubMenu     = ($subMenu.length > 0),\n                isBubbledEvent = ($subMenu.find($target).length > 0)\n              ;\n              // prevents IE11 bug where menu receives focus even though `tabindex=-1`\n              if(module.has.menuSearch()) {\n                $(document.activeElement).blur();\n              }\n              if(!isBubbledEvent && (!hasSubMenu || settings.allowCategorySelection)) {\n                if(module.is.searchSelection()) {\n                  if(settings.allowAdditions) {\n                    module.remove.userAddition();\n                  }\n                  module.remove.searchTerm();\n                  if(!module.is.focusedOnSearch() && !(skipRefocus == true)) {\n                    module.focusSearch(true);\n                  }\n                }\n                if(!settings.useLabels) {\n                  module.remove.filteredItem();\n                  module.set.scrollPosition($choice);\n                }\n                module.determine.selectAction.call(this, text, value);\n              }\n            }\n          },\n\n          document: {\n            // label selection should occur even when element has no focus\n            keydown: function(event) {\n              var\n                pressedKey    = event.which,\n                isShortcutKey = module.is.inObject(pressedKey, keys)\n              ;\n              if(isShortcutKey) {\n                var\n                  $label            = $module.find(selector.label),\n                  $activeLabel      = $label.filter('.' + className.active),\n                  activeValue       = $activeLabel.data(metadata.value),\n                  labelIndex        = $label.index($activeLabel),\n                  labelCount        = $label.length,\n                  hasActiveLabel    = ($activeLabel.length > 0),\n                  hasMultipleActive = ($activeLabel.length > 1),\n                  isFirstLabel      = (labelIndex === 0),\n                  isLastLabel       = (labelIndex + 1 == labelCount),\n                  isSearch          = module.is.searchSelection(),\n                  isFocusedOnSearch = module.is.focusedOnSearch(),\n                  isFocused         = module.is.focused(),\n                  caretAtStart      = (isFocusedOnSearch && module.get.caretPosition() === 0),\n                  $nextLabel\n                ;\n                if(isSearch && !hasActiveLabel && !isFocusedOnSearch) {\n                  return;\n                }\n\n                if(pressedKey == keys.leftArrow) {\n                  // activate previous label\n                  if((isFocused || caretAtStart) && !hasActiveLabel) {\n                    module.verbose('Selecting previous label');\n                    $label.last().addClass(className.active);\n                  }\n                  else if(hasActiveLabel) {\n                    if(!event.shiftKey) {\n                      module.verbose('Selecting previous label');\n                      $label.removeClass(className.active);\n                    }\n                    else {\n                      module.verbose('Adding previous label to selection');\n                    }\n                    if(isFirstLabel && !hasMultipleActive) {\n                      $activeLabel.addClass(className.active);\n                    }\n                    else {\n                      $activeLabel.prev(selector.siblingLabel)\n                        .addClass(className.active)\n                        .end()\n                      ;\n                    }\n                    event.preventDefault();\n                  }\n                }\n                else if(pressedKey == keys.rightArrow) {\n                  // activate first label\n                  if(isFocused && !hasActiveLabel) {\n                    $label.first().addClass(className.active);\n                  }\n                  // activate next label\n                  if(hasActiveLabel) {\n                    if(!event.shiftKey) {\n                      module.verbose('Selecting next label');\n                      $label.removeClass(className.active);\n                    }\n                    else {\n                      module.verbose('Adding next label to selection');\n                    }\n                    if(isLastLabel) {\n                      if(isSearch) {\n                        if(!isFocusedOnSearch) {\n                          module.focusSearch();\n                        }\n                        else {\n                          $label.removeClass(className.active);\n                        }\n                      }\n                      else if(hasMultipleActive) {\n                        $activeLabel.next(selector.siblingLabel).addClass(className.active);\n                      }\n                      else {\n                        $activeLabel.addClass(className.active);\n                      }\n                    }\n                    else {\n                      $activeLabel.next(selector.siblingLabel).addClass(className.active);\n                    }\n                    event.preventDefault();\n                  }\n                }\n                else if(pressedKey == keys.deleteKey || pressedKey == keys.backspace) {\n                  if(hasActiveLabel) {\n                    module.verbose('Removing active labels');\n                    if(isLastLabel) {\n                      if(isSearch && !isFocusedOnSearch) {\n                        module.focusSearch();\n                      }\n                    }\n                    $activeLabel.last().next(selector.siblingLabel).addClass(className.active);\n                    module.remove.activeLabels($activeLabel);\n                    event.preventDefault();\n                  }\n                  else if(caretAtStart && !hasActiveLabel && pressedKey == keys.backspace) {\n                    module.verbose('Removing last label on input backspace');\n                    $activeLabel = $label.last().addClass(className.active);\n                    module.remove.activeLabels($activeLabel);\n                  }\n                }\n                else {\n                  $activeLabel.removeClass(className.active);\n                }\n              }\n            }\n          },\n\n          keydown: function(event) {\n            var\n              pressedKey    = event.which,\n              isShortcutKey = module.is.inObject(pressedKey, keys)\n            ;\n            if(isShortcutKey) {\n              var\n                $currentlySelected = $item.not(selector.unselectable).filter('.' + className.selected).eq(0),\n                $activeItem        = $menu.children('.' + className.active).eq(0),\n                $selectedItem      = ($currentlySelected.length > 0)\n                  ? $currentlySelected\n                  : $activeItem,\n                $visibleItems = ($selectedItem.length > 0)\n                  ? $selectedItem.siblings(':not(.' + className.filtered +')').addBack()\n                  : $menu.children(':not(.' + className.filtered +')'),\n                $subMenu              = $selectedItem.children(selector.menu),\n                $parentMenu           = $selectedItem.closest(selector.menu),\n                inVisibleMenu         = ($parentMenu.hasClass(className.visible) || $parentMenu.hasClass(className.animating) || $parentMenu.parent(selector.menu).length > 0),\n                hasSubMenu            = ($subMenu.length> 0),\n                hasSelectedItem       = ($selectedItem.length > 0),\n                selectedIsSelectable  = ($selectedItem.not(selector.unselectable).length > 0),\n                delimiterPressed      = (pressedKey == keys.delimiter && settings.allowAdditions && module.is.multiple()),\n                isAdditionWithoutMenu = (settings.allowAdditions && settings.hideAdditions && (pressedKey == keys.enter || delimiterPressed) && selectedIsSelectable),\n                $nextItem,\n                isSubMenuItem,\n                newIndex\n              ;\n              // allow selection with menu closed\n              if(isAdditionWithoutMenu) {\n                module.verbose('Selecting item from keyboard shortcut', $selectedItem);\n                module.event.item.click.call($selectedItem, event);\n                if(module.is.searchSelection()) {\n                  module.remove.searchTerm();\n                }\n              }\n\n              // visible menu keyboard shortcuts\n              if( module.is.visible() ) {\n\n                // enter (select or open sub-menu)\n                if(pressedKey == keys.enter || delimiterPressed) {\n                  if(pressedKey == keys.enter && hasSelectedItem && hasSubMenu && !settings.allowCategorySelection) {\n                    module.verbose('Pressed enter on unselectable category, opening sub menu');\n                    pressedKey = keys.rightArrow;\n                  }\n                  else if(selectedIsSelectable) {\n                    module.verbose('Selecting item from keyboard shortcut', $selectedItem);\n                    module.event.item.click.call($selectedItem, event);\n                    if(module.is.searchSelection()) {\n                      module.remove.searchTerm();\n                    }\n                  }\n                  event.preventDefault();\n                }\n\n                // sub-menu actions\n                if(hasSelectedItem) {\n\n                  if(pressedKey == keys.leftArrow) {\n\n                    isSubMenuItem = ($parentMenu[0] !== $menu[0]);\n\n                    if(isSubMenuItem) {\n                      module.verbose('Left key pressed, closing sub-menu');\n                      module.animate.hide(false, $parentMenu);\n                      $selectedItem\n                        .removeClass(className.selected)\n                      ;\n                      $parentMenu\n                        .closest(selector.item)\n                          .addClass(className.selected)\n                      ;\n                      event.preventDefault();\n                    }\n                  }\n\n                  // right arrow (show sub-menu)\n                  if(pressedKey == keys.rightArrow) {\n                    if(hasSubMenu) {\n                      module.verbose('Right key pressed, opening sub-menu');\n                      module.animate.show(false, $subMenu);\n                      $selectedItem\n                        .removeClass(className.selected)\n                      ;\n                      $subMenu\n                        .find(selector.item).eq(0)\n                          .addClass(className.selected)\n                      ;\n                      event.preventDefault();\n                    }\n                  }\n                }\n\n                // up arrow (traverse menu up)\n                if(pressedKey == keys.upArrow) {\n                  $nextItem = (hasSelectedItem && inVisibleMenu)\n                    ? $selectedItem.prevAll(selector.item + ':not(' + selector.unselectable + ')').eq(0)\n                    : $item.eq(0)\n                  ;\n                  if($visibleItems.index( $nextItem ) < 0) {\n                    module.verbose('Up key pressed but reached top of current menu');\n                    event.preventDefault();\n                    return;\n                  }\n                  else {\n                    module.verbose('Up key pressed, changing active item');\n                    $selectedItem\n                      .removeClass(className.selected)\n                    ;\n                    $nextItem\n                      .addClass(className.selected)\n                    ;\n                    module.set.scrollPosition($nextItem);\n                    if(settings.selectOnKeydown && module.is.single()) {\n                      module.set.selectedItem($nextItem);\n                    }\n                  }\n                  event.preventDefault();\n                }\n\n                // down arrow (traverse menu down)\n                if(pressedKey == keys.downArrow) {\n                  $nextItem = (hasSelectedItem && inVisibleMenu)\n                    ? $nextItem = $selectedItem.nextAll(selector.item + ':not(' + selector.unselectable + ')').eq(0)\n                    : $item.eq(0)\n                  ;\n                  if($nextItem.length === 0) {\n                    module.verbose('Down key pressed but reached bottom of current menu');\n                    event.preventDefault();\n                    return;\n                  }\n                  else {\n                    module.verbose('Down key pressed, changing active item');\n                    $item\n                      .removeClass(className.selected)\n                    ;\n                    $nextItem\n                      .addClass(className.selected)\n                    ;\n                    module.set.scrollPosition($nextItem);\n                    if(settings.selectOnKeydown && module.is.single()) {\n                      module.set.selectedItem($nextItem);\n                    }\n                  }\n                  event.preventDefault();\n                }\n\n                // page down (show next page)\n                if(pressedKey == keys.pageUp) {\n                  module.scrollPage('up');\n                  event.preventDefault();\n                }\n                if(pressedKey == keys.pageDown) {\n                  module.scrollPage('down');\n                  event.preventDefault();\n                }\n\n                // escape (close menu)\n                if(pressedKey == keys.escape) {\n                  module.verbose('Escape key pressed, closing dropdown');\n                  module.hide();\n                }\n\n              }\n              else {\n                // delimiter key\n                if(delimiterPressed) {\n                  event.preventDefault();\n                }\n                // down arrow (open menu)\n                if(pressedKey == keys.downArrow && !module.is.visible()) {\n                  module.verbose('Down key pressed, showing dropdown');\n                  module.show();\n                  event.preventDefault();\n                }\n              }\n            }\n            else {\n              if( !module.has.search() ) {\n                module.set.selectedLetter( String.fromCharCode(pressedKey) );\n              }\n            }\n          }\n        },\n\n        trigger: {\n          change: function() {\n            var\n              events       = document.createEvent('HTMLEvents'),\n              inputElement = $input[0]\n            ;\n            if(inputElement) {\n              module.verbose('Triggering native change event');\n              events.initEvent('change', true, false);\n              inputElement.dispatchEvent(events);\n            }\n          }\n        },\n\n        determine: {\n          selectAction: function(text, value) {\n            module.verbose('Determining action', settings.action);\n            if( $.isFunction( module.action[settings.action] ) ) {\n              module.verbose('Triggering preset action', settings.action, text, value);\n              module.action[ settings.action ].call(element, text, value, this);\n            }\n            else if( $.isFunction(settings.action) ) {\n              module.verbose('Triggering user action', settings.action, text, value);\n              settings.action.call(element, text, value, this);\n            }\n            else {\n              module.error(error.action, settings.action);\n            }\n          },\n          eventInModule: function(event, callback) {\n            var\n              $target    = $(event.target),\n              inDocument = ($target.closest(document.documentElement).length > 0),\n              inModule   = ($target.closest($module).length > 0)\n            ;\n            callback = $.isFunction(callback)\n              ? callback\n              : function(){}\n            ;\n            if(inDocument && !inModule) {\n              module.verbose('Triggering event', callback);\n              callback();\n              return true;\n            }\n            else {\n              module.verbose('Event occurred in dropdown, canceling callback');\n              return false;\n            }\n          },\n          eventOnElement: function(event, callback) {\n            var\n              $target      = $(event.target),\n              $label       = $target.closest(selector.siblingLabel),\n              inVisibleDOM = document.body.contains(event.target),\n              notOnLabel   = ($module.find($label).length === 0),\n              notInMenu    = ($target.closest($menu).length === 0)\n            ;\n            callback = $.isFunction(callback)\n              ? callback\n              : function(){}\n            ;\n            if(inVisibleDOM && notOnLabel && notInMenu) {\n              module.verbose('Triggering event', callback);\n              callback();\n              return true;\n            }\n            else {\n              module.verbose('Event occurred in dropdown menu, canceling callback');\n              return false;\n            }\n          }\n        },\n\n        action: {\n\n          nothing: function() {},\n\n          activate: function(text, value, element) {\n            value = (value !== undefined)\n              ? value\n              : text\n            ;\n            if( module.can.activate( $(element) ) ) {\n              module.set.selected(value, $(element));\n              if(module.is.multiple() && !module.is.allFiltered()) {\n                return;\n              }\n              else {\n                module.hideAndClear();\n              }\n            }\n          },\n\n          select: function(text, value, element) {\n            value = (value !== undefined)\n              ? value\n              : text\n            ;\n            if( module.can.activate( $(element) ) ) {\n              module.set.value(value, text, $(element));\n              if(module.is.multiple() && !module.is.allFiltered()) {\n                return;\n              }\n              else {\n                module.hideAndClear();\n              }\n            }\n          },\n\n          combo: function(text, value, element) {\n            value = (value !== undefined)\n              ? value\n              : text\n            ;\n            module.set.selected(value, $(element));\n            module.hideAndClear();\n          },\n\n          hide: function(text, value, element) {\n            module.set.value(value, text);\n            module.hideAndClear();\n          }\n\n        },\n\n        get: {\n          id: function() {\n            return id;\n          },\n          defaultText: function() {\n            return $module.data(metadata.defaultText);\n          },\n          defaultValue: function() {\n            return $module.data(metadata.defaultValue);\n          },\n          placeholderText: function() {\n            if(settings.placeholder != 'auto' && typeof settings.placeholder == 'string') {\n              return settings.placeholder;\n            }\n            return $module.data(metadata.placeholderText) || '';\n          },\n          text: function() {\n            return $text.text();\n          },\n          query: function() {\n            return $.trim($search.val());\n          },\n          searchWidth: function(value) {\n            value = (value !== undefined)\n              ? value\n              : $search.val()\n            ;\n            $sizer.text(value);\n            // prevent rounding issues\n            return Math.ceil( $sizer.width() + 1);\n          },\n          selectionCount: function() {\n            var\n              values = module.get.values(),\n              count\n            ;\n            count = ( module.is.multiple() )\n              ? $.isArray(values)\n                ? values.length\n                : 0\n              : (module.get.value() !== '')\n                ? 1\n                : 0\n            ;\n            return count;\n          },\n          transition: function($subMenu) {\n            return (settings.transition == 'auto')\n              ? module.is.upward($subMenu)\n                ? 'slide up'\n                : 'slide down'\n              : settings.transition\n            ;\n          },\n          userValues: function() {\n            var\n              values = module.get.values()\n            ;\n            if(!values) {\n              return false;\n            }\n            values = $.isArray(values)\n              ? values\n              : [values]\n            ;\n            return $.grep(values, function(value) {\n              return (module.get.item(value) === false);\n            });\n          },\n          uniqueArray: function(array) {\n            return $.grep(array, function (value, index) {\n                return $.inArray(value, array) === index;\n            });\n          },\n          caretPosition: function() {\n            var\n              input = $search.get(0),\n              range,\n              rangeLength\n            ;\n            if('selectionStart' in input) {\n              return input.selectionStart;\n            }\n            else if (document.selection) {\n              input.focus();\n              range       = document.selection.createRange();\n              rangeLength = range.text.length;\n              range.moveStart('character', -input.value.length);\n              return range.text.length - rangeLength;\n            }\n          },\n          value: function() {\n            var\n              value = ($input.length > 0)\n                ? $input.val()\n                : $module.data(metadata.value),\n              isEmptyMultiselect = ($.isArray(value) && value.length === 1 && value[0] === '')\n            ;\n            // prevents placeholder element from being selected when multiple\n            return (value === undefined || isEmptyMultiselect)\n              ? ''\n              : value\n            ;\n          },\n          values: function() {\n            var\n              value = module.get.value()\n            ;\n            if(value === '') {\n              return '';\n            }\n            return ( !module.has.selectInput() && module.is.multiple() )\n              ? (typeof value == 'string') // delimited string\n                ? value.split(settings.delimiter)\n                : ''\n              : value\n            ;\n          },\n          remoteValues: function() {\n            var\n              values = module.get.values(),\n              remoteValues = false\n            ;\n            if(values) {\n              if(typeof values == 'string') {\n                values = [values];\n              }\n              $.each(values, function(index, value) {\n                var\n                  name = module.read.remoteData(value)\n                ;\n                module.verbose('Restoring value from session data', name, value);\n                if(name) {\n                  if(!remoteValues) {\n                    remoteValues = {};\n                  }\n                  remoteValues[value] = name;\n                }\n              });\n            }\n            return remoteValues;\n          },\n          choiceText: function($choice, preserveHTML) {\n            preserveHTML = (preserveHTML !== undefined)\n              ? preserveHTML\n              : settings.preserveHTML\n            ;\n            if($choice) {\n              if($choice.find(selector.menu).length > 0) {\n                module.verbose('Retrieving text of element with sub-menu');\n                $choice = $choice.clone();\n                $choice.find(selector.menu).remove();\n                $choice.find(selector.menuIcon).remove();\n              }\n              return ($choice.data(metadata.text) !== undefined)\n                ? $choice.data(metadata.text)\n                : (preserveHTML)\n                  ? $.trim($choice.html())\n                  : $.trim($choice.text())\n              ;\n            }\n          },\n          choiceValue: function($choice, choiceText) {\n            choiceText = choiceText || module.get.choiceText($choice);\n            if(!$choice) {\n              return false;\n            }\n            return ($choice.data(metadata.value) !== undefined)\n              ? String( $choice.data(metadata.value) )\n              : (typeof choiceText === 'string')\n                ? $.trim(choiceText.toLowerCase())\n                : String(choiceText)\n            ;\n          },\n          inputEvent: function() {\n            var\n              input = $search[0]\n            ;\n            if(input) {\n              return (input.oninput !== undefined)\n                ? 'input'\n                : (input.onpropertychange !== undefined)\n                  ? 'propertychange'\n                  : 'keyup'\n              ;\n            }\n            return false;\n          },\n          selectValues: function() {\n            var\n              select = {}\n            ;\n            select.values = [];\n            $module\n              .find('option')\n                .each(function() {\n                  var\n                    $option  = $(this),\n                    name     = $option.html(),\n                    disabled = $option.attr('disabled'),\n                    value    = ( $option.attr('value') !== undefined )\n                      ? $option.attr('value')\n                      : name\n                  ;\n                  if(settings.placeholder === 'auto' && value === '') {\n                    select.placeholder = name;\n                  }\n                  else {\n                    select.values.push({\n                      name     : name,\n                      value    : value,\n                      disabled : disabled\n                    });\n                  }\n                })\n            ;\n            if(settings.placeholder && settings.placeholder !== 'auto') {\n              module.debug('Setting placeholder value to', settings.placeholder);\n              select.placeholder = settings.placeholder;\n            }\n            if(settings.sortSelect) {\n              select.values.sort(function(a, b) {\n                return (a.name > b.name)\n                  ? 1\n                  : -1\n                ;\n              });\n              module.debug('Retrieved and sorted values from select', select);\n            }\n            else {\n              module.debug('Retrieved values from select', select);\n            }\n            return select;\n          },\n          activeItem: function() {\n            return $item.filter('.'  + className.active);\n          },\n          selectedItem: function() {\n            var\n              $selectedItem = $item.not(selector.unselectable).filter('.'  + className.selected)\n            ;\n            return ($selectedItem.length > 0)\n              ? $selectedItem\n              : $item.eq(0)\n            ;\n          },\n          itemWithAdditions: function(value) {\n            var\n              $items       = module.get.item(value),\n              $userItems   = module.create.userChoice(value),\n              hasUserItems = ($userItems && $userItems.length > 0)\n            ;\n            if(hasUserItems) {\n              $items = ($items.length > 0)\n                ? $items.add($userItems)\n                : $userItems\n              ;\n            }\n            return $items;\n          },\n          item: function(value, strict) {\n            var\n              $selectedItem = false,\n              shouldSearch,\n              isMultiple\n            ;\n            value = (value !== undefined)\n              ? value\n              : ( module.get.values() !== undefined)\n                ? module.get.values()\n                : module.get.text()\n            ;\n            shouldSearch = (isMultiple)\n              ? (value.length > 0)\n              : (value !== undefined && value !== null)\n            ;\n            isMultiple = (module.is.multiple() && $.isArray(value));\n            strict     = (value === '' || value === 0)\n              ? true\n              : strict || false\n            ;\n            if(shouldSearch) {\n              $item\n                .each(function() {\n                  var\n                    $choice       = $(this),\n                    optionText    = module.get.choiceText($choice),\n                    optionValue   = module.get.choiceValue($choice, optionText)\n                  ;\n                  // safe early exit\n                  if(optionValue === null || optionValue === undefined) {\n                    return;\n                  }\n                  if(isMultiple) {\n                    if($.inArray( String(optionValue), value) !== -1 || $.inArray(optionText, value) !== -1) {\n                      $selectedItem = ($selectedItem)\n                        ? $selectedItem.add($choice)\n                        : $choice\n                      ;\n                    }\n                  }\n                  else if(strict) {\n                    module.verbose('Ambiguous dropdown value using strict type check', $choice, value);\n                    if( optionValue === value || optionText === value) {\n                      $selectedItem = $choice;\n                      return true;\n                    }\n                  }\n                  else {\n                    if( String(optionValue) == String(value) || optionText == value) {\n                      module.verbose('Found select item by value', optionValue, value);\n                      $selectedItem = $choice;\n                      return true;\n                    }\n                  }\n                })\n              ;\n            }\n            return $selectedItem;\n          }\n        },\n\n        check: {\n          maxSelections: function(selectionCount) {\n            if(settings.maxSelections) {\n              selectionCount = (selectionCount !== undefined)\n                ? selectionCount\n                : module.get.selectionCount()\n              ;\n              if(selectionCount >= settings.maxSelections) {\n                module.debug('Maximum selection count reached');\n                if(settings.useLabels) {\n                  $item.addClass(className.filtered);\n                  module.add.message(message.maxSelections);\n                }\n                return true;\n              }\n              else {\n                module.verbose('No longer at maximum selection count');\n                module.remove.message();\n                module.remove.filteredItem();\n                if(module.is.searchSelection()) {\n                  module.filterItems();\n                }\n                return false;\n              }\n            }\n            return true;\n          }\n        },\n\n        restore: {\n          defaults: function() {\n            module.clear();\n            module.restore.defaultText();\n            module.restore.defaultValue();\n          },\n          defaultText: function() {\n            var\n              defaultText     = module.get.defaultText(),\n              placeholderText = module.get.placeholderText\n            ;\n            if(defaultText === placeholderText) {\n              module.debug('Restoring default placeholder text', defaultText);\n              module.set.placeholderText(defaultText);\n            }\n            else {\n              module.debug('Restoring default text', defaultText);\n              module.set.text(defaultText);\n            }\n          },\n          placeholderText: function() {\n            module.set.placeholderText();\n          },\n          defaultValue: function() {\n            var\n              defaultValue = module.get.defaultValue()\n            ;\n            if(defaultValue !== undefined) {\n              module.debug('Restoring default value', defaultValue);\n              if(defaultValue !== '') {\n                module.set.value(defaultValue);\n                module.set.selected();\n              }\n              else {\n                module.remove.activeItem();\n                module.remove.selectedItem();\n              }\n            }\n          },\n          labels: function() {\n            if(settings.allowAdditions) {\n              if(!settings.useLabels) {\n                module.error(error.labels);\n                settings.useLabels = true;\n              }\n              module.debug('Restoring selected values');\n              module.create.userLabels();\n            }\n            module.check.maxSelections();\n          },\n          selected: function() {\n            module.restore.values();\n            if(module.is.multiple()) {\n              module.debug('Restoring previously selected values and labels');\n              module.restore.labels();\n            }\n            else {\n              module.debug('Restoring previously selected values');\n            }\n          },\n          values: function() {\n            // prevents callbacks from occurring on initial load\n            module.set.initialLoad();\n            if(settings.apiSettings && settings.saveRemoteData && module.get.remoteValues()) {\n              module.restore.remoteValues();\n            }\n            else {\n              module.set.selected();\n            }\n            module.remove.initialLoad();\n          },\n          remoteValues: function() {\n            var\n              values = module.get.remoteValues()\n            ;\n            module.debug('Recreating selected from session data', values);\n            if(values) {\n              if( module.is.single() ) {\n                $.each(values, function(value, name) {\n                  module.set.text(name);\n                });\n              }\n              else {\n                $.each(values, function(value, name) {\n                  module.add.label(value, name);\n                });\n              }\n            }\n          }\n        },\n\n        read: {\n          remoteData: function(value) {\n            var\n              name\n            ;\n            if(window.Storage === undefined) {\n              module.error(error.noStorage);\n              return;\n            }\n            name = sessionStorage.getItem(value);\n            return (name !== undefined)\n              ? name\n              : false\n            ;\n          }\n        },\n\n        save: {\n          defaults: function() {\n            module.save.defaultText();\n            module.save.placeholderText();\n            module.save.defaultValue();\n          },\n          defaultValue: function() {\n            var\n              value = module.get.value()\n            ;\n            module.verbose('Saving default value as', value);\n            $module.data(metadata.defaultValue, value);\n          },\n          defaultText: function() {\n            var\n              text = module.get.text()\n            ;\n            module.verbose('Saving default text as', text);\n            $module.data(metadata.defaultText, text);\n          },\n          placeholderText: function() {\n            var\n              text\n            ;\n            if(settings.placeholder !== false && $text.hasClass(className.placeholder)) {\n              text = module.get.text();\n              module.verbose('Saving placeholder text as', text);\n              $module.data(metadata.placeholderText, text);\n            }\n          },\n          remoteData: function(name, value) {\n            if(window.Storage === undefined) {\n              module.error(error.noStorage);\n              return;\n            }\n            module.verbose('Saving remote data to session storage', value, name);\n            sessionStorage.setItem(value, name);\n          }\n        },\n\n        clear: function() {\n          if(module.is.multiple() && settings.useLabels) {\n            module.remove.labels();\n          }\n          else {\n            module.remove.activeItem();\n            module.remove.selectedItem();\n          }\n          module.set.placeholderText();\n          module.clearValue();\n        },\n\n        clearValue: function() {\n          module.set.value('');\n        },\n\n        scrollPage: function(direction, $selectedItem) {\n          var\n            $currentItem  = $selectedItem || module.get.selectedItem(),\n            $menu         = $currentItem.closest(selector.menu),\n            menuHeight    = $menu.outerHeight(),\n            currentScroll = $menu.scrollTop(),\n            itemHeight    = $item.eq(0).outerHeight(),\n            itemsPerPage  = Math.floor(menuHeight / itemHeight),\n            maxScroll     = $menu.prop('scrollHeight'),\n            newScroll     = (direction == 'up')\n              ? currentScroll - (itemHeight * itemsPerPage)\n              : currentScroll + (itemHeight * itemsPerPage),\n            $selectableItem = $item.not(selector.unselectable),\n            isWithinRange,\n            $nextSelectedItem,\n            elementIndex\n          ;\n          elementIndex      = (direction == 'up')\n            ? $selectableItem.index($currentItem) - itemsPerPage\n            : $selectableItem.index($currentItem) + itemsPerPage\n          ;\n          isWithinRange = (direction == 'up')\n            ? (elementIndex >= 0)\n            : (elementIndex < $selectableItem.length)\n          ;\n          $nextSelectedItem = (isWithinRange)\n            ? $selectableItem.eq(elementIndex)\n            : (direction == 'up')\n              ? $selectableItem.first()\n              : $selectableItem.last()\n          ;\n          if($nextSelectedItem.length > 0) {\n            module.debug('Scrolling page', direction, $nextSelectedItem);\n            $currentItem\n              .removeClass(className.selected)\n            ;\n            $nextSelectedItem\n              .addClass(className.selected)\n            ;\n            if(settings.selectOnKeydown && module.is.single()) {\n              module.set.selectedItem($nextSelectedItem);\n            }\n            $menu\n              .scrollTop(newScroll)\n            ;\n          }\n        },\n\n        set: {\n          filtered: function() {\n            var\n              isMultiple       = module.is.multiple(),\n              isSearch         = module.is.searchSelection(),\n              isSearchMultiple = (isMultiple && isSearch),\n              searchValue      = (isSearch)\n                ? module.get.query()\n                : '',\n              hasSearchValue   = (typeof searchValue === 'string' && searchValue.length > 0),\n              searchWidth      = module.get.searchWidth(),\n              valueIsSet       = searchValue !== ''\n            ;\n            if(isMultiple && hasSearchValue) {\n              module.verbose('Adjusting input width', searchWidth, settings.glyphWidth);\n              $search.css('width', searchWidth);\n            }\n            if(hasSearchValue || (isSearchMultiple && valueIsSet)) {\n              module.verbose('Hiding placeholder text');\n              $text.addClass(className.filtered);\n            }\n            else if(!isMultiple || (isSearchMultiple && !valueIsSet)) {\n              module.verbose('Showing placeholder text');\n              $text.removeClass(className.filtered);\n            }\n          },\n          empty: function() {\n            $module.addClass(className.empty);\n          },\n          loading: function() {\n            $module.addClass(className.loading);\n          },\n          placeholderText: function(text) {\n            text = text || module.get.placeholderText();\n            module.debug('Setting placeholder text', text);\n            module.set.text(text);\n            $text.addClass(className.placeholder);\n          },\n          tabbable: function() {\n            if( module.is.searchSelection() ) {\n              module.debug('Added tabindex to searchable dropdown');\n              $search\n                .val('')\n                .attr('tabindex', 0)\n              ;\n              $menu\n                .attr('tabindex', -1)\n              ;\n            }\n            else {\n              module.debug('Added tabindex to dropdown');\n              if( $module.attr('tabindex') === undefined) {\n                $module\n                  .attr('tabindex', 0)\n                ;\n                $menu\n                  .attr('tabindex', -1)\n                ;\n              }\n            }\n          },\n          initialLoad: function() {\n            module.verbose('Setting initial load');\n            initialLoad = true;\n          },\n          activeItem: function($item) {\n            if( settings.allowAdditions && $item.filter(selector.addition).length > 0 ) {\n              $item.addClass(className.filtered);\n            }\n            else {\n              $item.addClass(className.active);\n            }\n          },\n          partialSearch: function(text) {\n            var\n              length = module.get.query().length\n            ;\n            $search.val( text.substr(0, length));\n          },\n          scrollPosition: function($item, forceScroll) {\n            var\n              edgeTolerance = 5,\n              $menu,\n              hasActive,\n              offset,\n              itemHeight,\n              itemOffset,\n              menuOffset,\n              menuScroll,\n              menuHeight,\n              abovePage,\n              belowPage\n            ;\n\n            $item       = $item || module.get.selectedItem();\n            $menu       = $item.closest(selector.menu);\n            hasActive   = ($item && $item.length > 0);\n            forceScroll = (forceScroll !== undefined)\n              ? forceScroll\n              : false\n            ;\n            if($item && $menu.length > 0 && hasActive) {\n              itemOffset = $item.position().top;\n\n              $menu.addClass(className.loading);\n              menuScroll = $menu.scrollTop();\n              menuOffset = $menu.offset().top;\n              itemOffset = $item.offset().top;\n              offset     = menuScroll - menuOffset + itemOffset;\n              if(!forceScroll) {\n                menuHeight = $menu.height();\n                belowPage  = menuScroll + menuHeight < (offset + edgeTolerance);\n                abovePage  = ((offset - edgeTolerance) < menuScroll);\n              }\n              module.debug('Scrolling to active item', offset);\n              if(forceScroll || abovePage || belowPage) {\n                $menu.scrollTop(offset);\n              }\n              $menu.removeClass(className.loading);\n            }\n          },\n          text: function(text) {\n            if(settings.action !== 'select') {\n              if(settings.action == 'combo') {\n                module.debug('Changing combo button text', text, $combo);\n                if(settings.preserveHTML) {\n                  $combo.html(text);\n                }\n                else {\n                  $combo.text(text);\n                }\n              }\n              else {\n                if(text !== module.get.placeholderText()) {\n                  $text.removeClass(className.placeholder);\n                }\n                module.debug('Changing text', text, $text);\n                $text\n                  .removeClass(className.filtered)\n                ;\n                if(settings.preserveHTML) {\n                  $text.html(text);\n                }\n                else {\n                  $text.text(text);\n                }\n              }\n            }\n          },\n          selectedItem: function($item) {\n            var\n              value      = module.get.choiceValue($item),\n              searchText = module.get.choiceText($item, false),\n              text       = module.get.choiceText($item, true)\n            ;\n            module.debug('Setting user selection to item', $item);\n            module.remove.activeItem();\n            module.set.partialSearch(searchText);\n            module.set.activeItem($item);\n            module.set.selected(value, $item);\n            module.set.text(text);\n          },\n          selectedLetter: function(letter) {\n            var\n              $selectedItem         = $item.filter('.' + className.selected),\n              alreadySelectedLetter = $selectedItem.length > 0 && module.has.firstLetter($selectedItem, letter),\n              $nextValue            = false,\n              $nextItem\n            ;\n            // check next of same letter\n            if(alreadySelectedLetter) {\n              $nextItem = $selectedItem.nextAll($item).eq(0);\n              if( module.has.firstLetter($nextItem, letter) ) {\n                $nextValue  = $nextItem;\n              }\n            }\n            // check all values\n            if(!$nextValue) {\n              $item\n                .each(function(){\n                  if(module.has.firstLetter($(this), letter)) {\n                    $nextValue = $(this);\n                    return false;\n                  }\n                })\n              ;\n            }\n            // set next value\n            if($nextValue) {\n              module.verbose('Scrolling to next value with letter', letter);\n              module.set.scrollPosition($nextValue);\n              $selectedItem.removeClass(className.selected);\n              $nextValue.addClass(className.selected);\n              if(settings.selectOnKeydown && module.is.single()) {\n                module.set.selectedItem($nextValue);\n              }\n            }\n          },\n          direction: function($menu) {\n            if(settings.direction == 'auto') {\n              // reset position\n              module.remove.upward();\n\n              if(module.can.openDownward($menu)) {\n                module.remove.upward($menu);\n              }\n              else {\n                module.set.upward($menu);\n              }\n              if(!module.is.leftward($menu) && !module.can.openRightward($menu)) {\n                module.set.leftward($menu);\n              }\n            }\n            else if(settings.direction == 'upward') {\n              module.set.upward($menu);\n            }\n          },\n          upward: function($currentMenu) {\n            var $element = $currentMenu || $module;\n            $element.addClass(className.upward);\n          },\n          leftward: function($currentMenu) {\n            var $element = $currentMenu || $menu;\n            $element.addClass(className.leftward);\n          },\n          value: function(value, text, $selected) {\n            var\n              escapedValue = module.escape.value(value),\n              hasInput     = ($input.length > 0),\n              currentValue = module.get.values(),\n              stringValue  = (value !== undefined)\n                ? String(value)\n                : value,\n              newValue\n            ;\n            if(hasInput) {\n              if(!settings.allowReselection && stringValue == currentValue) {\n                module.verbose('Skipping value update already same value', value, currentValue);\n                if(!module.is.initialLoad()) {\n                  return;\n                }\n              }\n\n              if( module.is.single() && module.has.selectInput() && module.can.extendSelect() ) {\n                module.debug('Adding user option', value);\n                module.add.optionValue(value);\n              }\n              module.debug('Updating input value', escapedValue, currentValue);\n              internalChange = true;\n              $input\n                .val(escapedValue)\n              ;\n              if(settings.fireOnInit === false && module.is.initialLoad()) {\n                module.debug('Input native change event ignored on initial load');\n              }\n              else {\n                module.trigger.change();\n              }\n              internalChange = false;\n            }\n            else {\n              module.verbose('Storing value in metadata', escapedValue, $input);\n              if(escapedValue !== currentValue) {\n                $module.data(metadata.value, stringValue);\n              }\n            }\n            if(settings.fireOnInit === false && module.is.initialLoad()) {\n              module.verbose('No callback on initial load', settings.onChange);\n            }\n            else {\n              settings.onChange.call(element, value, text, $selected);\n            }\n          },\n          active: function() {\n            $module\n              .addClass(className.active)\n            ;\n          },\n          multiple: function() {\n            $module.addClass(className.multiple);\n          },\n          visible: function() {\n            $module.addClass(className.visible);\n          },\n          exactly: function(value, $selectedItem) {\n            module.debug('Setting selected to exact values');\n            module.clear();\n            module.set.selected(value, $selectedItem);\n          },\n          selected: function(value, $selectedItem) {\n            var\n              isMultiple = module.is.multiple(),\n              $userSelectedItem\n            ;\n            $selectedItem = (settings.allowAdditions)\n              ? $selectedItem || module.get.itemWithAdditions(value)\n              : $selectedItem || module.get.item(value)\n            ;\n            if(!$selectedItem) {\n              return;\n            }\n            module.debug('Setting selected menu item to', $selectedItem);\n            if(module.is.multiple()) {\n              module.remove.searchWidth();\n            }\n            if(module.is.single()) {\n              module.remove.activeItem();\n              module.remove.selectedItem();\n            }\n            else if(settings.useLabels) {\n              module.remove.selectedItem();\n            }\n            // select each item\n            $selectedItem\n              .each(function() {\n                var\n                  $selected      = $(this),\n                  selectedText   = module.get.choiceText($selected),\n                  selectedValue  = module.get.choiceValue($selected, selectedText),\n\n                  isFiltered     = $selected.hasClass(className.filtered),\n                  isActive       = $selected.hasClass(className.active),\n                  isUserValue    = $selected.hasClass(className.addition),\n                  shouldAnimate  = (isMultiple && $selectedItem.length == 1)\n                ;\n                if(isMultiple) {\n                  if(!isActive || isUserValue) {\n                    if(settings.apiSettings && settings.saveRemoteData) {\n                      module.save.remoteData(selectedText, selectedValue);\n                    }\n                    if(settings.useLabels) {\n                      module.add.label(selectedValue, selectedText, shouldAnimate);\n                      module.add.value(selectedValue, selectedText, $selected);\n                      module.set.activeItem($selected);\n                      module.filterActive();\n                      module.select.nextAvailable($selectedItem);\n                    }\n                    else {\n                      module.add.value(selectedValue, selectedText, $selected);\n                      module.set.text(module.add.variables(message.count));\n                      module.set.activeItem($selected);\n                    }\n                  }\n                  else if(!isFiltered) {\n                    module.debug('Selected active value, removing label');\n                    module.remove.selected(selectedValue);\n                  }\n                }\n                else {\n                  if(settings.apiSettings && settings.saveRemoteData) {\n                    module.save.remoteData(selectedText, selectedValue);\n                  }\n                  module.set.text(selectedText);\n                  module.set.value(selectedValue, selectedText, $selected);\n                  $selected\n                    .addClass(className.active)\n                    .addClass(className.selected)\n                  ;\n                }\n              })\n            ;\n          }\n        },\n\n        add: {\n          label: function(value, text, shouldAnimate) {\n            var\n              $next  = module.is.searchSelection()\n                ? $search\n                : $text,\n              escapedValue = module.escape.value(value),\n              $label\n            ;\n            if(settings.ignoreCase) {\n              escapedValue = escapedValue.toLowerCase();\n            }\n            $label =  $('<a />')\n              .addClass(className.label)\n              .attr('data-' + metadata.value, escapedValue)\n              .html(templates.label(escapedValue, text))\n            ;\n            $label = settings.onLabelCreate.call($label, escapedValue, text);\n\n            if(module.has.label(value)) {\n              module.debug('User selection already exists, skipping', escapedValue);\n              return;\n            }\n            if(settings.label.variation) {\n              $label.addClass(settings.label.variation);\n            }\n            if(shouldAnimate === true) {\n              module.debug('Animating in label', $label);\n              $label\n                .addClass(className.hidden)\n                .insertBefore($next)\n                .transition(settings.label.transition, settings.label.duration)\n              ;\n            }\n            else {\n              module.debug('Adding selection label', $label);\n              $label\n                .insertBefore($next)\n              ;\n            }\n          },\n          message: function(message) {\n            var\n              $message = $menu.children(selector.message),\n              html     = settings.templates.message(module.add.variables(message))\n            ;\n            if($message.length > 0) {\n              $message\n                .html(html)\n              ;\n            }\n            else {\n              $message = $('<div/>')\n                .html(html)\n                .addClass(className.message)\n                .appendTo($menu)\n              ;\n            }\n          },\n          optionValue: function(value) {\n            var\n              escapedValue = module.escape.value(value),\n              $option      = $input.find('option[value=\"' + module.escape.string(escapedValue) + '\"]'),\n              hasOption    = ($option.length > 0)\n            ;\n            if(hasOption) {\n              return;\n            }\n            // temporarily disconnect observer\n            module.disconnect.selectObserver();\n            if( module.is.single() ) {\n              module.verbose('Removing previous user addition');\n              $input.find('option.' + className.addition).remove();\n            }\n            $('<option/>')\n              .prop('value', escapedValue)\n              .addClass(className.addition)\n              .html(value)\n              .appendTo($input)\n            ;\n            module.verbose('Adding user addition as an <option>', value);\n            module.observe.select();\n          },\n          userSuggestion: function(value) {\n            var\n              $addition         = $menu.children(selector.addition),\n              $existingItem     = module.get.item(value),\n              alreadyHasValue   = $existingItem && $existingItem.not(selector.addition).length,\n              hasUserSuggestion = $addition.length > 0,\n              html\n            ;\n            if(settings.useLabels && module.has.maxSelections()) {\n              return;\n            }\n            if(value === '' || alreadyHasValue) {\n              $addition.remove();\n              return;\n            }\n            if(hasUserSuggestion) {\n              $addition\n                .data(metadata.value, value)\n                .data(metadata.text, value)\n                .attr('data-' + metadata.value, value)\n                .attr('data-' + metadata.text, value)\n                .removeClass(className.filtered)\n              ;\n              if(!settings.hideAdditions) {\n                html = settings.templates.addition( module.add.variables(message.addResult, value) );\n                $addition\n                  .html(html)\n                ;\n              }\n              module.verbose('Replacing user suggestion with new value', $addition);\n            }\n            else {\n              $addition = module.create.userChoice(value);\n              $addition\n                .prependTo($menu)\n              ;\n              module.verbose('Adding item choice to menu corresponding with user choice addition', $addition);\n            }\n            if(!settings.hideAdditions || module.is.allFiltered()) {\n              $addition\n                .addClass(className.selected)\n                .siblings()\n                .removeClass(className.selected)\n              ;\n            }\n            module.refreshItems();\n          },\n          variables: function(message, term) {\n            var\n              hasCount    = (message.search('{count}') !== -1),\n              hasMaxCount = (message.search('{maxCount}') !== -1),\n              hasTerm     = (message.search('{term}') !== -1),\n              values,\n              count,\n              query\n            ;\n            module.verbose('Adding templated variables to message', message);\n            if(hasCount) {\n              count  = module.get.selectionCount();\n              message = message.replace('{count}', count);\n            }\n            if(hasMaxCount) {\n              count  = module.get.selectionCount();\n              message = message.replace('{maxCount}', settings.maxSelections);\n            }\n            if(hasTerm) {\n              query   = term || module.get.query();\n              message = message.replace('{term}', query);\n            }\n            return message;\n          },\n          value: function(addedValue, addedText, $selectedItem) {\n            var\n              currentValue = module.get.values(),\n              newValue\n            ;\n            if(module.has.value(addedValue)) {\n              module.debug('Value already selected');\n              return;\n            }\n            if(addedValue === '') {\n              module.debug('Cannot select blank values from multiselect');\n              return;\n            }\n            // extend current array\n            if($.isArray(currentValue)) {\n              newValue = currentValue.concat([addedValue]);\n              newValue = module.get.uniqueArray(newValue);\n            }\n            else {\n              newValue = [addedValue];\n            }\n            // add values\n            if( module.has.selectInput() ) {\n              if(module.can.extendSelect()) {\n                module.debug('Adding value to select', addedValue, newValue, $input);\n                module.add.optionValue(addedValue);\n              }\n            }\n            else {\n              newValue = newValue.join(settings.delimiter);\n              module.debug('Setting hidden input to delimited value', newValue, $input);\n            }\n\n            if(settings.fireOnInit === false && module.is.initialLoad()) {\n              module.verbose('Skipping onadd callback on initial load', settings.onAdd);\n            }\n            else {\n              settings.onAdd.call(element, addedValue, addedText, $selectedItem);\n            }\n            module.set.value(newValue, addedValue, addedText, $selectedItem);\n            module.check.maxSelections();\n          }\n        },\n\n        remove: {\n          active: function() {\n            $module.removeClass(className.active);\n          },\n          activeLabel: function() {\n            $module.find(selector.label).removeClass(className.active);\n          },\n          empty: function() {\n            $module.removeClass(className.empty);\n          },\n          loading: function() {\n            $module.removeClass(className.loading);\n          },\n          initialLoad: function() {\n            initialLoad = false;\n          },\n          upward: function($currentMenu) {\n            var $element = $currentMenu || $module;\n            $element.removeClass(className.upward);\n          },\n          leftward: function($currentMenu) {\n            var $element = $currentMenu || $menu;\n            $element.removeClass(className.leftward);\n          },\n          visible: function() {\n            $module.removeClass(className.visible);\n          },\n          activeItem: function() {\n            $item.removeClass(className.active);\n          },\n          filteredItem: function() {\n            if(settings.useLabels && module.has.maxSelections() ) {\n              return;\n            }\n            if(settings.useLabels && module.is.multiple()) {\n              $item.not('.' + className.active).removeClass(className.filtered);\n            }\n            else {\n              $item.removeClass(className.filtered);\n            }\n            module.remove.empty();\n          },\n          optionValue: function(value) {\n            var\n              escapedValue = module.escape.value(value),\n              $option      = $input.find('option[value=\"' + module.escape.string(escapedValue) + '\"]'),\n              hasOption    = ($option.length > 0)\n            ;\n            if(!hasOption || !$option.hasClass(className.addition)) {\n              return;\n            }\n            // temporarily disconnect observer\n            if(selectObserver) {\n              selectObserver.disconnect();\n              module.verbose('Temporarily disconnecting mutation observer');\n            }\n            $option.remove();\n            module.verbose('Removing user addition as an <option>', escapedValue);\n            if(selectObserver) {\n              selectObserver.observe($input[0], {\n                childList : true,\n                subtree   : true\n              });\n            }\n          },\n          message: function() {\n            $menu.children(selector.message).remove();\n          },\n          searchWidth: function() {\n            $search.css('width', '');\n          },\n          searchTerm: function() {\n            module.verbose('Cleared search term');\n            $search.val('');\n            module.set.filtered();\n          },\n          userAddition: function() {\n            $item.filter(selector.addition).remove();\n          },\n          selected: function(value, $selectedItem) {\n            $selectedItem = (settings.allowAdditions)\n              ? $selectedItem || module.get.itemWithAdditions(value)\n              : $selectedItem || module.get.item(value)\n            ;\n\n            if(!$selectedItem) {\n              return false;\n            }\n\n            $selectedItem\n              .each(function() {\n                var\n                  $selected     = $(this),\n                  selectedText  = module.get.choiceText($selected),\n                  selectedValue = module.get.choiceValue($selected, selectedText)\n                ;\n                if(module.is.multiple()) {\n                  if(settings.useLabels) {\n                    module.remove.value(selectedValue, selectedText, $selected);\n                    module.remove.label(selectedValue);\n                  }\n                  else {\n                    module.remove.value(selectedValue, selectedText, $selected);\n                    if(module.get.selectionCount() === 0) {\n                      module.set.placeholderText();\n                    }\n                    else {\n                      module.set.text(module.add.variables(message.count));\n                    }\n                  }\n                }\n                else {\n                  module.remove.value(selectedValue, selectedText, $selected);\n                }\n                $selected\n                  .removeClass(className.filtered)\n                  .removeClass(className.active)\n                ;\n                if(settings.useLabels) {\n                  $selected.removeClass(className.selected);\n                }\n              })\n            ;\n          },\n          selectedItem: function() {\n            $item.removeClass(className.selected);\n          },\n          value: function(removedValue, removedText, $removedItem) {\n            var\n              values = module.get.values(),\n              newValue\n            ;\n            if( module.has.selectInput() ) {\n              module.verbose('Input is <select> removing selected option', removedValue);\n              newValue = module.remove.arrayValue(removedValue, values);\n              module.remove.optionValue(removedValue);\n            }\n            else {\n              module.verbose('Removing from delimited values', removedValue);\n              newValue = module.remove.arrayValue(removedValue, values);\n              newValue = newValue.join(settings.delimiter);\n            }\n            if(settings.fireOnInit === false && module.is.initialLoad()) {\n              module.verbose('No callback on initial load', settings.onRemove);\n            }\n            else {\n              settings.onRemove.call(element, removedValue, removedText, $removedItem);\n            }\n            module.set.value(newValue, removedText, $removedItem);\n            module.check.maxSelections();\n          },\n          arrayValue: function(removedValue, values) {\n            if( !$.isArray(values) ) {\n              values = [values];\n            }\n            values = $.grep(values, function(value){\n              return (removedValue != value);\n            });\n            module.verbose('Removed value from delimited string', removedValue, values);\n            return values;\n          },\n          label: function(value, shouldAnimate) {\n            var\n              $labels       = $module.find(selector.label),\n              $removedLabel = $labels.filter('[data-' + metadata.value + '=\"' + module.escape.string(value) +'\"]')\n            ;\n            module.verbose('Removing label', $removedLabel);\n            $removedLabel.remove();\n          },\n          activeLabels: function($activeLabels) {\n            $activeLabels = $activeLabels || $module.find(selector.label).filter('.' + className.active);\n            module.verbose('Removing active label selections', $activeLabels);\n            module.remove.labels($activeLabels);\n          },\n          labels: function($labels) {\n            $labels = $labels || $module.find(selector.label);\n            module.verbose('Removing labels', $labels);\n            $labels\n              .each(function(){\n                var\n                  $label      = $(this),\n                  value       = $label.data(metadata.value),\n                  stringValue = (value !== undefined)\n                    ? String(value)\n                    : value,\n                  isUserValue = module.is.userValue(stringValue)\n                ;\n                if(settings.onLabelRemove.call($label, value) === false) {\n                  module.debug('Label remove callback cancelled removal');\n                  return;\n                }\n                module.remove.message();\n                if(isUserValue) {\n                  module.remove.value(stringValue);\n                  module.remove.label(stringValue);\n                }\n                else {\n                  // selected will also remove label\n                  module.remove.selected(stringValue);\n                }\n              })\n            ;\n          },\n          tabbable: function() {\n            if( module.is.searchSelection() ) {\n              module.debug('Searchable dropdown initialized');\n              $search\n                .removeAttr('tabindex')\n              ;\n              $menu\n                .removeAttr('tabindex')\n              ;\n            }\n            else {\n              module.debug('Simple selection dropdown initialized');\n              $module\n                .removeAttr('tabindex')\n              ;\n              $menu\n                .removeAttr('tabindex')\n              ;\n            }\n          }\n        },\n\n        has: {\n          menuSearch: function() {\n            return (module.has.search() && $search.closest($menu).length > 0);\n          },\n          search: function() {\n            return ($search.length > 0);\n          },\n          sizer: function() {\n            return ($sizer.length > 0);\n          },\n          selectInput: function() {\n            return ( $input.is('select') );\n          },\n          minCharacters: function(searchTerm) {\n            if(settings.minCharacters) {\n              searchTerm = (searchTerm !== undefined)\n                ? String(searchTerm)\n                : String(module.get.query())\n              ;\n              return (searchTerm.length >= settings.minCharacters);\n            }\n            return true;\n          },\n          firstLetter: function($item, letter) {\n            var\n              text,\n              firstLetter\n            ;\n            if(!$item || $item.length === 0 || typeof letter !== 'string') {\n              return false;\n            }\n            text        = module.get.choiceText($item, false);\n            letter      = letter.toLowerCase();\n            firstLetter = String(text).charAt(0).toLowerCase();\n            return (letter == firstLetter);\n          },\n          input: function() {\n            return ($input.length > 0);\n          },\n          items: function() {\n            return ($item.length > 0);\n          },\n          menu: function() {\n            return ($menu.length > 0);\n          },\n          message: function() {\n            return ($menu.children(selector.message).length !== 0);\n          },\n          label: function(value) {\n            var\n              escapedValue = module.escape.value(value),\n              $labels      = $module.find(selector.label)\n            ;\n            if(settings.ignoreCase) {\n              escapedValue = escapedValue.toLowerCase();\n            }\n            return ($labels.filter('[data-' + metadata.value + '=\"' + module.escape.string(escapedValue) +'\"]').length > 0);\n          },\n          maxSelections: function() {\n            return (settings.maxSelections && module.get.selectionCount() >= settings.maxSelections);\n          },\n          allResultsFiltered: function() {\n            var\n              $normalResults = $item.not(selector.addition)\n            ;\n            return ($normalResults.filter(selector.unselectable).length === $normalResults.length);\n          },\n          userSuggestion: function() {\n            return ($menu.children(selector.addition).length > 0);\n          },\n          query: function() {\n            return (module.get.query() !== '');\n          },\n          value: function(value) {\n            return (settings.ignoreCase)\n              ? module.has.valueIgnoringCase(value)\n              : module.has.valueMatchingCase(value)\n            ;\n          },\n          valueMatchingCase: function(value) {\n            var\n              values   = module.get.values(),\n              hasValue = $.isArray(values)\n               ? values && ($.inArray(value, values) !== -1)\n               : (values == value)\n            ;\n            return (hasValue)\n              ? true\n              : false\n            ;\n          },\n          valueIgnoringCase: function(value) {\n            var\n              values   = module.get.values(),\n              hasValue = false\n            ;\n            if(!$.isArray(values)) {\n              values = [values];\n            }\n            $.each(values, function(index, existingValue) {\n              if(String(value).toLowerCase() == String(existingValue).toLowerCase()) {\n                hasValue = true;\n                return false;\n              }\n            });\n            return hasValue;\n          }\n        },\n\n        is: {\n          active: function() {\n            return $module.hasClass(className.active);\n          },\n          animatingInward: function() {\n            return $menu.transition('is inward');\n          },\n          animatingOutward: function() {\n            return $menu.transition('is outward');\n          },\n          bubbledLabelClick: function(event) {\n            return $(event.target).is('select, input') && $module.closest('label').length > 0;\n          },\n          bubbledIconClick: function(event) {\n            return $(event.target).closest($icon).length > 0;\n          },\n          alreadySetup: function() {\n            return ($module.is('select') && $module.parent(selector.dropdown).data(moduleNamespace) !== undefined && $module.prev().length === 0);\n          },\n          animating: function($subMenu) {\n            return ($subMenu)\n              ? $subMenu.transition && $subMenu.transition('is animating')\n              : $menu.transition    && $menu.transition('is animating')\n            ;\n          },\n          leftward: function($subMenu) {\n            var $selectedMenu = $subMenu || $menu;\n            return $selectedMenu.hasClass(className.leftward);\n          },\n          disabled: function() {\n            return $module.hasClass(className.disabled);\n          },\n          focused: function() {\n            return (document.activeElement === $module[0]);\n          },\n          focusedOnSearch: function() {\n            return (document.activeElement === $search[0]);\n          },\n          allFiltered: function() {\n            return( (module.is.multiple() || module.has.search()) && !(settings.hideAdditions == false && module.has.userSuggestion()) && !module.has.message() && module.has.allResultsFiltered() );\n          },\n          hidden: function($subMenu) {\n            return !module.is.visible($subMenu);\n          },\n          initialLoad: function() {\n            return initialLoad;\n          },\n          inObject: function(needle, object) {\n            var\n              found = false\n            ;\n            $.each(object, function(index, property) {\n              if(property == needle) {\n                found = true;\n                return true;\n              }\n            });\n            return found;\n          },\n          multiple: function() {\n            return $module.hasClass(className.multiple);\n          },\n          remote: function() {\n            return settings.apiSettings && module.can.useAPI();\n          },\n          single: function() {\n            return !module.is.multiple();\n          },\n          selectMutation: function(mutations) {\n            var\n              selectChanged = false\n            ;\n            $.each(mutations, function(index, mutation) {\n              if(mutation.target && $(mutation.target).is('select')) {\n                selectChanged = true;\n                return true;\n              }\n            });\n            return selectChanged;\n          },\n          search: function() {\n            return $module.hasClass(className.search);\n          },\n          searchSelection: function() {\n            return ( module.has.search() && $search.parent(selector.dropdown).length === 1 );\n          },\n          selection: function() {\n            return $module.hasClass(className.selection);\n          },\n          userValue: function(value) {\n            return ($.inArray(value, module.get.userValues()) !== -1);\n          },\n          upward: function($menu) {\n            var $element = $menu || $module;\n            return $element.hasClass(className.upward);\n          },\n          visible: function($subMenu) {\n            return ($subMenu)\n              ? $subMenu.hasClass(className.visible)\n              : $menu.hasClass(className.visible)\n            ;\n          },\n          verticallyScrollableContext: function() {\n            var\n              overflowY = ($context.get(0) !== window)\n                ? $context.css('overflow-y')\n                : false\n            ;\n            return (overflowY == 'auto' || overflowY == 'scroll');\n          },\n          horizontallyScrollableContext: function() {\n            var\n              overflowX = ($context.get(0) !== window)\n                ? $context.css('overflow-X')\n                : false\n            ;\n            return (overflowX == 'auto' || overflowX == 'scroll');\n          }\n        },\n\n        can: {\n          activate: function($item) {\n            if(settings.useLabels) {\n              return true;\n            }\n            if(!module.has.maxSelections()) {\n              return true;\n            }\n            if(module.has.maxSelections() && $item.hasClass(className.active)) {\n              return true;\n            }\n            return false;\n          },\n          openDownward: function($subMenu) {\n            var\n              $currentMenu    = $subMenu || $menu,\n              canOpenDownward = true,\n              onScreen        = {},\n              calculations\n            ;\n            $currentMenu\n              .addClass(className.loading)\n            ;\n            calculations = {\n              context: {\n                offset    : ($context.get(0) === window)\n                  ? { top: 0, left: 0}\n                  : $context.offset(),\n                scrollTop : $context.scrollTop(),\n                height    : $context.outerHeight()\n              },\n              menu : {\n                offset: $currentMenu.offset(),\n                height: $currentMenu.outerHeight()\n              }\n            };\n            if(module.is.verticallyScrollableContext()) {\n              calculations.menu.offset.top += calculations.context.scrollTop;\n            }\n            onScreen = {\n              above : (calculations.context.scrollTop) <= calculations.menu.offset.top - calculations.context.offset.top - calculations.menu.height,\n              below : (calculations.context.scrollTop + calculations.context.height) >= calculations.menu.offset.top - calculations.context.offset.top + calculations.menu.height\n            };\n            if(onScreen.below) {\n              module.verbose('Dropdown can fit in context downward', onScreen);\n              canOpenDownward = true;\n            }\n            else if(!onScreen.below && !onScreen.above) {\n              module.verbose('Dropdown cannot fit in either direction, favoring downward', onScreen);\n              canOpenDownward = true;\n            }\n            else {\n              module.verbose('Dropdown cannot fit below, opening upward', onScreen);\n              canOpenDownward = false;\n            }\n            $currentMenu.removeClass(className.loading);\n            return canOpenDownward;\n          },\n          openRightward: function($subMenu) {\n            var\n              $currentMenu     = $subMenu || $menu,\n              canOpenRightward = true,\n              isOffscreenRight = false,\n              calculations\n            ;\n            $currentMenu\n              .addClass(className.loading)\n            ;\n            calculations = {\n              context: {\n                offset     : ($context.get(0) === window)\n                  ? { top: 0, left: 0}\n                  : $context.offset(),\n                scrollLeft : $context.scrollLeft(),\n                width      : $context.outerWidth()\n              },\n              menu: {\n                offset : $currentMenu.offset(),\n                width  : $currentMenu.outerWidth()\n              }\n            };\n            if(module.is.horizontallyScrollableContext()) {\n              calculations.menu.offset.left += calculations.context.scrollLeft;\n            }\n            isOffscreenRight = (calculations.menu.offset.left - calculations.context.offset.left + calculations.menu.width >= calculations.context.scrollLeft + calculations.context.width);\n            if(isOffscreenRight) {\n              module.verbose('Dropdown cannot fit in context rightward', isOffscreenRight);\n              canOpenRightward = false;\n            }\n            $currentMenu.removeClass(className.loading);\n            return canOpenRightward;\n          },\n          click: function() {\n            return (hasTouch || settings.on == 'click');\n          },\n          extendSelect: function() {\n            return settings.allowAdditions || settings.apiSettings;\n          },\n          show: function() {\n            return !module.is.disabled() && (module.has.items() || module.has.message());\n          },\n          useAPI: function() {\n            return $.fn.api !== undefined;\n          }\n        },\n\n        animate: {\n          show: function(callback, $subMenu) {\n            var\n              $currentMenu = $subMenu || $menu,\n              start = ($subMenu)\n                ? function() {}\n                : function() {\n                  module.hideSubMenus();\n                  module.hideOthers();\n                  module.set.active();\n                },\n              transition\n            ;\n            callback = $.isFunction(callback)\n              ? callback\n              : function(){}\n            ;\n            module.verbose('Doing menu show animation', $currentMenu);\n            module.set.direction($subMenu);\n            transition = module.get.transition($subMenu);\n            if( module.is.selection() ) {\n              module.set.scrollPosition(module.get.selectedItem(), true);\n            }\n            if( module.is.hidden($currentMenu) || module.is.animating($currentMenu) ) {\n              if(transition == 'none') {\n                start();\n                $currentMenu.transition('show');\n                callback.call(element);\n              }\n              else if($.fn.transition !== undefined && $module.transition('is supported')) {\n                $currentMenu\n                  .transition({\n                    animation  : transition + ' in',\n                    debug      : settings.debug,\n                    verbose    : settings.verbose,\n                    duration   : settings.duration,\n                    queue      : true,\n                    onStart    : start,\n                    onComplete : function() {\n                      callback.call(element);\n                    }\n                  })\n                ;\n              }\n              else {\n                module.error(error.noTransition, transition);\n              }\n            }\n          },\n          hide: function(callback, $subMenu) {\n            var\n              $currentMenu = $subMenu || $menu,\n              duration = ($subMenu)\n                ? (settings.duration * 0.9)\n                : settings.duration,\n              start = ($subMenu)\n                ? function() {}\n                : function() {\n                  if( module.can.click() ) {\n                    module.unbind.intent();\n                  }\n                  module.remove.active();\n                },\n              transition = module.get.transition($subMenu)\n            ;\n            callback = $.isFunction(callback)\n              ? callback\n              : function(){}\n            ;\n            if( module.is.visible($currentMenu) || module.is.animating($currentMenu) ) {\n              module.verbose('Doing menu hide animation', $currentMenu);\n\n              if(transition == 'none') {\n                start();\n                $currentMenu.transition('hide');\n                callback.call(element);\n              }\n              else if($.fn.transition !== undefined && $module.transition('is supported')) {\n                $currentMenu\n                  .transition({\n                    animation  : transition + ' out',\n                    duration   : settings.duration,\n                    debug      : settings.debug,\n                    verbose    : settings.verbose,\n                    queue      : false,\n                    onStart    : start,\n                    onComplete : function() {\n                      callback.call(element);\n                    }\n                  })\n                ;\n              }\n              else {\n                module.error(error.transition);\n              }\n            }\n          }\n        },\n\n        hideAndClear: function() {\n          module.remove.searchTerm();\n          if( module.has.maxSelections() ) {\n            return;\n          }\n          if(module.has.search()) {\n            module.hide(function() {\n              module.remove.filteredItem();\n            });\n          }\n          else {\n            module.hide();\n          }\n        },\n\n        delay: {\n          show: function() {\n            module.verbose('Delaying show event to ensure user intent');\n            clearTimeout(module.timer);\n            module.timer = setTimeout(module.show, settings.delay.show);\n          },\n          hide: function() {\n            module.verbose('Delaying hide event to ensure user intent');\n            clearTimeout(module.timer);\n            module.timer = setTimeout(module.hide, settings.delay.hide);\n          }\n        },\n\n        escape: {\n          value: function(value) {\n            var\n              multipleValues = $.isArray(value),\n              stringValue    = (typeof value === 'string'),\n              isUnparsable   = (!stringValue && !multipleValues),\n              hasQuotes      = (stringValue && value.search(regExp.quote) !== -1),\n              values         = []\n            ;\n            if(isUnparsable || !hasQuotes) {\n              return value;\n            }\n            module.debug('Encoding quote values for use in select', value);\n            if(multipleValues) {\n              $.each(value, function(index, value){\n                values.push(value.replace(regExp.quote, '&quot;'));\n              });\n              return values;\n            }\n            return value.replace(regExp.quote, '&quot;');\n          },\n          string: function(text) {\n            text =  String(text);\n            return text.replace(regExp.escape, '\\\\$&');\n          }\n        },\n\n        setting: function(name, value) {\n          module.debug('Changing setting', name, value);\n          if( $.isPlainObject(name) ) {\n            $.extend(true, settings, name);\n          }\n          else if(value !== undefined) {\n            if($.isPlainObject(settings[name])) {\n              $.extend(true, settings[name], value);\n            }\n            else {\n              settings[name] = value;\n            }\n          }\n          else {\n            return settings[name];\n          }\n        },\n        internal: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, module, name);\n          }\n          else if(value !== undefined) {\n            module[name] = value;\n          }\n          else {\n            return module[name];\n          }\n        },\n        debug: function() {\n          if(!settings.silent && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function() {\n          if(!settings.silent && settings.verbose && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function() {\n          if(!settings.silent) {\n            module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n            module.error.apply(console, arguments);\n          }\n        },\n        performance: {\n          log: function(message) {\n            var\n              currentTime,\n              executionTime,\n              previousTime\n            ;\n            if(settings.performance) {\n              currentTime   = new Date().getTime();\n              previousTime  = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time          = currentTime;\n              performance.push({\n                'Name'           : message[0],\n                'Arguments'      : [].slice.call(message, 1) || '',\n                'Element'        : element,\n                'Execution Time' : executionTime\n              });\n            }\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function() {\n            var\n              title = settings.name + ':',\n              totalTime = 0\n            ;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function(index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n            if(moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n              if(console.table) {\n                console.table(performance);\n              }\n              else {\n                $.each(performance, function(index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');\n                });\n              }\n              console.groupEnd();\n            }\n            performance = [];\n          }\n        },\n        invoke: function(query, passedArguments, context) {\n          var\n            object = instance,\n            maxDepth,\n            found,\n            response\n          ;\n          passedArguments = passedArguments || queryArguments;\n          context         = element         || context;\n          if(typeof query == 'string' && object !== undefined) {\n            query    = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function(depth, value) {\n              var camelCaseValue = (depth != maxDepth)\n                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)\n                : query\n              ;\n              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {\n                object = object[camelCaseValue];\n              }\n              else if( object[camelCaseValue] !== undefined ) {\n                found = object[camelCaseValue];\n                return false;\n              }\n              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {\n                object = object[value];\n              }\n              else if( object[value] !== undefined ) {\n                found = object[value];\n                return false;\n              }\n              else {\n                module.error(error.method, query);\n                return false;\n              }\n            });\n          }\n          if ( $.isFunction( found ) ) {\n            response = found.apply(context, passedArguments);\n          }\n          else if(found !== undefined) {\n            response = found;\n          }\n          if($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          }\n          else if(returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          }\n          else if(response !== undefined) {\n            returnedValue = response;\n          }\n          return found;\n        }\n      };\n\n      if(methodInvoked) {\n        if(instance === undefined) {\n          module.initialize();\n        }\n        module.invoke(query);\n      }\n      else {\n        if(instance !== undefined) {\n          instance.invoke('destroy');\n        }\n        module.initialize();\n      }\n    })\n  ;\n  return (returnedValue !== undefined)\n    ? returnedValue\n    : $allModules\n  ;\n};\n\n$.fn.dropdown.settings = {\n\n  silent                 : false,\n  debug                  : false,\n  verbose                : false,\n  performance            : true,\n\n  on                     : 'click',    // what event should show menu action on item selection\n  action                 : 'activate', // action on item selection (nothing, activate, select, combo, hide, function(){})\n\n  values                 : false,      // specify values to use for dropdown\n\n  apiSettings            : false,\n  selectOnKeydown        : true,       // Whether selection should occur automatically when keyboard shortcuts used\n  minCharacters          : 0,          // Minimum characters required to trigger API call\n\n  filterRemoteData       : false,      // Whether API results should be filtered after being returned for query term\n  saveRemoteData         : true,       // Whether remote name/value pairs should be stored in sessionStorage to allow remote data to be restored on page refresh\n\n  throttle               : 200,        // How long to wait after last user input to search remotely\n\n  context                : window,     // Context to use when determining if on screen\n  direction              : 'auto',     // Whether dropdown should always open in one direction\n  keepOnScreen           : true,       // Whether dropdown should check whether it is on screen before showing\n\n  match                  : 'both',     // what to match against with search selection (both, text, or label)\n  fullTextSearch         : false,      // search anywhere in value (set to 'exact' to require exact matches)\n\n  placeholder            : 'auto',     // whether to convert blank <select> values to placeholder text\n  preserveHTML           : true,       // preserve html when selecting value\n  sortSelect             : false,      // sort selection on init\n\n  forceSelection         : true,       // force a choice on blur with search selection\n\n  allowAdditions         : false,      // whether multiple select should allow user added values\n  ignoreCase             : false,       // whether to consider values not matching in case to be the same\n  hideAdditions          : true,       // whether or not to hide special message prompting a user they can enter a value\n\n  maxSelections          : false,      // When set to a number limits the number of selections to this count\n  useLabels              : true,       // whether multiple select should filter currently active selections from choices\n  delimiter              : ',',        // when multiselect uses normal <input> the values will be delimited with this character\n\n  showOnFocus            : true,       // show menu on focus\n  allowReselection       : false,      // whether current value should trigger callbacks when reselected\n  allowTab               : true,       // add tabindex to element\n  allowCategorySelection : false,      // allow elements with sub-menus to be selected\n\n  fireOnInit             : false,      // Whether callbacks should fire when initializing dropdown values\n\n  transition             : 'auto',     // auto transition will slide down or up based on direction\n  duration               : 200,        // duration of transition\n\n  glyphWidth             : 1.037,      // widest glyph width in em (W is 1.037 em) used to calculate multiselect input width\n\n  // label settings on multi-select\n  label: {\n    transition : 'scale',\n    duration   : 200,\n    variation  : false\n  },\n\n  // delay before event\n  delay : {\n    hide   : 300,\n    show   : 200,\n    search : 20,\n    touch  : 50\n  },\n\n  /* Callbacks */\n  onChange      : function(value, text, $selected){},\n  onAdd         : function(value, text, $selected){},\n  onRemove      : function(value, text, $selected){},\n\n  onLabelSelect : function($selectedLabels){},\n  onLabelCreate : function(value, text) { return $(this); },\n  onLabelRemove : function(value) { return true; },\n  onNoResults   : function(searchTerm) { return true; },\n  onShow        : function(){},\n  onHide        : function(){},\n\n  /* Component */\n  name           : 'Dropdown',\n  namespace      : 'dropdown',\n\n  message: {\n    addResult     : 'Add <b>{term}</b>',\n    count         : '{count} selected',\n    maxSelections : 'Max {maxCount} selections',\n    noResults     : 'No results found.',\n    serverError   : 'There was an error contacting the server'\n  },\n\n  error : {\n    action          : 'You called a dropdown action that was not defined',\n    alreadySetup    : 'Once a select has been initialized behaviors must be called on the created ui dropdown',\n    labels          : 'Allowing user additions currently requires the use of labels.',\n    missingMultiple : '<select> requires multiple property to be set to correctly preserve multiple values',\n    method          : 'The method you called is not defined.',\n    noAPI           : 'The API module is required to load resources remotely',\n    noStorage       : 'Saving remote data requires session storage',\n    noTransition    : 'This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>'\n  },\n\n  regExp : {\n    escape   : /[-[\\]{}()*+?.,\\\\^$|#\\s]/g,\n    quote    : /\"/g\n  },\n\n  metadata : {\n    defaultText     : 'defaultText',\n    defaultValue    : 'defaultValue',\n    placeholderText : 'placeholder',\n    text            : 'text',\n    value           : 'value'\n  },\n\n  // property names for remote query\n  fields: {\n    remoteValues : 'results',  // grouping for api results\n    values       : 'values',   // grouping for all dropdown values\n    disabled     : 'disabled', // whether value should be disabled\n    name         : 'name',     // displayed dropdown text\n    value        : 'value',    // actual dropdown value\n    text         : 'text'      // displayed text when selected\n  },\n\n  keys : {\n    backspace  : 8,\n    delimiter  : 188, // comma\n    deleteKey  : 46,\n    enter      : 13,\n    escape     : 27,\n    pageUp     : 33,\n    pageDown   : 34,\n    leftArrow  : 37,\n    upArrow    : 38,\n    rightArrow : 39,\n    downArrow  : 40\n  },\n\n  selector : {\n    addition     : '.addition',\n    dropdown     : '.ui.dropdown',\n    hidden       : '.hidden',\n    icon         : '> .dropdown.icon',\n    input        : '> input[type=\"hidden\"], > select',\n    item         : '.item',\n    label        : '> .label',\n    remove       : '> .label > .delete.icon',\n    siblingLabel : '.label',\n    menu         : '.menu',\n    message      : '.message',\n    menuIcon     : '.dropdown.icon',\n    search       : 'input.search, .menu > .search > input, .menu input.search',\n    sizer        : '> input.sizer',\n    text         : '> .text:not(.icon)',\n    unselectable : '.disabled, .filtered'\n  },\n\n  className : {\n    active      : 'active',\n    addition    : 'addition',\n    animating   : 'animating',\n    disabled    : 'disabled',\n    empty       : 'empty',\n    dropdown    : 'ui dropdown',\n    filtered    : 'filtered',\n    hidden      : 'hidden transition',\n    item        : 'item',\n    label       : 'ui label',\n    loading     : 'loading',\n    menu        : 'menu',\n    message     : 'message',\n    multiple    : 'multiple',\n    placeholder : 'default',\n    sizer       : 'sizer',\n    search      : 'search',\n    selected    : 'selected',\n    selection   : 'selection',\n    upward      : 'upward',\n    leftward    : 'left',\n    visible     : 'visible'\n  }\n\n};\n\n/* Templates */\n$.fn.dropdown.settings.templates = {\n\n  // generates dropdown from select values\n  dropdown: function(select) {\n    var\n      placeholder = select.placeholder || false,\n      values      = select.values || {},\n      html        = ''\n    ;\n    html +=  '<i class=\"dropdown icon\"></i>';\n    if(select.placeholder) {\n      html += '<div class=\"default text\">' + placeholder + '</div>';\n    }\n    else {\n      html += '<div class=\"text\"></div>';\n    }\n    html += '<div class=\"menu\">';\n    $.each(select.values, function(index, option) {\n      html += (option.disabled)\n        ? '<div class=\"disabled item\" data-value=\"' + option.value + '\">' + option.name + '</div>'\n        : '<div class=\"item\" data-value=\"' + option.value + '\">' + option.name + '</div>'\n      ;\n    });\n    html += '</div>';\n    return html;\n  },\n\n  // generates just menu from select\n  menu: function(response, fields) {\n    var\n      values = response[fields.values] || {},\n      html   = ''\n    ;\n    $.each(values, function(index, option) {\n      var\n        maybeText = (option[fields.text])\n          ? 'data-text=\"' + option[fields.text] + '\"'\n          : '',\n        maybeDisabled = (option[fields.disabled])\n          ? 'disabled '\n          : ''\n      ;\n      html += '<div class=\"'+ maybeDisabled +'item\" data-value=\"' + option[fields.value] + '\"' + maybeText + '>';\n      html +=   option[fields.name];\n      html += '</div>';\n    });\n    return html;\n  },\n\n  // generates label for multiselect\n  label: function(value, text) {\n    return text + '<i class=\"delete icon\"></i>';\n  },\n\n\n  // generates messages like \"No results\"\n  message: function(message) {\n    return message;\n  },\n\n  // generates user addition to selection menu\n  addition: function(choice) {\n    return choice;\n  }\n\n};\n\n})( jQuery, window, document );\n"]},"hash":"4be1bbc6b34f28c70c9ccb37514c0ac069810ed5"}
